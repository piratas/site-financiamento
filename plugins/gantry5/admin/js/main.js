require=function t(e,n,i){function a(o,s){if(!n[o]){if(!e[o]){var l="function"==typeof require&&require;if(!s&&l)return l(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[o]={exports:{}};e[o][0].call(u.exports,function(t){var n=e[o][1][t];return a(n?n:t)},u,u.exports,t,e,n,i)}return n[o].exports}for(var r="function"==typeof require&&require,o=0;o<i.length;o++)a(i[o]);return a}({1:[function(t,e,n){function i(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function r(t){if(d===setTimeout)return setTimeout(t,0);if((d===i||!d)&&setTimeout)return d=setTimeout,setTimeout(t,0);try{return d(t,0)}catch(e){try{return d.call(null,t,0)}catch(e){return d.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===a||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){g&&f&&(g=!1,f.length?m=f.concat(m):v=-1,m.length&&l())}function l(){if(!g){var t=r(s);g=!0;for(var e=m.length;e;){for(f=m,m=[];++v<e;)f&&f[v].run();v=-1,e=m.length}f=null,g=!1,o(t)}}function c(t,e){this.fun=t,this.array=e}function u(){}var d,h,p=e.exports={};!function(){try{d="function"==typeof setTimeout?setTimeout:i}catch(t){d=i}try{h="function"==typeof clearTimeout?clearTimeout:a}catch(t){h=a}}();var f,m=[],g=!1,v=-1;p.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];m.push(new c(t,e)),1!==m.length||g||r(l)},c.prototype.run=function(){this.fun.apply(null,this.array)},p.title="browser",p.browser=!0,p.env={},p.argv=[],p.version="",p.versions={},p.on=u,p.addListener=u,p.once=u,p.off=u,p.removeListener=u,p.removeAllListeners=u,p.emit=u,p.binding=function(t){throw new Error("process.binding is not supported")},p.cwd=function(){return"/"},p.chdir=function(t){throw new Error("process.chdir is not supported")},p.umask=function(){return 0}},{}],2:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("prime/map")(),r=t("mout/object/merge"),o=(t("mout/array/forEach"),t("mout/string/trim")),s=t("../utils/elements.utils"),l=t("../utils/decouple"),c=t("../utils/async-foreach"),u=a,d={toggleSection:function(t,e,n,i){if(t.type.match(/^touch/)&&t.preventDefault(),e.siblings("[data-g-global-filter]")||e.parent("[data-g-global-filter]"))return d.globalToggleSection(t,e);if(e.matches("label"))return d.treatLabel(t,e);var a=e.parent(".card"),o=u.get(a),l=s("[data-save]"),h=null==e.data("g-assignments-check")?0:1;if(!o||!o.inputs){var p=a.search(".enabler input[type=hidden]");o||(o=u.set(a,{inputs:p}).get(a)),o.inputs||(o=u.set(a,r(u.get(a),{inputs:p})).get(a))}c(o.inputs,function(t){t=s(t),"none"!=t.parent("label, h4").compute("display")&&(t.value(h).emit("change"),s("body").emit("change",{target:t}))},function(){"undefined"!=typeof n&&"undefined"!=typeof i&&n+1==i.length&&l.disabled(!1)})},filterSection:function(t,e,n,i){if(e.siblings("[data-g-global-filter]")||e.parent("[data-g-global-filter]"))return d.globalFilterSection(t,e);var a=e.parent(".card"),l=s("[data-assignments-enabledonly]"),h=u.get(a)||u.set(a,{labels:a.search("label .settings-param-title")}).get(a);if(n=n||e.value(),!h||!h.labels){var p=a.search("label .settings-param-title");h||(h=u.set(a,{labels:p}).get(a)),h.labels||(h=u.set(a,r(u.get(a),{labels:p})).get(a))}if(h=s(h.labels),!n&&!l.checked())return a.style("display","inline-block"),h?h.search("!> label").style("display","block"):h;var f,m,g=0,v=0,b=0;h||e.parent(".card").style("display",l.checked()||n?"none":"inline-block"),c(h,function(t,e){if(t=s(t),f=o(t.text()),m=f.match(new RegExp("^"+n+"|\\s"+n,"gi")),l.checked()&&(m=Number(!!m)&Number(t.parent("label, h4").find('.enabler input[type="hidden"]').value())),m){var r=t.parent("[data-g-assignments-parent]");if(r&&(r=r.data("g-assignments-parent"))){var c=t.parent(".card").find('[data-g-assignments-group="'+r+'"]');c&&c.style("display","block")}t.parent("label, h4").style("display","block"),b++}else t.parent("label, h4").style("display","none"),v++;g++,g==h.length&&i&&a.style("display",b?"inline-block":"none")})},filterEnabledOnly:function(t,e){var n=s('[data-g-global-filter] input[type="text"]');d.globalFilterSection(t,n,e)},treatLabel:function(t,e){if(t&&t.stopPropagation&&t.preventDefault&&(t.stopPropagation(),t.preventDefault()),!s(t.target).matches(".knob, .toggle")){var n=e.find('input[type="hidden"]:not([disabled])');if(n){var i=n.value();return i=!!+i,n.value(Number(!i)).emit("change"),s("body").emit("change",{target:n}),!1}}},globalToggleSection:function(t,e){var n=null==e.data("g-assignments-check")?"[data-g-assignments-uncheck]":"[data-g-assignments-check]",i=s("[data-save]"),a=s("#assignments .card "+n+", .settings-assignments .card "+n);a&&(i.disabled(!0),c(a,function(e,n,i){d.toggleSection(t,s(e),n,i)}))},globalFilterSection:function(t,e){var n=e.value(),i=s("[data-assignments-enabledonly]"),a=s('#assignments .card .search input[type="text"], .settings-assignments .card .search input[type="text"]');(a||i.checked())&&c(a,function(e){d.filterSection(t,s(e),n,"global")})},toggleStateDelegation:function(t,e){var n="1"==e.value();e.attribute("disabled",!n)},chromeFix:function(){if(d.isChrome()){var t,e,n=s("#assignments .settings-param-wrapper, .settings-assignments .settings-param-wrapper");n&&n.forEach(function(n){if(n=s(n),e=parseInt(n.compute("max-height"),10),t=n[0].getBoundingClientRect().height,n.style({overflow:t>=e?"auto":"visible"}),t>=e){var i=100;l(n,"scroll",function(){i=100==i?100.01:100,n.parent(".card").style("width",i+"%")})}})}},isChrome:function(){return navigator.userAgent.toLowerCase().indexOf("chrome")>-1}};i(function(){var t=s("body");t.delegate("input",'#assignments .search input[type="text"], .settings-assignments .search input[type="text"]',d.filterSection),t.delegate("click","#assignments .card label, #assignments [data-g-assignments-check], #assignments [data-g-assignments-uncheck], .settings-assignments .card label, .settings-assignments [data-g-assignments-check], .settings-assignments [data-g-assignments-uncheck]",d.toggleSection),t.delegate("touchend","#assignments .card label, #assignments [data-g-assignments-check], #assignments [data-g-assignments-uncheck], .settings-assignments .card label, .settings-assignments [data-g-assignments-check], .settings-assignments [data-g-assignments-uncheck]",d.toggleSection),t.delegate("change","[data-assignments-enabledonly]",d.filterEnabledOnly),t.delegate("change",'#assignments input[type="hidden"][name], .settings-assignments input[type="hidden"][name]',d.toggleStateDelegation)}),e.exports=d},{"../utils/async-foreach":62,"../utils/decouple":63,"../utils/elements.utils":64,"elements/domready":109,"mout/array/forEach":172,"mout/object/merge":235,"mout/string/trim":270,"prime/map":300}],3:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/zen"),r=t("elements/domready"),o=t("../ui"),s=(t("mout/string/interpolate"),o.modal),l=t("mout/string/trim"),c=t("../utils/get-ajax-url").parse,u=t("../utils/get-ajax-url").global,d=t("../utils/get-ajax-suffix");r(function(){i("body").delegate("click","[data-changelog]",function(t,e){t.preventDefault(),s.open({content:"Loading",method:"post",className:"g5-dialog-theme-default g5-modal-changelog",data:{version:e.data("changelog")},remote:c(u("changelog")+d()),remoteLoaded:function(t,e){if(t.body.success){var n=e.elements.content,r=n.search("#g-changelog > ol > li > a");r.forEach(function(t,e){t=i(t);var n=t.href(),r=new RegExp("#(common|"+GANTRY_PLATFORM+")$","gi"),o=!n.match(r),s="chevron-"+(o?"down":"up");l(t.text())&&(e&&!o&&t.parent("li").after(t.parent("ol").find("> li")),a('i[class="fa g-changelog-toggle fa-fw fa-'+s+'"]').bottom(t),o&&t.nextSibling().style({overflow:"hidden",height:0}),t.on("click",function(e){e.preventDefault();var n=t.find('i[class*="fa-chevron-"]'),i=n.hasClass("fa-chevron-down");i?(n.removeClass("fa-chevron-down").addClass("fa-chevron-up"),t.nextSibling().slideDown()):(n.removeClass("fa-chevron-up").addClass("fa-chevron-down"),t.nextSibling().slideUp())}))})}}})})})},{"../ui":53,"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,elements:111,"elements/domready":109,"elements/zen":135,"mout/string/interpolate":259,"mout/string/trim":270}],4:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/domready"),r=t("agent"),o=t("../ui").modal,s=t("mout/random/guid"),l=t("mout/string/trim"),c=t("../utils/get-ajax-suffix"),u=t("../utils/get-ajax-url").parse,d=(t("../utils/get-ajax-url").global,t("../utils/history")),h=t("mout/queryString/getParam"),p=t("mout/queryString/setParam"),f=function(t,e){if("wordpress"==GANTRY_PLATFORM){var n=t.replace(/[^a-z\d_-\s]/i,"_").toLowerCase(),a=i('[href*="/'+e+'/"]'),r=d.getPageUrl(),o=h(r,"view");a&&a.forEach(function(t){t=i(t);var a=t.href().replace("/"+e+"/","/"+n+"/");t.href(a)}),o=o.replace("/"+e+"/","/"+n+"/"),r=p(r,"view",o),d.replaceState({uuid:s(),doNothing:!0},window.document.title,r)}};a(function(){var t,e,n,a,s=i("body");s.delegate("keydown",".config-select-wrap [data-title-edit]",function(t,e){var n=t.which?t.which:t.keyCode;32!=n&&13!=n||(t.preventDefault(),s.emit("mousedown",t))}),s.delegate("mousedown",".config-select-wrap [data-title-edit]",function(i,s){t=s.siblings(".g-selectize-control"),e=s.siblings("select"),n=s.siblings("[data-title-editable]"),n.gConfEditAttached||(n.gConfEditAttached=!0,n.on("title-edit-end",function(i,d,h){return i=l(i),h||i==d?(t.style("display","inline-block"),void n.style("display","none").attribute("contenteditable",null)):(s.addClass("disabled"),s.removeClass("fa-pencil").addClass("fa-spin-fast fa-spinner"),a=n.data("g-config-href"),void r("post",u(a+c()),{title:i},function(a,r){if(r.body.success){var l=e.selectizeInstance,c=e.value(),u=l.Options[c];u[l.options.labelField]=i,l.updateOption(c,u),t.style("display","inline-block"),n.style("display","none")}else o.open({content:r.body.html||r.body,afterOpen:function(t){r.body.html||t.style({width:"90%"})}}),n.data("title-editable",d).text(d);f(i,c),s.removeClass("disabled"),s.removeClass("fa-spin-fast fa-spinner").addClass("fa-pencil")}))})),n.style({width:t.compute("width"),display:"inline-block"}),t.style("display","none")})}),e.exports={}},{"../ui":53,"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,"../utils/history":73,agent:78,elements:111,"elements/domready":109,"mout/queryString/getParam":245,"mout/queryString/setParam":247,"mout/random/guid":249,"mout/string/trim":270}],5:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/zen"),r=t("elements/domready"),o=t("mout/string/trim"),s=t("mout/object/keys"),l=t("../ui").modal,c=t("../ui").toastr,u=t("agent"),d=t("../utils/get-ajax-suffix"),h=t("../utils/get-ajax-url").parse,p=t("../utils/get-ajax-url").global,f=t("../utils/flags-state");t("./dropdown-edit"),r(function(){var t=i("body");t.delegate("click","[data-g5-outline-create], [data-g5-outline-duplicate]",function(t,e){t&&t.preventDefault(),l.open({content:"Loading",method:"post",overlayClickToClose:!1,remote:h(e.href()+d()),remoteLoaded:function(t,e){if(!t.body.success)return void l.enableCloseByOverlay();var r=e.elements.content.find('[name="title"]'),o=e.elements.content.find("[data-g-outline-create-confirm]");r.on("keyup",function(t){var e=t.which;13===e&&o.emit("click")}),o.on("click",function(){o.hideIndicator(),o.showIndicator();var t=h(o.data("g-outline-create-confirm")+d()),s=e.elements.content.find('[name="from"]:checked'),p=e.elements.content.find('[name="preset"]'),f=e.elements.content.find('[name="outline"]'),m=e.elements.content.find('[name="inherit"]'),g={title:r.value(),from:s?s.value():null,preset:p?p.value():null,outline:f?f.value():null,inherit:m.checked()?1:0};["title","from","preset","outline"].forEach(function(t){g[t]||delete g[t]}),u("post",t,g,function(t,e){if(o.hideIndicator(),e.body.success){var r=i("#configurations").find("ul").find("li"),s=a("li").attribute("class",r.attribute("class"));s.after(r).html(e.body.outline),c.success(e.body.html||"Action successfully completed.",e.body.title||""),n(s.find("[data-title-editable]")),l.close()}else l.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}})})}),setTimeout(function(){r[0].focus()},5)}})}),t.delegate("change",'input[type="radio"]#from-preset, input[type="radio"]#from-outline',function(t,e){e=i(e);var n=e.value(),a=e.parent(".card").search(".g-create-from"),r=a.style("display","none").filter(function(t){return t=i(t),t.hasClass("g-create-from-"+n)});r&&i(r).style("display","block")}),t.delegate("click","#configurations [data-g-config]",function(e,n){var a=n.data("g-config"),r=n.data("g-config-href"),o=n.data("g-config-href-confirm"),m=window.btoa(r),g=(n.data("g-config-method")||"post").toLowerCase();return e&&e.preventDefault&&e.preventDefault(),"delete"!=a||f.get("free:to:delete:"+m,!1)?(n.hideIndicator(),n.showIndicator(),void u(g,h((o||r)+d()),{},function(e,a){if(a.body.success){var r=i("#configuration-selector"),o=r.value(),u=a.body.outline,d=i('[href="'+p("configurations")+'"]');if(u&&o==u){var h=s(r.selectizeInstance.Options);h.length&&d.href(d.href().replace("style="+u,"style="+h.shift()))}d?t.emit("click",{target:d}):window.location=window.location,c.success(a.body.html||"Action successfully completed.",a.body.title||""),u&&(t.outlineDeleted=u)}else l.open({content:a.body.html||a.body,afterOpen:function(t){a.body.html||t.style({width:"90%"})}});n.hideIndicator()})):(f.warning({url:h(r+d()),callback:function(e,a){var r=a.find("[data-g-delete-confirm]"),o=a.find("[data-g-delete-cancel]");r&&(r.on("click",function(e){return e.preventDefault(),!this.attribute("disabled")&&(f.get("free:to:delete:"+m,!0),i([r,o]).attribute("disabled"),t.emit("click",{target:n}),void l.close())}),o.on("click",function(t){return t.preventDefault(),!this.attribute("disabled")&&(i([r,o]).attribute("disabled"),f.get("free:to:delete:"+m,!1),void l.close())}))}}),!1)});var e=function(t,e,n){if(this.style("text-overflow","ellipsis"),!n&&t!=e){var i=this,r=i.data("g-config-href"),s=(i.data("g-config-method")||"post").toLowerCase(),c=i.parent();c.showIndicator(),c.find("[data-title-edit]").addClass("disabled"),u(s,h(r+d()),{title:o(t)},function(n,r){if(r.body.success){i.data("title",t).data("tip",t);var o=a("div").html(r.body.outline),s=o.find("h4 span:last-child"),u=o.find(".outline-actions");i.parent(".card").find("h4 span:last-child").html(s.html()),i.parent(".card").find(".outline-actions").html(u.html())}else l.open({content:r.body.html||r.body,afterOpen:function(t){r.body.html||t.style({width:"90%"})}}),i.data("title-editable",e).text(e);c.hideIndicator(),c.find("[data-title-edit]").removeClass("disabled")})}},n=function(t){t&&t.length&&t.forEach(function(t){t=i(t),t.confWasAttached=!0,t.on("title-edit-start",function(){t.style("text-overflow","inherit")}),t.on("title-edit-end",e)})};t.on("statechangeAfter",function(t,e){var a=i("#configurations [data-title-editable]");return!a||(a=a.filter(function(t){return"undefined"==typeof i(t).confWasAttached}),void n(a))}),n(i("#configurations [data-title-editable]"))}),e.exports={}},{"../ui":53,"../utils/flags-state":67,"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,"./dropdown-edit":4,agent:78,elements:111,"elements/domready":109,"elements/zen":135,"mout/object/keys":234,"mout/string/trim":270}],6:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("elements/attributes"),r=t("prime/map"),o=t("mout/lang/deepEquals"),s=t("mout/lang/is"),l=t("mout/lang/isString"),c=t("mout/object/has"),u=t("mout/collection/forEach"),d=(t("mout/array/invoke"),t("../utils/history")),h=t("../utils/flags-state"),p=t("./submit");t("./multicheckbox");var f,m=function(t){var e=new r,n=a("[data-g-styles-defaults]"),i=a('input[type="checkbox"].settings-param-toggle');if(n=n?JSON.parse(n.data("g-styles-defaults")):{},i){var o={};i.forEach(function(t){t=a(t),o[t.id()]=t.checked()}),e.set("__js__overrides",JSON.stringify(o))}if(t){var s;return t.forEach(function(t){s=a('[name="'+t+'"]'),s&&e.set(t,s.value())}),e}var l=a(".settings-block [name]");return!!l&&(l.forEach(function(t){t=a(t);var i=t.attribute("name"),r=!c(n,i);"checkbox"!=t.type()||t.value().length||t.value("0"),e.set(i,r?t.value():n[i])},this),e)},g=function(t){var e=new r;return u(t,function(t,n){e.set(n,t)}),e},v={single:function(){},whole:function(){},blanks:function(){},presets:function(){}};i(function(){var t,e=a("body");f=m(),v.single=function(t,e){var n=e.parent(".settings-param")||e.parent("h4")||e.parent(".input-group"),i=n?n.matches("h4")?n:n.find(".settings-param-title, .g-instancepicker-title"):null,a=!!n&&n.find(".settings-param-toggle"),r=!1,o=e.hasClass("settings-param-toggle");if(n){if(o)return v.whole("force");"checkbox"==e.type()&&e.value(Number(e.checked()).toString()),f&&null==f.get(e.attribute("name"))&&(f.set(e.attribute("name"),e.value()),r=!0),i&&f&&null!=f.get(e.attribute("name"))&&(f.get(e.attribute("name"))!==e.value()||r?(a&&t.forceOverride&&!a.checked()&&a[0].click(),i.showIndicator("changes-indicator font-small fa fa-circle-o fa-fw")):(a&&t.forceOverride&&a.checked()&&a[0].click(),i.hideIndicator()),v.blanks(t,n.find(".settings-param-field")),v.whole("force"),v.presets())}},v.whole=function(t){if(f){var e=o(f,m(t?f.keys():null),function(t,e){return l(t)&&l(e)&&"#"==t.substr(0,1)&&"#"==e.substr(0,1)?t.toLowerCase()==e.toLowerCase():s(t,e)}),n=a("[data-save]");n&&(h.set("pending",!e),n[e?"hideIndicator":"showIndicator"]("changes-indicator fa fa-circle-o fa-fw"))}},v.blanks=function(t,e){if(e){var n=e.find("[name]"),i=e.find(".g-reset-field");if(!n||!i)return!0;var a=n.value();!a||n.disabled()?i.style("display","none"):i.removeAttribute("style")}},v.presets=function(){var e,n=a("[data-g-styles]");if(n){t||(t=new r,u(n,function(n,i){n=a(n),e={index:i,map:g(JSON.parse(n.data("g-styles")))},t.set(n,e)}));var i,s;t.forEach(function(t,e){i=m(t.map.keys()),i.unset("__js__overrides"),s=o(i,t.map,function(t,e){return t==e}),a(a("[data-g-styles]")[t.index]).parent()[s?"addClass":"removeClass"]("g-preset-match")})}},e.delegate("input",'.settings-block input[name][type="text"], .settings-block textarea[name]',v.single),e.delegate("change",'.settings-block input[name][type="hidden"], .settings-block input[name][type="checkbox"], .settings-block select[name], .settings-block .selectized[name], .settings-block input[id][type="checkbox"].settings-param-toggle',v.single),e.delegate("input",".g-urltemplate",function(t,e){var n=e.parent(".settings-param").siblings();if(n&&(n=n.find("[data-g-urltemplate]"))){var i=n.data("g-urltemplate");n.attribute("href",i.replace(/#ID#/g,e.value()))}}),e.delegate("mouseenter",".settings-param-field",v.blanks,!0),e.delegate("click",".g-reset-field",function(t,n){var i,a=n.parent(".settings-param-field");if(a&&(i=a.find("[name]"),i&&!i.disabled())){var r=i.selectizeInstance;r?r.setValue(""):i.value(""),i.emit("change"),e.emit("input",{target:i}),e.emit("keyup",{target:i})}}),e.on("statechangeEnd",function(){d.getState();e.emit("updateOriginalFields")}),e.on("updateOriginalFields",function(){f=m(),v.presets()}),v.presets()}),e.exports={compare:v,collect:m,submit:p}},{"../utils/flags-state":67,"../utils/history":73,"./multicheckbox":7,"./submit":8,"elements/attributes":106,"elements/domready":109,"mout/array/invoke":176,"mout/collection/forEach":187,"mout/lang/deepEquals":199,"mout/lang/is":200,"mout/lang/isString":209,"mout/object/has":232,"prime/map":300}],7:[function(t,e,n){"use strict";var i=t("elements/attributes"),a=t("elements/domready"),r=t("mout/array/remove"),o=t("mout/array/insert");t("mout/array/contains");a(function(){var t=i("body");t.delegate("change",'.input-multicheckbox .input-group input[name][type="hidden"]',function(t,e){var n=e.attribute("name"),a=e.value().split(","),s=i('[data-multicheckbox-field="'+n+'"]');s&&s.forEach(function(t){t=i(t),t.checked()&&o(a,t.value()),t.checked()||r(a,t.value())}),e.value(a.filter(String).join(","))}),t.delegate("change",'.input-multicheckbox .input-group input[data-multicheckbox-field][type="checkbox"]',function(e,n){var a=i('[name="'+n.data("multicheckbox-field")+'"]'),s=n.value(),l=a.value().split(","),c=n.checked();c&&o(l,s),c||r(l,s),a.value(l.filter(String).join(",")),t.emit("change",{target:a})})})},{"elements/attributes":106,"elements/domready":109,"mout/array/contains":164,"mout/array/insert":174,"mout/array/remove":179}],8:[function(t,e,n){"use strict";var i=t("elements"),a=t("mout/lang/isArray"),r=t("mout/array/contains"),o=t("mout/string/trim"),s=t("../utils/field-validation"),l=function(t,e,n){var l=[],c=[];t=i(t),e=i(e),n=n||{},i(t).forEach(function(t){t=i(t);var o=t.attribute("name"),u=t.attribute("type");if(o&&!t.disabled()&&("radio"!=u||t.checked())&&(t=e.find('[name="'+o+'"]'+("radio"==u?":checked":"")),"checkbox"===u&&e.find('[type="hidden"][name="'+o+'"]')&&(t=e.find('[name="'+o+'"][type="checkbox"]')),t)){var d="checkbox"==t.type()?Number(t.checked()):t.value(),h=t.parent(".settings-param"),p=h?h.find('> input[type="checkbox"]'):null;if(p=p||i(t.data("override-target")),r(["select","select-multiple"],t.type())&&t.attribute("multiple")&&(d=(t.search("option[selected]")||[]).map(function(t){return i(t).value()})),p&&!p.checked())return;s(t)||c.push(t),a(d)?d.forEach(function(t){l.push(o+"[]="+encodeURIComponent(t))}):(!n.submitUnchecked||"checkbox"!=t.type()||"checkbox"==t.type()&&d)&&l.push(o+"="+encodeURIComponent(d))}});var u,d=e.search("h4 [data-title-editable]");return d&&d.forEach(function(t){t=i(t),t.parent("[data-collection-template]")||(u=t.data("collection-key")||(n.isRoot?"settings[title]":"title"),l.push(u+"="+encodeURIComponent(o(t.data("title-editable")))))}),{valid:l,invalid:c}};e.exports=l},{"../utils/field-validation":66,elements:111,"mout/array/contains":164,"mout/lang/isArray":201,"mout/string/trim":270}],9:[function(t,e,n){"use strict";var i=t("prime"),a=t("elements"),r=t("./base"),o=t("elements/zen"),s=t("../../utils/get-ajax-url").config,l=new i({inherits:r,options:{type:"atom"},constructor:function(t){r.call(this,t),this.on("changed",this.hasChanged)},updateTitle:function(t){return this.block.find(".title").text(t),this.setTitle(t),this},layout:function(){var t=s(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),e=this.getSubType()?'data-lm-blocksubtype="'+this.getSubType()+'"':"";return'<div class="'+this.getType()+'" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'" '+e+'><span><span class="title">'+this.getTitle()+'</span><span class="font-small">'+(this.getSubType()||this.getKey()||this.getType())+'</span></span><div class="float-right"><i aria-label="Configure Atom Settings" class="fa fa-cog" data-lm-nodrag data-lm-nodrag data-lm-settings="'+t+'"></i></div></div>'},hasChanged:function(t,e){var n=this.block.find("span > i.changes-indicator:first-child");n&&e&&!e.changeState||(this.block[t?"addClass":"removeClass"]("block-has-changes"),!t&&n&&n.remove(),t&&!n&&o("i.fa.fa-circle-o.changes-indicator").before(this.block.find(".icon")))},onRendered:function(t,e){var n=a('[data-lm-disabled][data-lm-subtype="'+this.getSubType()+'"]');(n||0===this.getAttribute("enabled"))&&this.disable()}});e.exports=l},{"../../utils/get-ajax-url":69,"./base":11,elements:111,"elements/zen":135,prime:299}],10:[function(t,e,n){"use strict";var i=t("prime"),a=t("elements"),r=t("elements/zen"),o=t("mout/function/bind"),s=t("./section"),l=new i({inherits:s,options:{type:"atoms",attributes:{name:"Atoms Section"}},layout:function(){return this.deprecated='<div class="atoms-notice">Looking for Atoms? To make it easier we moved them in the <a href="#"><i class="fa fa-fw fa-list-alt"></i> Page Settings</a>.</div>','<div class="atoms-section" style="display: none;" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'"><div class="section-header clearfix"><h4 class="float-left">'+this.getAttribute("name")+"</h4></div></div>"},getId:function(){return this.id||(this.id=this.options.type)},onDone:function(t){if(!this.block.search('[data-lm-blocktype="atom"]')){var e=[this.getId()],n=this.block.search("[data-lm-id]");return n&&n.forEach(function(t){e.push(a(t).data("lm-id"))}),e.reverse().forEach(o(function(t){this.options.builder.remove(t)},this)),this.block.empty()[0].outerHTML=this.deprecated,void this._attachRedirect()}this.block.search("[data-lm-id]")||(this.grid.insert(this.block,"bottom"),this.options.builder.add(this.grid)),r("div").html(this.deprecated).firstChild().after(this.block),this._attachRedirect()},_attachRedirect:function(){var t=a('[data-g5-nav="page"]');t&&a(".atoms-notice a").on("click",function(e){e.preventDefault(),a("body").emit("click",{target:t})})}});e.exports=l},{"./section":19,elements:111,"elements/zen":135,"mout/function/bind":190,prime:299}],11:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime-util/prime/options"),r=t("prime-util/prime/bound"),o=t("prime/emitter"),s=t("elements/zen"),l=t("mout/string/trim"),c=t("elements"),u=t("../id"),d=t("mout/object/size"),h=t("mout/object/get"),p=t("mout/object/has"),f=t("mout/object/set"),m=t("../../utils/translate"),g=t("../../utils/get-outline").getCurrentOutline;t("elements/traversal");var v=new i({mixin:[r,a],inherits:o,options:{subtype:!1,attributes:{},inherit:{}},constructor:function(t){return this.setOptions(t),this.fresh=!this.options.id,this.id=this.options.id||u(this.options),this.attributes=this.options.attributes||{},this.inherit=this.options.inherit||{},this.block=s("div").html(this.layout()).firstChild(),this.on("rendered",this.bound("onRendered")),this},guid:function(){return guid()},getId:function(){return this.id||(this.id=u(this.options))},getType:function(){return this.options.type||""},getSubType:function(){return this.options.subtype||""},getTitle:function(){return l(this.options.title||"Untitled")},setTitle:function(t){return this.options.title=l(t||"Untitled"),this},getKey:function(){return""},getPageId:function(){var t=c("[data-lm-root]");return t?t.data("lm-page"):"data-root-not-found"},getAttribute:function(t){return h(this.attributes,t)},getAttributes:function(){return this.attributes||{}},getInheritance:function(){return this.inherit||{}},updateTitle:function(){return this},setAttribute:function(t,e){return f(this.attributes,t,e),this},setAttributes:function(t){return this.attributes=t,this},setInheritance:function(t){return this.inherit=t,this},hasAttribute:function(t){return p(this.attributes,t)},enableInheritance:function(){},disableInheritance:function(){},refreshInheritance:function(){},hasInheritance:function(){return d(this.inherit)&&this.inherit.outline!=g()},disable:function(){this.block.title(m("GANTRY5_PLATFORM_JS_LM_DISABLED_PARTICLE","particle")),this.block.addClass("particle-disabled")},enable:function(){this.block.removeAttribute("title"),this.block.removeClass("particle-disabled")},insert:function(t,e){return this.block[e||"after"](t),this},adopt:function(t){return t.insert(this.block),this},isNew:function(t){return"undefined"!=typeof t&&(this.fresh=!!t),this.fresh},dropzone:function(){return"data-lm-dropzone"},addDropzone:function(){this.block.data("lm-dropzone",!0)},removeDropzone:function(){this.block.data("lm-dropzone",null)},layout:function(){},onRendered:function(){},setLayout:function(t){return this.block=t,this},getLimits:function(){return!1}});e.exports=v},{"../../utils/get-outline":70,"../../utils/translate":76,"../id":26,elements:111,"elements/traversal":134,"elements/zen":135,"mout/object/get":231,"mout/object/has":232,"mout/object/set":239,"mout/object/size":240,"mout/string/trim":270,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298}],12:[function(t,e,n){"use strict";var i=t("prime"),a=t("./base"),r=t("../../utils/elements.utils"),o=t("elements/zen"),s=t("mout/number/enforcePrecision"),l=t("mout/function/bind"),c=new i({inherits:a,options:{type:"block",attributes:{size:100}},constructor:function(t){a.call(this,t),t.attributes&&t.attributes.size&&this.setAttribute("size",s(t.attributes.size,1)),this.on("changed",this.hasChanged)},getSize:function(){return s(this.getAttribute("size"),1)},setSize:function(t,e){t="undefined"==typeof t?this.getSize():Math.max(0,Math.min(100,parseFloat(t))),t=s(t,1),e&&this.setAttribute("size",t),r(this.block).style({flex:"0 1 "+t+"%","-webkit-flex":"0 1 "+t+"%","-ms-flex":"0 1 "+t+"%"}),this.emit("resized",t,this)},setAnimatedSize:function(t,e){t="undefined"==typeof t?this.getSize():Math.max(0,Math.min(100,parseFloat(t))),t=s(t,1),e&&this.setAttribute("size",t),r(this.block).animate({flex:"0 1 "+t+"%","-webkit-flex":"0 1 "+t+"%","-ms-flex":"0 1 "+t+"%"},l(function(){this.block.attribute("style",null),this.setSize(t)},this)),this.emit("resized",t,this)},setLabelSize:function(t){var e=this.block.find("> .particle-size");return!!e&&void e.text(s(t,1)+"%")},layout:function(){return'<div class="g-block" data-lm-id="'+this.getId()+'"'+this.dropzone()+' data-lm-blocktype="block"></div>'},onRendered:function(t,e){if(t.block.find('> [data-lm-blocktype="section"]')&&this.removeDropzone(),e){var n=e.block.parent();(n.data("lm-root")||"container"==n.data("lm-blocktype")&&(n.parent().data("lm-root")||"wrapper"==n.parent().data("lm-blocktype")))&&(o("span.particle-size").text(this.getSize()+"%").top(t.block),t.on("resized",this.bound("onResize")))}},onResize:function(t){this.setLabelSize(t)},hasChanged:function(t){var e,n=this.block.find('> [data-lm-id]:not([data-lm-blocktype="section"]):not([data-lm-blocktype="container"])');if(this.changeState=t,!n)return n=this.block.find("> .particle-size")||this.block.parent('[data-lm-blocktype="block"]').find("> .particle-size"),e=n.find("i:first-child"),!t&&e&&e.remove(),void(t&&!e&&o("i.fa.fa-circle-o.changes-indicator").top(n));var i=this.options.builder.get(n.data("lm-id"));i&&i.emit("changed",t,this)}});e.exports=c},{"../../utils/elements.utils":64,"./base":11,"elements/zen":135,"mout/function/bind":190,"mout/number/enforcePrecision":220,prime:299}],13:[function(t,e,n){"use strict";var i=t("prime"),a=t("./base"),r=t("elements/zen"),o=(t("elements"),t("../../utils/get-ajax-url").config),s=t("../../utils/translate"),l=new i({inherits:a,options:{type:"container"},constructor:function(t){a.call(this,t),this.on("changed",this.hasChanged)},layout:function(){return'<div class="g-lm-container" data-lm-id="'+this.getId()+'" data-lm-blocktype="container"></div>'},onRendered:function(t,e){e||this.addSettings(t)},hasChanged:function(t,e){var n=this.block.find("span.title > i:first-child");if((!n||!e||e.changeState)&&(this.block[t?"addClass":"removeClass"]("block-has-changes"),!t&&n&&n.remove(),t&&!n)){var i=this.block.find("span.title");i&&r("i.fa.fa-circle-o.changes-indicator").top(i)}},addSettings:function(t){var e=o(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),n=r("div.container-wrapper.clearfix").top(t.block),i=r("div.container-title").bottom(n),a=r("div.container-actions").bottom(n);i.html('<span class="title">'+this.getType()+"</span>"),a.html('<span data-tip="'+s("GANTRY5_PLATFORM_JS_LM_SETTINGS","Container")+'" data-tip-place="top-left"><i aria-label="'+s("GANTRY5_PLATFORM_JS_LM_CONFIGURE_SETTINGS","Container")+'" class="fa fa-cog" data-lm-settings="'+e+'"></i></span>')}});e.exports=l},{"../../utils/get-ajax-url":69,"../../utils/translate":76,"./base":11,elements:111,"elements/zen":135,prime:299}],14:[function(t,e,n){"use strict";var i=t("prime"),a=t("./base"),r=(t("elements"),t("../../utils/get-ajax-url").config,new i({inherits:a,options:{type:"grid"},constructor:function(t){a.call(this,t),this.on("changed",this.hasChanged)},layout:function(){return'<div class="g-grid nowrap" data-lm-id="'+this.getId()+'" '+this.dropzone()+'  data-lm-samewidth data-lm-blocktype="grid"></div>'},onRendered:function(){var t=this.block.parent();t&&"atoms"==t.data("lm-blocktype")&&this.block.removeClass("nowrap"),
(t&&t.data("lm-root")||"container"==t.data("lm-blocktype")&&t.parent().data("lm-root"))&&this.removeDropzone()},hasChanged:function(t){var e=this.block.parent('[data-lm-blocktype="section"]'),n=!!e&&e.data("lm-id");this.changeState=t,e&&n&&this.options.builder&&this.options.builder.get(n).emit("changed",t,this)}}));e.exports=r},{"../../utils/get-ajax-url":69,"./base":11,elements:111,prime:299}],15:[function(t,e,n){e.exports={base:t("./base"),atom:t("./atom"),section:t("./section"),offcanvas:t("./offcanvas"),wrapper:t("./wrapper"),atoms:t("./atoms"),grid:t("./grid"),container:t("./container"),block:t("./block"),particle:t("./particle"),position:t("./position"),system:t("./system"),spacer:t("./spacer")}},{"./atom":9,"./atoms":10,"./base":11,"./block":12,"./container":13,"./grid":14,"./offcanvas":16,"./particle":17,"./position":18,"./section":19,"./spacer":20,"./system":21,"./wrapper":22}],16:[function(t,e,n){"use strict";var i=t("prime"),a=t("./section"),r=t("../../utils/get-ajax-url").config,o=t("../../utils/get-outline").getOutlineNameById,s=t("../../utils/translate"),l=new i({inherits:a,options:{type:"offcanvas",attributes:{name:"Offcanvas Section"}},layout:function(){var t=r(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),e="",n="";if(this.hasInheritance()){var i=o(this.inherit.outline);e='<div class="g-inherit g-section-inherit"><div class="g-inherit-content">'+s("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+i+"</strong>")+"</div></div>",n=" g-inheriting g-inheriting-"+this.inherit.include.join(" g-inheriting-")}return'<div class="offcanvas-section'+n+'" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'"><div class="section-header clearfix"><h4 class="float-left" title="'+this.getAttribute("name")+'">'+this.getAttribute("name")+'</h4><div class="section-actions float-right"><span data-tip="'+s("GANTRY5_PLATFORM_JS_LM_ADD_ROW","Offcanvas")+'" data-tip-place="top-right"><i aria-label="'+s("GANTRY5_PLATFORM_JS_LM_ADD_ROW","Offcanvas")+'" class="fa fa-plus"></i></span> <span class="section-settings" data-tip="'+s("GANTRY5_PLATFORM_JS_LM_SETTINGS","Offcanvas")+'" data-tip-place="top-right"><i aria-label="'+s("GANTRY5_PLATFORM_JS_LM_CONFIGURE_SETTINGS","Offcanvas")+'" class="fa fa-cog" data-lm-settings="'+t+'"></i></span></div></div>'+e+"</div>"},getId:function(){return this.id||(this.id=this.options.type)}});e.exports=l},{"../../utils/get-ajax-url":69,"../../utils/get-outline":70,"../../utils/translate":76,"./section":19,prime:299}],17:[function(t,e,n){(function(n){"use strict";var i=t("prime"),a=t("elements"),r=t("./atom"),o=(t("mout/function/bind"),t("mout/number/enforcePrecision")),s=t("mout/object/forOwn"),l=t("../../utils/get-ajax-url").config,c=t("../../utils/get-outline").getOutlineNameById,u=t("../../utils/translate"),d=0,h=new i({inherits:r,options:{type:"particle"},constructor:function(t){++d,r.call(this,t)},layout:function(){var t=l(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),e=this.getSubType()?'data-lm-blocksubtype="'+this.getSubType()+'"':"",n="";return this.hasInheritance()&&(n=" g-inheriting",this.inherit.include.length&&(n+=" g-inheriting-"+this.inherit.include.join(" g-inheriting-"))),'<div class="'+this.getType()+n+'" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'" '+e+'><span><span class="icon" '+this.addInheritanceTip(!0)+'><i class="fa '+this.getIcon()+'"></i></span><span class="title">'+this.getTitle()+'</span><span class="font-small">'+(this.getKey()||this.getSubType()||this.getType())+'</span></span><div class="float-right"><span class="particle-size"></span> <i aria-label="'+u("GANTRY5_PLATFORM_JS_LM_CONFIGURE_SETTINGS","Particle")+'" class="fa fa-cog" data-lm-nodrag data-lm-settings="'+t+'"></i></div></div>'},enableInheritance:function(){if(this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.hasInheritance()){var t=(c(this.inherit.outline),this.block.find(".icon"));this.block.addClass("g-inheriting"),this.inherit.include.length&&this.block.addClass("g-inheriting-"+this.inherit.include.join(" g-inheriting-")),this.block.find(".icon .fa").attribute("class","fa "+this.getIcon()),s(this.getInheritanceTip(),function(e,n){t.data(n,e)}),n.G5.tips.reload()}},disableInheritance:function(){var t=this.block.find(".icon");this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.block.removeClass("g-inheriting"),this.block.find(".icon .fa").attribute("class","fa "+this.getIcon()),s(this.getInheritanceTip(),function(e,n){t.data(n,null)}),n.G5.tips.reload()},refreshInheritance:function(){this.block[this.hasInheritance()?"removeClass":"addClass"]("g-inheritance"),this.hasInheritance()&&this.block.attribute("class",this.cleanKlass(this.block.attribute("class")))},addInheritanceTip:function(t){var e=this.getInheritanceTip();if(t){var n="";s(e,function(t,e){n+="data-"+e+'="'+t+'" '}),e=n}return this.hasInheritance()?e:""},getInheritanceTip:function(){var t=c(this.inherit?this.inherit.outline:null),e=this.inherit.particle||"",n=(this.inherit.include||[]).join(", ");return{tip:u("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+t+"</strong>")+"<br />ID: "+e+"<br />Replace: "+n,"tip-offset":-10,"tip-place":"top-right"}},cleanKlass:function(t){return t=(t||"").split(" "),t.filter(function(t){return!t.match(/^g-inheriting-/)}).join(" ")},setLabelSize:function(t){var e=this.block.find(".particle-size");return!!e&&void e.text(o(t,1)+"%")},onRendered:function(t,e){var n=e.getSize()||100,i=a('[data-lm-disabled][data-lm-subtype="'+this.getSubType()+'"]');(i||0===this.getAttribute("enabled"))&&this.disable(),this.setLabelSize(n),e.on("resized",this.bound("onParentResize"))},getParent:function(){var t=this.block.parent("[data-lm-id]");return this.options.builder.get(t.data("lm-id"))},onParentResize:function(t){this.setLabelSize(t)},getIcon:function(){if(this.hasInheritance())return"fa-lock";var t=this.getType(),e=this.getSubType(),n=a('.particles-container [data-lm-blocktype="'+t+'"][data-lm-subtype="'+e+'"]');return n?n.data("lm-icon"):"fa-cube"},getLimits:function(t){if(!t)return!1;var e=t.block.nextSibling()||t.block.previousSibling()||!1;if(!e)return[100,100];var n=this.options.builder.get(e.data("lm-id")),i={current:this.getParent().getSize(),sibling:n.getSize()};return[5,i.current+i.sibling-5]}});e.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../utils/get-ajax-url":69,"../../utils/get-outline":70,"../../utils/translate":76,"./atom":9,elements:111,"mout/function/bind":190,"mout/number/enforcePrecision":220,"mout/object/forOwn":230,prime:299}],18:[function(t,e,n){"use strict";var i=t("prime"),a=t("mout/string/trim"),r=t("./particle"),o=0,s=new i({inherits:r,options:{type:"position"},constructor:function(t){++o,r.call(this,t),this.setAttribute("title",this.getTitle()),this.setAttribute("key",this.getKey()),this.isNew()&&--o},getTitle:function(){return a(this.options.title||"Position "+o)},getKey:function(){return this.getAttribute("key")||a(this.getTitle()).replace(/\s/g,"-").toLowerCase()},updateKey:function(t){return this.options.key=t||this.getKey(),this.block.find(".font-small").text(this.getKey()),this}});e.exports=s},{"./particle":17,"mout/string/trim":270,prime:299}],19:[function(t,e,n){"use strict";var i=t("prime"),a=t("./base"),r=(t("prime-util/prime/bound"),t("./grid")),o=t("elements"),s=t("elements/zen"),l=t("mout/function/bind"),c=t("mout/object/forOwn"),u=t("../../utils/get-ajax-url").config,d=t("../../utils/get-outline").getOutlineNameById,h=t("../../utils/translate");t("elements/insertion");var p=0,f=new i({inherits:a,options:{},constructor:function(t){++p,this.grid=new r,a.call(this,t),this.on("done",this.bound("onDone")),this.on("changed",this.hasChanged)},layout:function(){var t=u(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId()),e="",n="";if(this.hasInheritance()){var i=d(this.inherit.outline);e=this.renderInheritanceLabel(i),n=" g-inheriting",this.inherit.include.length&&(n+=" g-inheriting-"+this.inherit.include.join(" g-inheriting-"))}return'<div class="section'+n+'" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'" data-lm-blocksubtype="'+this.getSubType()+'"><div class="section-header clearfix"><h4 class="float-left" title="'+this.getTitle()+'">'+this.getTitle()+'</h4><div class="section-actions float-right"><span class="section-addrow" data-tip="'+h("GANTRY5_PLATFORM_JS_LM_ADD_ROW","Section")+'" data-tip-place="top-right"><i aria-label="'+h("GANTRY5_PLATFORM_JS_LM_ADD_ROW","Section")+'" class="fa fa-plus"></i></span> <span class="section-settings" data-tip="'+h("GANTRY5_PLATFORM_JS_LM_SETTINGS","Section")+'" data-tip-place="top-right"><i aria-label="'+h("GANTRY5_PLATFORM_JS_LM_CONFIGURE_SETTINGS","Section")+'" class="fa fa-cog" data-lm-settings="'+t+'"></i></span></div></div>'+e+"</div>"},adopt:function(t){o(t).insert(this.block.find(".g-grid"))},renderInheritanceLabel:function(t){var e=h("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+t+"</strong>");return this.block&&this.getParent()&&(e=""),'<div class="g-inherit g-section-inherit"><div class="g-inherit-content" '+this.addInheritanceTip(!0)+'><i class="fa fa-lock"></i> '+e+"</div></div>"},enableInheritance:function(){if(this.hasInheritance()&&(this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.block.addClass("g-inheriting"),this.inherit.include.length&&this.block.addClass("g-inheriting-"+this.inherit.include.join(" g-inheriting-")),!this.block.find("> .g-inherit"))){var t=s("div"),e=d(this.inherit.outline),n=this.renderInheritanceLabel(e);t.html(n).children().after(this.block.find("> .section-header"))}},disableInheritance:function(){if(this.block.find("> .g-inherit")){var t=this.block.find("> .g-inherit.g-section-inherit");t&&t.remove()}this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.block.removeClass("g-inheriting")},refreshInheritance:function(){if(this.block.attribute("class",this.cleanKlass(this.block.attribute("class"))),this.hasInheritance()){this.enableInheritance();var t=this.block.find("> .g-inherit");if(t){var e=d(this.inherit.outline),n=s("div").html(this.renderInheritanceLabel(e));t&&n&&t.html(n.children().html())}}},addInheritanceTip:function(t){var e=this.getInheritanceTip();if(t){var n="";c(e,function(t,e){n+="data-"+e+'="'+t+'" '}),e=n}return this.hasInheritance()?e:""},getInheritanceTip:function(){var t=this.inherit?this.inherit.outline:null,e=d(t),n=(this.inherit.include||[]).join(", ");return{tip:h("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+e+"</strong>")+"<br />Outline ID: "+t+"<br />Replace: "+n,"tip-offset":-2,"tip-place":"top-right"}},cleanKlass:function(t){return t=(t||"").split(" "),t.filter(function(t){return!t.match(/^g-inheriting-/)}).join(" ")},hasChanged:function(t,e){var n=this.block.find("h4 > i:first-child");n&&e&&!e.changeState||(this.block[t?"addClass":"removeClass"]("block-has-changes"),!t&&n&&n.remove(),t&&!n&&s("i.fa.fa-circle-o.changes-indicator").top(this.block.find("h4")))},onDone:function(t){this.block.search("[data-lm-id]")||(this.grid.insert(this.block,"bottom"),this.options.builder.add(this.grid));var e=this.block.find(".fa-plus");e&&e.on("click",l(function(t){return t&&t.preventDefault(),!this.block.find(".g-grid:last-child:empty")&&(this.grid=new r,this.grid.insert(this.block.find('[data-lm-blocktype="container"]')?this.block.find('[data-lm-blocktype="container"]'):this.block,"bottom"),void this.options.builder.add(this.grid))},this)),this.refreshInheritance()},getParent:function(){var t=this.block.parent("[data-lm-id]");return t?this.options.builder.get(t.data("lm-id")):null},getLimits:function(t){if(!t)return!1;var e=t.block.nextSibling()||t.block.previousSibling()||!1;if(!e)return[100,100];var n=this.options.builder.get(e.data("lm-id"));if("block"!==n.getType())return!1;var i={current:this.getParent().getSize(),sibling:n.getSize()};return[5,i.current+i.sibling-5]}});e.exports=f},{"../../utils/get-ajax-url":69,"../../utils/get-outline":70,"../../utils/translate":76,"./base":11,"./grid":14,elements:111,"elements/insertion":112,"elements/zen":135,"mout/function/bind":190,"mout/object/forOwn":230,prime:299,"prime-util/prime/bound":295}],20:[function(t,e,n){"use strict";var i=t("prime"),a=t("./particle"),r=new i({inherits:a,options:{type:"spacer",title:"Spacer",attributes:{}}});e.exports=r},{"./particle":17,prime:299}],21:[function(t,e,n){"use strict";var i=t("prime"),a=t("./particle"),r=new i({inherits:a,options:{type:"system",attributes:{}}});e.exports=r},{"./particle":17,prime:299}],22:[function(t,e,n){"use strict";var i=t("prime"),a=t("./section"),r=t("../../utils/get-ajax-url").config,o=new i({inherits:a,options:{type:"wrapper",attributes:{name:"Wrapper"}},layout:function(){r(this.getPageId()+"/layout/"+this.getType()+"/"+this.getId());return'<div class="wrapper-section" data-lm-id="'+this.getId()+'" data-lm-blocktype="'+this.getType()+'" data-lm-blocksubtype="'+this.getSubType()+'"></div>'},hasChanged:function(){},getSize:function(){return!1},getId:function(){return this.id||(this.id=this.options.type)}});e.exports=o},{"../../utils/get-ajax-url":69,"./section":19,prime:299}],23:[function(t,e,n){"use strict";var i=t("prime"),a=t("elements"),r=t("prime/emitter"),o=t("./blocks/"),s=(t("mout/object/forOwn"),t("mout/collection/forEach")),l=t("mout/collection/size"),c=(t("mout/lang/isArray"),t("mout/array/flatten"),t("./id")),u=t("mout/object/set"),d=t("mout/object/unset"),h=t("mout/object/get"),p=t("mout/object/deepFillIn"),f=t("mout/object/omit");t("elements/attributes"),t("elements/traversal");var m=!1,g=t("mout/string/rpad"),v=t("mout/string/repeat");a.implement({empty:function(){return this.forEach(function(t){for(var e;e=t.firstChild;)t.removeChild(e)})}});var b=new i({inherits:r,constructor:function(t){return t&&this.setStructure(t),this.map={},this},setStructure:function(t){try{this.structure="object"==typeof t?t:JSON.parse(t)}catch(t){console.error("Parsing error:",t)}},add:function(t){var e="string"==typeof t?t:t.id;u(this.map,e,t),t.isNew(!1)},remove:function(t){t="string"==typeof t?t:t.id,d(this.map,t)},get:function(t){var e="string"==typeof t?t:t.id;return h(this.map,e,t)},load:function(t){return this.recursiveLoad(t),this.emit("loaded",t),this},serialize:function(t,e){var n=[];if(t=t||a("[data-lm-root]")){var i,r,o,l,c,u,d=t.search((e?"":"> ")+"[data-lm-id]");return s(d,function(t){if(t=a(t),i=t.data("lm-id"),r=t.data("lm-blocktype"),o=t.data("lm-blocksubtype")||!1,c=t.search("> [data-lm-id]"),u=e?!!c&&c.map(function(t){return a(t).data("lm-id")}):c?this.serialize(t):[],l={id:i,type:r,subtype:o,title:h(this.map,i)?h(this.map,i).getTitle():"Untitled",attributes:h(this.map,i)?h(this.map,i).getAttributes():{},inherit:h(this.map,i)?h(this.map,i).getInheritance():{},children:u},e){var s={};s[i]=l,l=s}n.push(l)},this),n}},insert:function(t,e,n){var i=a("[data-lm-root]");if(i){o[e.type]||console[console.error?"error":"log"](e.type+" does not exist");var r=new(o[e.type]||o.section)(p({id:t,attributes:{},inherit:{},subtype:e.subtype||!1,builder:this},f(e,"children")));return n?r.block.insert(a('[data-lm-id="'+n+'"]')):r.block.insert(i),"block"===r.getType()&&r.setSize(),this.add(r),r.emit("rendered",r,n?h(this.map,n):null),r}},reset:function(t){this.map={},this.setStructure(t||{}),a("[data-lm-root]").empty(),this.load()},cleanupLonely:function(){var t,e=[],n=a("[data-lm-root] > .g-section > .g-grid > .g-block .g-grid > .g-block, [data-lm-root] > .g-section > .g-grid > .g-block > .g-block");if(n){var i;return n.forEach(function(n){return n=a(n),t=null,i=n.parent().hasClass("g-grid"),(!i||!n.siblings())&&(i&&(e.push(n.data("lm-id")),t=n.parent()),e.push(n.data("lm-id")),n.children().before(t?t:n),void(t?t:n).remove())}),e}},recursiveLoad:function(t,e,n,i){t=t||this.structure,n=n||0,i=i||!1,e=e||this.insert,s(t,function(t){t.id||(t.id=c({builder:{map:this.map},type:t.type,subtype:t.subtype})),console&&console.log&&m&&console.log(g(v("    ",n)+""+t.type,35)+" ("+g(t.id,36)+") parent: "+i),this.emit("loading",e.call(this,t.id,t,i,n)),t.children&&l(t.children)&&(n++,s(t.children,function(i){this.recursiveLoad([i],e,n,t.id)},this)),this.get(t.id).emit("done",this.get(t.id)),n--},this)}});e.exports=b},{"./blocks/":15,"./id":26,elements:111,"elements/attributes":106,"elements/traversal":134,"mout/array/flatten":171,"mout/collection/forEach":187,"mout/collection/size":189,"mout/lang/isArray":201,"mout/object/deepFillIn":223,"mout/object/forOwn":230,"mout/object/get":231,"mout/object/omit":238,"mout/object/set":239,"mout/object/unset":242,"mout/string/repeat":264,"mout/string/rpad":267,prime:299,"prime/emitter":298}],24:[function(t,e,n){"use strict";var i=t("../ui/drag.events"),a=t("prime"),r=(t("prime/emitter"),t("prime-util/prime/bound")),o=t("prime-util/prime/options"),s=t("mout/function/bind"),l=t("mout/lang/isString"),c=t("mout/math/map"),u=t("mout/math/clamp"),d=t("mout/number/enforcePrecision"),h=t("mout/object/get"),p=t("../utils/elements.utils");t("elements/events"),t("elements/delegation");var f=new a({mixin:[r,o],DRAG_EVENTS:i,options:{minSize:5},constructor:function(t,e){this.setOptions(e),this.history=this.options.history||{},this.builder=this.options.builder||{},this.origin={x:0,y:0,transform:null,offset:{x:0,y:0}}},getBlock:function(t){return h(this.builder.map,l(t)?t:p(t).data("lm-id")||"")},getAttribute:function(t,e){return this.getBlock(t).getAttribute(e)},getSize:function(t){return this.getAttribute(p(t),"size")},start:function(t,e,n,i){if(t&&t.type.match(/^touch/i)&&t.preventDefault(),window.G5.tips.hide(e[0]),t.which&&1!==t.which)return!0;t.preventDefault(),this.element=p(e),this.siblings={occupied:0,elements:n,next:this.element.nextSibling(),prevs:this.element.previousSiblings(),sizeBefore:0},this.siblings.elements.length>1&&(this.siblings.occupied-=this.getSize(this.siblings.next),this.siblings.elements.forEach(function(t){this.siblings.occupied+=this.getSize(t)},this)),this.siblings.prevs&&this.siblings.prevs.forEach(function(t){this.siblings.sizeBefore+=this.getSize(t)},this),this.origin={size:this.getSize(this.element),maxSize:this.getSize(this.element)+this.getSize(this.siblings.next),x:t.changedTouches?t.changedTouches[0].pageX:t.pageX+6,y:t.changedTouches?t.changedTouches[0].pageY:t.pageY};var a=this.element[0].getBoundingClientRect(),r=this.element.parent()[0].getBoundingClientRect();this.origin.offset={clientRect:a,parentRect:{left:r.left,right:r.right},x:this.origin.x-a.right,y:a.top-this.origin.y,down:i},this.origin.offset.parentRect.left=this.element.parent().find("> [data-lm-id]:first-child")[0].getBoundingClientRect().left,this.origin.offset.parentRect.right=this.element.parent().find("> [data-lm-id]:last-child")[0].getBoundingClientRect().right,this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){p(document).on(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){p(document).on(t,this.bound("stop"))},this))},move:function(t){t&&t.type.match(/^touch/i)&&t.preventDefault();var e=t.clientX||t.touches[0].clientX||0,n=t.clientY||t.touches[0].clientY||0,i=this.origin.offset.parentRect,a=(this.lastX||e)-e,r=(this.lastY||n)-n;this.direction=Math.abs(a)>Math.abs(r)&&a>0&&"left"||Math.abs(a)>Math.abs(r)&&a<0&&"right"||Math.abs(r)>Math.abs(a)&&r>0&&"up"||"down";var o,s=100-this.siblings.occupied,l=e+(this.siblings.prevs?this.siblings.prevs.length:this.origin.offset.x-this.origin.offset.down),h=u(l,i.left,i.right);o=c(h,i.left,i.right,0,100),o-=this.siblings.sizeBefore,o=d(u(o,this.options.minSize,this.origin.maxSize-this.options.minSize),0),s=d(s-o,0),this.getBlock(this.element).setSize(o,!0),this.getBlock(this.siblings.next).setSize(s,!0);var f=this.element.siblings(),m=f?f.length+1:1;if(3==m||6==m||7==m||8==m||9==m||11==m||12==m){var g,v=0;g=p([f,this.element]),g.forEach(function(t,e){t=this.getBlock(t),o=t.getSize(),o%1&&(o=d(100/m,0),t.setSize(o,!0)),v+=o,g.length==e+1&&100!=v&&(s=100-v,t.setSize(o+s,!0))},this)}this.lastX=e,this.lastY=n},stop:function(t){t&&t.type.match(/^touch/i)&&t.preventDefault(),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){p(document).off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){p(document).off(t,this.bound("stop"))},this)),t.target.matches("[data-lm-back], [data-lm-forward]")||this.origin.size!==this.getSize(this.element)&&this.history.push(this.builder.serialize(),this.history.get().preset)},evenResize:function(t,e){var n,i=t.length,a=d(100/i,4);"undefined"==typeof e&&(e=!0),t.forEach(function(t){t=p(t),n=this.getBlock(t),n&&n.hasAttribute("size")&&"function"==typeof n.getSize?n[e?"setAnimatedSize":"setSize"](a,a!==n.getSize()):t&&t[e?"animate":"style"]({flex:"0 1 "+a+"%"})},this)}});e.exports=f},{"../ui/drag.events":51,"../utils/elements.utils":64,"elements/delegation":108,"elements/events":110,"mout/function/bind":190,"mout/lang/isString":209,"mout/math/clamp":214,"mout/math/map":216,"mout/number/enforcePrecision":220,"mout/object/get":231,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298}],25:[function(t,e,n){var i=t("prime"),a=t("prime/emitter"),r=t("mout/array/slice"),o=t("mout/object/merge"),s=t("mout/lang/deepEquals"),l=t("deep-diff").diff,c=new i({inherits:a,constructor:function(t,e){this.index=0,t=o({},t),e=o({},e),this.setSession(t,e)},undo:function(){if(this.index){this.index--;var t=this.get();return this.emit("undo",t,this.index),t}},redo:function(){if(this.index!=this.session.length-1){this.index++;var t=this.get();return this.emit("redo",t,this.index),t}},reset:function(){this.index=0;var t=this.get();return this.emit("reset",t,this.index),t},push:function(t,e){t=o({},t),e=o({},e);var n=this.index<this.session.length-1;return this.index<this.session.length-1&&(this.session=r(this.session,0,-(this.session.length-1-this.index))),t={time:+new Date,data:t,preset:e},this.equals(t.data)?t:(this.session.push(t),this.index=this.session.length-1,this.emit("push",t,this.index,n),t)},get:function(t){return this.session["undefined"!=typeof t?t:this.index]||!1},equals:function(t,e){return e||(e=this.get().data),s(t,e)},diff:function(t,e){return!t&&!e&&this.session.length<=1?"Not enough sessions to diff":(e||(e=this.get()),t||(t=this.get(this.index-1)),l(t,e))},setSession:function(t,e){return t=t?[{time:+new Date,data:o({},t),preset:e}]:[],this.session=t,this.index=0,this.session},import:function(){},export:function(){}});e.exports=c},{"deep-diff":104,"mout/array/slice":181,"mout/lang/deepEquals":199,"mout/object/merge":235,prime:299,"prime/emitter":298}],26:[function(t,e,n){"use strict";var i=t("mout/object/keys"),a=t("mout/array/contains"),r=t("mout/random/randInt"),o=function(t){var e,n,o=t.builder?i(t.builder.map):{},s=t.type,l=t.subtype,c=[];for("particle"!=s&&c.push(s),l&&c.push(l),e=c.join("-");(n=r(1e3,9999))&&a(o,e+"-"+n););return e+"-"+n};e.exports=o},{"mout/array/contains":164,"mout/object/keys":234,"mout/random/randInt":252}],27:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("elements/attributes"),r=t("../fields/submit"),o=t("../ui").modal,s=t("../ui").toastr,l=(t("./particles-sidebar"),t("agent")),c=t("elements/zen"),u=t("mout/array/contains"),d=t("mout/collection/size"),h=t("mout/string/trim"),p=t("mout/string/replace"),f=t("mout/string/properCase"),m=t("mout/number/enforcePrecision"),g=t("../utils/get-ajax-suffix"),v=t("../utils/get-ajax-url").parse,b=(t("../utils/get-ajax-url").global,t("../utils/flags-state")),y=t("./builder"),w=(t("../utils/history"),t("../utils/field-validation"),t("./history")),x=t("./layoutmanager"),k=t("../utils/save-state"),S=t("../utils/translate");t("../ui/popover"),t("./inheritance");var C,T,E,O;C=new y,E=new w,O=new k,i(function(){var t=a("body");t.delegate("click","[data-lm-back]",function(t,e){return t&&t.preventDefault(),!a(e).hasClass("disabled")&&void E.undo()}),t.delegate("click","[data-lm-forward]",function(t,e){return t&&t.preventDefault(),!a(e).hasClass("disabled")&&void E.redo()}),E.on("push",function(t,e,n){var i={back:a("[data-lm-back]"),forward:a("[data-lm-forward]")};e&&i.back&&i.back.hasClass("disabled")&&i.back.removeClass("disabled"),n&&i.forward&&!i.forward.hasClass("disabled")&&i.forward.addClass("disabled"),T.updatePendingChanges()}),E.on("undo",function(t,e){var n=a("#lm-no-layout"),i=a(".layout-title .title small"),r=t.preset.name||"Default",o={back:a("[data-lm-back]"),forward:a("[data-lm-forward]")};n&&n.style({display:d(t.data)?"none":"block"}),i&&i.text("("+f(h(p(r,[/_/g,/\//g],[" "," / "])))+")"),C.reset(t.data),o.forward.removeClass("disabled"),e||o.back.addClass("disabled"),T.singles("disable"),T.updatePendingChanges()}),E.on("redo",function(t,e){var n=a("#lm-no-layout"),i=a(".layout-title .title small"),r=t.preset.name||"Default",o={back:a("[data-lm-back]"),forward:a("[data-lm-forward]")};n&&n.style({display:d(t.data)?"none":"block"}),i&&i.text("("+f(h(p(r,[/_/g,/\//g],[" "," / "])))+")"),C.reset(t.data),o.back.removeClass("disabled"),e==this.session.length-1&&o.forward.addClass("disabled"),T.singles("disable"),T.updatePendingChanges()})}),i(function(){var t,n=a("body"),i=a("[data-lm-root]");T=new x("[data-lm-container]",{delegate:'[data-lm-root] .g-grid > .g-block > [data-lm-blocktype]:not([data-lm-nodrag]) !> .g-block, .g5-lm-particles-picker [data-lm-blocktype], [data-lm-root] [data-lm-blocktype="section"] > [data-lm-blocktype="grid"]:not(:empty):not(.no-move):not([data-lm-nodrag]), [data-lm-root] [data-lm-blocktype="section"] > [data-lm-blocktype="container"] > [data-lm-blocktype="grid"]:not(:empty):not(.no-move):not([data-lm-nodrag]), [data-lm-root] [data-lm-blocktype="offcanvas"] > [data-lm-blocktype="grid"]:not(:empty):not(.no-move):not([data-lm-nodrag]), [data-lm-root] [data-lm-blocktype="offcanvas"] > [data-lm-blocktype="container"] > [data-lm-blocktype="grid"]:not(:empty):not(.no-move):not([data-lm-nodrag])',droppables:"[data-lm-dropzone]",exclude:".section-header .button, .section-header .fa, .lm-newblocks .float-right .button, [data-lm-nodrag], [data-lm-disabled]",resize_handles:"[data-lm-root] .g-grid > .g-block:not(:last-child)",builder:C,history:E,savestate:O}),e.exports.layoutmanager=T,i&&(t=JSON.parse(i.data("lm-root")),t.name&&(t=t.layout),C.setStructure(t),C.load(),T.history.setSession(C.serialize(),JSON.parse(i.data("lm-preset"))),T.savestate.setSession(C.serialize(null,!0))),n.delegate("click",".g-tabs a",function(t,e){return t.preventDefault(),!1}),n.delegate("keydown",".g-tabs a",function(t,e){var i=t.which?t.which:t.keyCode;if(32==i||13==i)return t.preventDefault(),n.emit("mouseup",t),!1}),n.delegate("mouseup",".g-tabs a",function(t,e){e=a(e),t.preventDefault();var n=0,i=e.parent(".g-tabs"),r=i.siblings(".g-panes"),o=i.search("a");o.forEach(function(t,i){t==e[0]&&(n=i+1)}),r.find("> .active").removeClass("active"),i.find("> ul > .active").removeClass("active"),r.find("> .g-pane:nth-child("+n+")").addClass("active"),i.find("> ul > li:nth-child("+n+")").addClass("active"),r.search("> [aria-expanded]")&&r.search("> [aria-expanded]").attribute("aria-expanded","false"),i.search("> [aria-expanded]")&&i.search("> [aria-expanded]").attribute("aria-expanded","false"),r.find("> .g-pane:nth-child("+n+")").attribute("aria-expanded","true"),i.find("> ul >li:nth-child("+n+") [aria-expanded]")&&i.find("> ul > li:nth-child("+n+") > [aria-expanded]").attribute("aria-expanded","true")}),n.delegate("statechangeBefore","[data-g5-lm-picker]",function(){o.close()}),n.on("statechangeAfter",function(e,n){return!(i=a("[data-lm-root]"))||(t=JSON.parse(i.data("lm-root")),C.setStructure(t),C.load(),T.refresh(),T.history.setSession(C.serialize(),JSON.parse(i.data("lm-preset"))),T.savestate.setSession(C.serialize(null,!0)),T.eraser.element=a("[data-lm-eraseblock]"),void T.eraser.hide(!0))}),n.delegate("input",".sidebar-block .search input",function(t,e){var n,i,r=a(e).value().toLowerCase(),o=a(".sidebar-block [data-lm-blocktype]");return!!o&&void o.style({display:"none"}).forEach(function(t){t=a(t),i=t.data("lm-blocktype").toLowerCase(),n=h(t.text()).toLowerCase(),(i.substr(0,r.length)==r||n.match(r))&&t.style({display:"block"})},this)}),["click","touchend"].forEach(function(t){n.delegate(t,"[data-lm-samewidth]:not(:empty)",function(t,e){window.G5.tips.hide(e[0]);var n=e[0].getBoundingClientRect();if(!((t.clientX||t.pageX||t.changedTouches[0].pageX||0)<n.width+n.left)){var i,r=e.search('> [data-lm-blocktype="block"]');r&&1!=r.length&&(r.forEach(function(t){i=a(t).data("lm-id"),C.get(i).setSize(100/r.length,!0)}),E.push(C.serialize(),E.get().preset))}})}),n.delegate("mouseover","[data-lm-samewidth]:not(:empty)",function(t,e){var n=e[0].getBoundingClientRect(),i=t.clientX||t.touches&&t.touches[0].clientX||0,a={equalize:i+5>n.width+n.left,move:i-5<n.left};if(a.equalize||a.move){var r=S(a.equalize?"GANTRY5_PLATFORM_JS_LM_GRID_EQUALIZE":"GANTRY5_PLATFORM_JS_LM_GRID_SORT_MOVE");e.data("tip",r).data("tip-offset",-30),window.G5.tips.get(e[0]).content(r).place(a.equalize?"top-left":"top-right").show()}}),n.delegate("mouseout","[data-lm-samewidth]:not(:empty)",function(t,e){window.G5.tips.hide(e[0])}),n.delegate("click","[data-lm-clear]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.data("lm-clear"),i={};switch(n){case"keep-inheritance":i={save:!0,dropLastGrid:!1,emptyInherits:!1};break;case"full":default:i={save:!0,dropLastGrid:!1,emptyInherits:!0}}T.clear(null,i)});var p=!1;n.delegate("mouseover","[data-lm-switcher]",function(t,e){t&&t.preventDefault&&t.preventDefault(),p=e,e.PopoverDefined||e.getPopover({type:"async",width:"500",url:v(e.data("lm-switcher")+g()),allowElementsClick:".g-tabs a"})}),n.delegate("keydown","[data-switch]",function(t,e){var i=t.which?t.which:t.keyCode;32!=i&&13!=i||(t.preventDefault(),n.emit("mousedown",t))}),n.delegate("change",'[data-g-inherit="outline"]',function(t,e){var n=e.parent(".g-pane").find('input[type="checkbox"][data-g-preserve="outline"]');n&&n.checked(!1)}),n.delegate("change",'[data-g-preserve="outline"]',function(t,e){var n=e.parent(".g-pane").find('input[type="checkbox"][data-g-inherit="outline"]');n&&n.checked(!1)}),n.delegate("mousedown","[data-switch]",function(t,e){if(t&&t.preventDefault&&t.preventDefault(),e.parent(".g5-popover-content").find("[data-switch] i"))return!1;e.showIndicator();var r=a("[data-lm-preset]"),s=e.parent(".g-pane").find('input[type="checkbox"][data-g-preserve]'),c=e.parent(".g-pane").find('input[type="checkbox"][data-g-inherit]'),u=s?"post":"get",d={};if(s=s&&s.checked(),c=c&&c.checked(),s){var h=T;h.singles("cleanup",h.builder,!0),h.savestate.setSession(h.builder.serialize(null,!0)),d.preset=r&&r.data("lm-preset")?r.data("lm-preset"):"default",d.layout=JSON.stringify(h.builder.serialize())}c&&(d.inherit=1);var f=v(e.data("switch")+g());l(u,f,d,function(t,r){if(e.hideIndicator(),!r.body.success)return void o.open({content:r.body.html||r.body,afterOpen:function(t){r.body.html||t.style({width:"90%"})}});if(r.body.message&&!b.get("lm:switcher:"+window.btoa(f),!1))return b.warning({message:r.body.message,callback:function(t,i){var r=i.find("[data-g-delete-confirm]"),s=i.find("[data-g-delete-cancel]");r&&(r.on("click",function(t){return t.preventDefault(),!this.attribute("disabled")&&(b.get("lm:switcher:"+window.btoa(f),!0),a([r,s]).attribute("disabled"),n.emit("mousedown",{target:e}),void o.close())}),s.on("click",function(t){return t.preventDefault(),!this.attribute("disabled")&&(a([r,s]).attribute("disabled"),b.get("lm:switcher:"+window.btoa(f),!1),o.close(),void(p&&setTimeout(function(){p.getPopover().show()},5)))}))}}),!1;var s=r.body.preset||{name:"default"},l=r.body.title||"Default",c=r.body.data,u=a("#lm-no-layout"),d=a(".layout-title .title small");i.data("lm-root",JSON.stringify(c)).empty(),i.data("lm-preset",s),u&&u.style({display:"none"}),d&&d.text("("+l+")"),C.setStructure(c),C.load(),E.push(C.serialize(),JSON.parse(s)),a("[data-lm-switcher]").getPopover().hideAll().destroy();
})}),n.delegate("click","[data-lm-settings]",function(t,e){e=a(e);var i,h,p=e.data("lm-blocktype"),f=e.data("lm-settings"),b=null;if("grid"===p){var y=t.clientX||t.touches&&t.touches[0].clientX||0,w=e[0].getBoundingClientRect();if(y+4-w.left<w.width)return!1}e=e.parent("[data-lm-blocktype]"),i=e.parent("[data-lm-blocktype]"),h=e.parent('[data-lm-blocktype="section"]'),p=e.data("lm-blocktype");var x=e.data("lm-id"),k=!!i&&i.data("lm-id"),O=!!i&&i.data("lm-blocktype");u(["block","grid"],p)||(b={},b.id=C.get(e.data("lm-id")).getId()||null,b.type=C.get(e.data("lm-id")).getType()||e.data("lm-blocktype")||!1,b.subtype=C.get(e.data("lm-id")).getSubType()||e.data("lm-blocksubtype")||!1,b.title=(e.find("h4")||e.find(".title")).text()||b.type||"Untitled",b.options=C.get(e.data("lm-id")).getAttributes()||{},b.inherit=C.get(e.data("lm-id")).getInheritance()||{},b.block=i&&"wrapper"!==O?C.get(i.data("lm-id")).getAttributes()||{}:{},b.size_limits=C.get(e.data("lm-id")).getLimits(!!i&&C.get(i.data("lm-id"))),b.parent=h?h.data("lm-id"):null,b.type||delete b.type,b.subtype||delete b.subtype,d(b.options)||delete b.options,d(b.inherit)||delete b.inherit,d(b.block)||delete b.block),o.open({content:"Loading",method:"post",data:b,overlayClickToClose:!1,remote:v(f+g()),remoteLoaded:function(t,e){if(!t.body.success)return void o.enableCloseByOverlay();var i=e.elements.content.find("form"),u=c("div").html(t.body.html).find("form"),h=e.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]');if(!i&&!u||!h)return!0;var p=e.elements.content.find(".g-urltemplate");p&&n.emit("input",{target:p});var f=e.elements.content.find('[name="block[size]"]');if(f&&b.size_limits){var y=e.elements.content.find(".blocksize-note"),w=m(b.size_limits[0],1),O=m(b.size_limits[1],1);if(f.attribute("min",w),f.attribute("max",O),y){var I=y.html();I=I.replace(/#min#/g,w),I=I.replace(/#max#/g,O),y.html(I),y.find(".blocksize-"+(w==O?"range":"fixed")).addClass("hidden")}var _=function(){return parseFloat(f.value())>=w&&parseFloat(f.value())<=O?"":S("GANTRY5_PLATFORM_JS_LM_SIZE_LIMITS_RANGE")};f.on("input",function(){f[0].setCustomValidity(_())})}h.on("click",function(t){t.preventDefault();var i=a(t.currentTarget);i.disabled(!0),i.hideIndicator(),i.showIndicator();var c=e.elements.content.find("form")[0].elements,h=r(c,e.elements.content);return h.invalid.length?(i.disabled(!1),i.hideIndicator(),i.showIndicator("fa fa-fw fa-exclamation-triangle"),void s.error(S("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),S("GANTRY5_PLATFORM_JS_INVALID_FIELDS"))):void l(u.attribute("method"),v(u.attribute("action")+g()),h.valid.join("&")||{},function(t,e){if(e.body.success){var r=C.get(x),l=null;if(r.setAttributes(e.body.data.options),r.hasAttribute("enabled")&&r[r.getAttribute("enabled")?"enable":"disable"](),"section"!=r.getType()&&(r.setTitle(e.body.data.title||"Untitled"),r.updateTitle(r.getTitle())),"position"==r.getType()&&r.updateKey(),e.body.data.block&&d(e.body.data.block)){l=C.get(k);var c,u=l.block.nextSibling()||l.block.previousSibling(),h=l.getSize();l.setAttributes(e.body.data.block),c=h-l.getSize(),l.setAnimatedSize(l.getSize()),u&&(u=C.get(u.data("lm-id")),u.setAnimatedSize(parseFloat(u.getSize())+c,!0))}if(e.body.data.inherit&&(delete e.body.data.inherit.section,r.setInheritance(e.body.data.inherit),r.enableInheritance(),r.refreshInheritance()),e.body.data.children&&(T.clear(r.block,{save:!1,dropLastGrid:!!e.body.data.children.length,emptyInherits:!0}),C.recursiveLoad(e.body.data.children,C.insert,0,r.getId())),r.hasInheritance()&&!e.body.data.inherit&&(r.setInheritance({}),r.disableInheritance()),E.push(C.serialize(),E.get().preset),null!==i.data("apply-and-save")){var p=a("body").find(".button-save");p&&n.emit("click",{target:p})}o.close(),s.success(S("GANTRY5_PLATFORM_JS_PARTICLE_SETTINGS_APPLIED",r.getTitle()),S("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else o.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});i.hideIndicator()})})}})})}),e.exports={$:a,builder:C,layoutmanager:T,history:E,savestate:O}},{"../fields/submit":8,"../ui":53,"../ui/popover":55,"../utils/field-validation":66,"../utils/flags-state":67,"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,"../utils/history":73,"../utils/save-state":75,"../utils/translate":76,"./builder":23,"./history":25,"./inheritance":28,"./layoutmanager":29,"./particles-sidebar":30,agent:78,"elements/attributes":106,"elements/domready":109,"elements/zen":135,"mout/array/contains":164,"mout/collection/size":189,"mout/number/enforcePrecision":220,"mout/string/properCase":262,"mout/string/replace":265,"mout/string/trim":270}],28:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/domready"),r=t("agent"),o=t("../../ui").modal,s=t("mout/lang/isArray"),l=t("mout/collection/forEach"),c=t("mout/object/filter"),u=t("mout/object/keys"),d=t("mout/collection/contains"),h=t("../../utils/get-ajax-suffix"),p=t("../../utils/get-ajax-url").parse,f=t("../../utils/get-ajax-url").global,m=(t("../../utils/get-outline").getOutlineNameById,t("../../utils/get-outline").getCurrentOutline),g={attributes:["g-settings-particle","g-settings-atom"],block:{panel:"g-settings-block-attributes",tab:"g-settings-block"},particles:"g-inherit-particle",atoms:"g-inherit-atom"};a(function(){var t=i("body"),e={},n={};t.delegate("change",'[name="inherit[outline]"]',function(a,c){var u=c.parent(".settings-param").find(".settings-param-title"),v=c.siblings().find(".g-item"),b=c.value(),y=i('[name="inherit[section]"]')?i('[name="inherit[section]"]').value():"",w=c.parent("[data-g-inheritance-settings]"),x=i('[data-multicheckbox-field="inherit[include]"]:checked')||[],k={list:i("#g-inherit-particle, #g-inherit-atom"),mode:i('[name="inherit[mode]"]:checked'),radios:i('[name="inherit[particle]"], [name="inherit[atom]"]'),checked:i('[name="inherit[particle]"]:checked, [name="inherit[atom]"]:checked')};if(!v)return!0;var S=e[y]!==b||n[y]!==k.mode.value();S&&!b&&x.forEach(function(e){i(e).checked(!1),t.emit("change",{target:e})});var C=JSON.parse(w.data("g-inheritance-settings")),T={outline:b||m(),type:C.type||"",subtype:C.subtype||"",mode:k.mode.value(),inherit:b&&"inherit"===k.mode.value()?"1":"0"};T.id=C.id,u.showIndicator(),c.selectizeInstance.blur(),k.radios&&k.checked&&(S||(T.selected=k.checked.value(),T.id=k.checked.value(),k.list=!1));var E="atom"===T.type?"atoms":"layouts",O=k.list?E+"/list":E;r("POST",p(f(O)+h()),T,function(a,r){if(u.hideIndicator(),!r.body.success)return void o.open({content:r.body.html||r.body,afterOpen:function(t){r.body.html||t.style({width:"90%"})}});var c,h=r.body,p=w.find('[name="inherit[include]"]').value().split(","),f=w.search('[data-multicheckbox-field="inherit[include]"]').map(function(t){return i(t).value()}),m=o.getByID(o.getLast());l(g,function(t,e){t=t.panel||t,t=s(t)?t:[t],t.forEach(function(t){var n=d(p,e),i=d(f,e);if((n||!i)&&h.html[t]&&(c=m.find("#"+t))){c.html(h.html[t]);var a=c.search("[data-selectize]");a&&a.selectize()}})}),S&&x&&""===e[y]&&x.forEach(function(e){t.emit("change",{target:e})}),e[y]=b,n[y]=k.mode.value()})}),t.delegate("change","#g-settings-inheritance [data-multicheckbox-field]",function(e,n){var a=i('[name="inherit[outline]"]');if(!a)return!0;a=a.value();var r=n.value(),o=n.checked(),l=e.noRefresh,c={mode:i('[name="inherit[mode]"]:checked'),radios:i('[name="inherit[particle]"], [name="inherit[atom]"]'),checked:i('[name="inherit[particle]"]:checked, [name="inherit[atom]"]:checked')},u={panel:g[r]&&g[r].panel||g[r],tab:g[r]&&g[r].tab||g[r]};s(u.panel)||(u.panel=[u.panel],u.tab=[u.tab]),u.panel.forEach(function(e,r){var s=i("#"+e),d=i("#"+u.tab[r]+"-tab");if(!s||!d)return!0;var h=s.find(".g-inherit"),p="clone"===c.mode.value(),f=function(e){e||t.emit("change",{target:n.parent(".settings-block").find('[name="inherit[outline]"]')})};if(o&&a&&!p){var m=d.find(".fa-unlock");m&&m.removeClass("fa-unlock").addClass("fa-lock"),h&&h.show(),f(l)}else{var g=d.find(".fa-lock");g&&g.removeClass("fa-lock").addClass("fa-unlock"),h&&h.hide(),p&&f(l)}})}),t.delegate("change",'[name="inherit[mode]"], [name="inherit[particle]"], [name="inherit[atom]"]',function(e,n){var i=o.getByID(o.getLast()),a=i.find('[name="inherit[outline]"]'),r=i.search("[data-multicheckbox-field]")||[],s=!1;"inherit[mode]"===n.attribute("name")&&(s=!0),t.emit("change",{target:a,noRefresh:s}),r.forEach(function(e){t.emit("change",{target:e,noRefresh:s})})}),t.delegate("click","#g-inherit-particle .fa-info-circle, #g-inherit-atom .fa-info-circle",function(t,e){t.preventDefault();var n=o.getByID(o.getLast()),i=n.find('[name="inherit[outline]"]'),a=e.siblings('input[name="inherit[particle]"], input[name="inherit[atom]"]');if(!a||!i)return!1;var r="inherit[atom]"===a.name()?"atoms/instance":"layouts/particle";return o.open({content:"Loading",method:"post",data:{id:a.value(),outline:i.value()||m()},remote:p(f(r)+h()),remoteLoaded:function(t,e){if(!t.body.success)return void o.enableCloseByOverlay()}}),!1}),t.delegate("mouseup",".g-tabs .fa-lock, .g-tabs .fa-unlock",function(e,n){if(!n.parent("li").hasClass("active"))return!1;var a=o.getByID(o.getLast()),r=n.hasClass("fa-lock"),s=n.parent("a").id().replace(/\-tab$/,""),l=u(c(g,function(t){return t===s||t.tab===s||d(t,s)})||[]).shift(),h=a.find('[data-multicheckbox-field][value="'+l+'"]'),p={mode:i('[name="inherit[mode]"]:checked'),radios:i('[name="inherit[particle]"], [name="inherit[atom]"]'),checked:i('[name="inherit[particle]"]:checked, [name="inherit[atom]"]:checked')};if(h){if("clone"===p.mode.value()||p.radios&&!p.checked)return!1;h.checked(!r),t.emit("change",{target:h})}})})},{"../../ui":53,"../../utils/get-ajax-suffix":68,"../../utils/get-ajax-url":69,"../../utils/get-outline":70,agent:78,elements:111,"elements/domready":109,"mout/collection/contains":185,"mout/collection/forEach":187,"mout/lang/isArray":201,"mout/object/filter":227,"mout/object/keys":234}],29:[function(t,e,n){"use strict";var i=t("prime"),a=t("../utils/elements.utils"),r=t("mout/function/bind"),o=t("elements/zen"),s=t("prime/emitter"),l=t("prime-util/prime/bound"),c=t("prime-util/prime/options"),u=t("./blocks"),d=t("../ui/drag.drop"),h=t("../ui/eraser"),p=t("../utils/flags-state"),f=t("./drag.resizer"),m=t("mout/object/get"),g=t("mout/object/keys"),v=(t("mout/array/every"),t("mout/number/enforcePrecision")),b=(t("mout/lang/isArray"),t("mout/lang/deepEquals")),y=t("mout/collection/find"),w=(t("mout/lang/isObject"),t("mout/array/contains")),x=t("mout/collection/forEach"),k={disable:function(){var t=a('[data-lm-root] [data-lm-blocktype="grid"]');t&&t.removeClass("no-hover")},enable:function(){var t=a('[data-lm-root] [data-lm-blocktype="grid"]');t&&t.addClass("no-hover")},cleanup:function(t,e,n){var i=n?n.search("> .g-grid:empty"):a('[data-lm-blocktype="section"] > .g-grid:empty, [data-lm-blocktype="container"] > .g-grid:empty, [data-lm-blocktype="offcanvas"] > .g-grid:empty');i&&i.forEach(function(n){n=a(n),(n.nextSibling("[data-lm-id]")||e)&&(t.remove(n.data("lm-id")),n.remove())})}},S=new i({mixin:[l,c],inherits:s,options:{},constructor:function(t,e){this.setOptions(e),this.refElement=t,t&&a(t)&&this.init(t)},init:function(){this.dragdrop=new d(this.refElement,this.options),this.resizer=new f(this.refElement,this.options),this.eraser=new h("[data-lm-eraseblock]",this.options),this.dragdrop.on("dragdrop:start",this.bound("start")).on("dragdrop:location",this.bound("location")).on("dragdrop:nolocation",this.bound("nolocation")).on("dragdrop:resize",this.bound("resize")).on("dragdrop:stop:erase",this.bound("removeElement")).on("dragdrop:stop",this.bound("stop")).on("dragdrop:stop:animation",this.bound("stopAnimation")),this.builder=this.options.builder,this.history=this.options.history,this.savestate=this.options.savestate||null,k.disable()},refresh:function(){this.refElement&&a(this.refElement)&&this.init()},singles:function(t,e,n,i){k[t](e,n,i)},clear:function(t,e){var n,i,r=t?(t.search("[data-lm-id]")||[]).map(function(t){return a(t).data("lm-id")}):[];e=e||{save:!0,dropLastGrid:!1,emptyInherits:!1},x(this.builder.map,function(t,a){r.length&&!w(r,a)||!e.emptyInherits&&t.block.parent(".g-inheriting")||(n=t.getType(),i=t.block.find("> [data-lm-id]"),i&&(i=i.data("lm-blocktype")),w(["particle","spacer","position","widget","system","block"],n)&&"block"==n&&i&&"section"!==i&&"container"!==i?(this.builder.remove(a),t.block.remove()):!e.emptyInherits||"section"!=n&&"offcanvas"!=n&&"container"!=n||t.hasInheritance&&(t.inherit={},t.disableInheritance()))},this),this.singles("cleanup",this.builder,e.dropLastGrid,t),e.save&&this.history.push(this.builder.serialize(),this.history.get().preset)},updatePendingChanges:function(){var t=this.savestate.getData(),e=this.builder.serialize(null,!0),n=!1,i=b(t,e),r=a('[data-save="Layout"]'),o=(r.find("i"),r.find(".changes-indicator"));i&&o&&r.hideIndicator(),i||o||r.showIndicator("changes-indicator fa fa-fw fa-circle-o"),p.set("pending",!i);var s,l,c;e.forEach(function(i){c=g(i)[0],s=y(t,function(t){return t[c]}),l=y(e,function(t){return t[c]}),n=!b(s,l),c=this.builder.get(c),c&&c.emit("changed",n)},this)},start:function(t,e){var n=a("[data-lm-root]"),i=a(e).position(),r=a(e)[0].getBoundingClientRect();this.block=null,this.mode=n.data("lm-root")||"page",n.addClass("moving");var s=a(e).data("lm-blocktype"),l=e[0].cloneNode(!0);if(this.placeholder||(this.placeholder=o("div.block.placeholder[data-lm-placeholder]")),this.placeholder.style({display:"none"}),l=a(l),this.original=l.after(e).style({display:l.hasClass("g-grid")?"flex":"block",opacity:.5}).addClass("original-placeholder").data("lm-dropzone",null),"grid"===s&&this.original.style({display:"flex"}),this.originalType=s,this.block=m(this.builder.map,e.data("lm-id")||"")||new u[s]({builder:this.builder,subtype:e.data("lm-subtype"),title:e.text()}),this.block.isNew()){var c=e.position();this.original.style({position:"fixed",opacity:.5}).style({left:r.left,top:r.top,width:c.width,height:c.height}),this.element=this.dragdrop.element,this.dragdrop.element=this.original}else{if(e.style({position:"fixed",zIndex:2500,opacity:.5,margin:0,width:Math.ceil(i.width),height:Math.ceil(i.height),left:r.left,top:r.top}).find("[data-lm-blocktype]"),"grid"===this.block.getType()){var d=this.block.block.siblings(":not(.original-placeholder):not(.section-header):not(.g-inherit):not(:empty)");d&&d.search("[data-lm-id]").style({"pointer-events":"none"})}this.placeholder.before(e),this.eraser.show()}var h;"grid"===s&&(h=n.search('[data-lm-dropzone]:not([data-lm-blocktype="grid"])'))&&h.style({"pointer-events":"none"}),k.enable()},location:function(t,e,n){n=a(n),(this.block.isNew()?this.element:this.original).style({transform:"translate(0, 0)"}),this.placeholder||(this.placeholder=o("div.block.placeholder[data-lm-placeholder]").style({display:"none"}));var i,r=n.data("lm-blocktype"),s=this.block.getType();if(!r&&n.data("lm-root")&&(r="root"),!("page"!==this.mode&&"section"===r||"grid"===r&&(n.parent().data("lm-root")||"container"===n.parent().data("lm-blocktype")&&n.parent().parent().data("lm-root")))){var l=':not(.placeholder):not([data-lm-id="'+this.original.data("lm-id")+'"])',c={before:this.original.previousSiblings(l),after:this.original.nextSiblings(l)};if(c.before&&(c.before=a(c.before[0])),c.after&&(c.after=a(c.after[0])),!("block"===r&&(c.before===n&&"after"===e.x||c.after===n&&"before"===e.x)||"grid"===r&&(c.before===n&&"below"===e.y||c.after===n&&"above"===e.y))){var u=n.parent('[data-lm-blocktype="atoms"]'),d=this.block.block.find("[data-lm-id]");if("atom"==(d?d.data("lm-blocktype"):s)){if(!u)return}else if(u)return;var h;switch(r){case"root":case"section":break;case"grid":var p=!n.children(":not(.placeholder)");if("grid"!==s&&!p)return;p?"grid"===s?this.placeholder.before(n):this.placeholder.bottom(n):(h="above"===e.y?"before":"after",this.placeholder[h](n));break;case"block":h="above"===e.y?"top":"bottom",i="other"===e.x?h:e.x,this.placeholder[i](n)}if(this.placeholder.removeClass("in-between").removeClass("in-between-grids").removeClass("in-between-grids-first").removeClass("in-between-grids-last"),this.placeholder.style({display:"block"})["block"!==r?"removeClass":"addClass"]("in-between"),"grid"===s&&"grid"===r){var f=this.placeholder.nextSibling(),m=this.placeholder.previousSibling();this.placeholder.addClass("in-between-grids"),m&&!m.data("lm-blocktype")&&this.placeholder.addClass("in-between-grids-first"),f&&f.data("lm-blocktype")||this.placeholder.addClass("in-between-grids-last")}}}},nolocation:function(t){if((this.block.isNew()?this.element:this.original).style({transform:"translate(0, 0)"}),this.placeholder&&this.placeholder.remove(),this.block){var e=t.type.match(/^touch/i)?document.elementFromPoint(t.touches.item(0).clientX,t.touches.item(0).clientY):t.target;this.block.isNew()||(e=a(e),e.matches(this.eraser.element)||this.eraser.element.find(e)?(this.dragdrop.removeElement=!0,this.eraser.over()):(this.dragdrop.removeElement=!1,this.eraser.out()))}},resize:function(t,e,n,i){this.resizer.start(t,e,n,i)},removeElement:function(t,e){this.dragdrop.removeElement=!1;var n={opacity:0};e.animate(n,{duration:"150ms"});var i,o=a("[data-lm-root]");"grid"===this.block.getType()&&(i=o.search('[data-lm-dropzone]:not([data-lm-blocktype="grid"])'))&&i.style({"pointer-events":"inherit"});var s=this.block.block.siblings(":not(.original-placeholder)");if(s&&"block"==this.block.getType()){var l,c,u,d=this.block.getSize(),h=d/s.length,p=0;s.forEach(function(t,e){t=a(t),c=m(this.builder.map,t.data("lm-id")),e+1==s.length&&(u=c),l=v(c.getSize()+h,0),p+=l,c.setSize(l,!0)},this),100!=p&&u&&(d=u.getSize(),h=100-p,u.setSize(d+h,!0))}this.eraser.hide(),this.dragdrop.DRAG_EVENTS.EVENTS.MOVE.forEach(r(function(t){a("body").off(t,this.dragdrop.bound("move"))},this)),this.dragdrop.DRAG_EVENTS.EVENTS.STOP.forEach(r(function(t){a("body").off(t,this.dragdrop.bound("deferStop"))},this)),this.builder.remove(this.block.getId());var f=this.block.block.search("[data-lm-id]");f&&f.length&&f.forEach(function(t){this.builder.remove(a(t).data("lm-id"))},this),this.block.block.remove(),this.placeholder&&this.placeholder.remove(),this.original&&this.original.remove(),this.element=this.block=null,k.disable(),k.cleanup(this.builder),this.history.push(this.builder.serialize(),this.history.get().preset),o.removeClass("moving")},stop:function(t,e){var n=a(this.dragdrop.lastOvered);if(n&&n.matches(this.eraser.element.find(".trash-zone")))return void this.eraser.hide();if("grid"===this.block.getType()){var i=this.block.block.siblings(":not(.original-placeholder):not(.section-header):not(.g-inherit):not(:empty)");i&&i.search("[data-lm-id]").style({"pointer-events":"inherit"})}if(this.block.isNew()||this.eraser.hide(),!this.dragdrop.matched)return void(this.placeholder&&this.placeholder.remove());e=a(e);var r,o,s=!1,l=this.block.isNew(),c=this.block.getType(),d=e.data("lm-id"),h=!!d&&(m(this.builder.map,d)?m(this.builder.map,d).getType():e.data("lm-blocktype")),p=this.placeholder.parent();if(p){var f=p.data("lm-id"),g=!!m(this.builder.map,f||"")&&m(this.builder.map,f).getType(),v=!1;if(this.original.remove(),"block"!==c&&"grid"!==c&&("section"===h||"grid"===h||"block"===h&&"block"!==g)&&(r=new u.block({builder:this.builder}).adopt(this.block.block),o=new u[c]({id:this.block.block.data("lm-id"),type:c,subtype:this.element.data("lm-blocksubtype"),title:this.element.text(),builder:this.builder}).setLayout(this.block.block),r.setSize(),this.block=r,this.builder.add(r),this.builder.add(o),o.emit("rendered",o,r),r.emit("rendered",r,null),v={case:1}),"block"===this.originalType&&"block"===this.block.getType()){v={case:3};var b=this.block.block.parent('[data-lm-blocktype="grid"]'),y=this.placeholder.parent('[data-lm-blocktype="grid"]');y!==b&&(s={from:this.block.block.siblings(":not(.placeholder)"),to:this.placeholder.siblings(":not(.placeholder)")}),b.find('!> [data-lm-blocktype="container"]')&&(b=b.parent()),b=b.siblings(":not(.original-placeholder)"),!this.block.isNew()&&b.length&&this.resizer.evenResize(b),this.block.block.attribute("style",null),this.block.setSize()}if("grid"===c&&!i){var w=this.block.block.parent('[data-lm-blocktype="section"]').find(".fa-plus");w&&w.emit("click")}if(this.block.hasAttribute("size")&&"function"==typeof this.block.getSize&&this.block.setSize(this.placeholder.compute("flex")),this.block.insert(this.placeholder),this.placeholder.remove(),l&&(v&&this.resizer.evenResize(a([this.block.block,this.block.block.siblings()])),this.element.attribute("style",null)),s.from||s.to&&s.to!=this.block.block){var x,S,C=this.block.getSize();if(s.to||this.block.setSize(100,!0),s.from){x=C/s.from.length;var T,E=0;s.from.forEach(function(t){t=a(t),S=m(this.builder.map,t.data("lm-id")),T=S.getSize()+x,S.setSize(T,!0),E+=T},this),100!==E&&(x=(100-E)/s.from.length,s.from.forEach(function(t){t=a(t),S=m(this.builder.map,t.data("lm-id")),T=S.getSize()+x,S.setSize(T,!0)},this))}s.to&&(C=100/(s.to.length+1),s.to.forEach(function(t){t=a(t),S=m(this.builder.map,t.data("lm-id")),S.setSize(C,!0)},this),this.block.setSize(C,!0))}k.disable(),k.cleanup(this.builder),this.history.push(this.builder.serialize(),this.history.get().preset)}},stopAnimation:function(t){var e=a("[data-lm-root]");if(e.removeClass("moving"),this.original&&this.original.remove(),k.disable(),this.block||(this.block=m(this.builder.map,t.data("lm-id"))),this.block&&"block"===this.block.getType()&&this.block.setSize(),this.block&&this.block.isNew()&&this.element&&this.element.attribute("style",null),"grid"===this.originalType){var n,i;(n=e.search('[data-lm-dropzone]:not([data-lm-blocktype="grid"])'))&&n.forEach(function(t){t=a(t),i=m(this.builder.map,t.data("lm-id")),t.attribute("style",null),i.setSize()},this)}}});e.exports=S},{"../ui/drag.drop":50,"../ui/eraser":52,"../utils/elements.utils":64,"../utils/flags-state":67,"./blocks":15,"./drag.resizer":24,"elements/zen":135,"mout/array/contains":164,"mout/array/every":167,"mout/collection/find":186,"mout/collection/forEach":187,"mout/function/bind":190,"mout/lang/deepEquals":199,"mout/lang/isArray":201,"mout/lang/isObject":206,"mout/number/enforcePrecision":220,"mout/object/get":231,"mout/object/keys":234,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298}],30:[function(t,e,n){"use strict";var i,a,r,o,s,l,c,u,d,h,p,f=t("elements/domready"),m=t("elements"),g=t("../utils/decouple"),v=t("../utils/get-scrollbar-width"),b=function(){i=m(".sidebar-block"),i&&(a=i.find(".g5-lm-particles-picker"),a&&(r=a.find("> .search"),o=a.find("> .particles-container"),s=window.innerHeight,l=0,c=0,h=a[0].getBoundingClientRect(),p=a.position().top,u=m("body.admin.com_gantry5 nav.navbar-fixed-top, #wpadminbar, #admin-main #titlebar, #admin-main .grav-update.grav"),d=m("body.admin.com_gantry5 #status"),u&&m(u).forEach(function(t){l+=t.offsetHeight}),d&&m(d).forEach(function(t){c+=t.offsetHeight}),o.style({"max-height":s-l-c-r[0].offsetHeight-30,overflow:"auto"}),o[0].scrollHeight!=o[0].offsetHeight&&o.addClass("has-scrollbar").style({"margin-right":-v()})))};f(function(){b();var t=m("grav"==GANTRY_PLATFORM?"#admin-main .content-padding":window)||[window],e=function(){if(i&&a){var t=this.scrollY||this.scrollTop,e=i[0].getBoundingClientRect(),n=e.top+e.height,r=a[0].getBoundingClientRect(),o=t>h.top-l-10&&t>=p-10,s=r.height+10+l+parseInt(i.compute("padding-bottom"),10)>=n,c=e.height<=r.height;a.style("width",r.width),o&&!s?(a.removeClass("particles-absolute").addClass("particles-fixed"),a.style({top:l+10,bottom:"inherit"})):o&&s?c&&(a.removeClass("particles-fixed").addClass("particles-absolute"),a.style({top:"inherit",bottom:parseInt(i.compute("padding-bottom"),10)})):(a.removeClass("particles-fixed").removeClass("particles-absolute"),a.style({top:"inherit",bottom:"inherit"}))}};g(t[0],"scroll",e.bind(t[0])),g(window,"resize",function(){o&&(e.call(t[0]),o.style({"max-height":window.innerHeight-l-c-r[0].offsetHeight-30}))}),m("body").on("statechangeEnd",function(){b()})}),e.exports=b},{"../utils/decouple":63,"../utils/get-scrollbar-width":71,elements:111,"elements/domready":109}],31:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/zen"),r=t("elements/domready"),o=t("agent"),s=t("./ui"),l=t("mout/string/interpolate"),c=t("mout/string/trim"),u=t("mout/queryString/setParam"),d=s.modal,h=s.toastr,p=t("./utils/get-ajax-url").parse,f=(t("./utils/get-ajax-url").global,t("./utils/get-ajax-suffix")),m=t("./utils/flags-state"),g=t("./utils/field-validation"),v=t("./lm"),b=t("./menu"),y=t("./positions/cards"),w=(t("./configurations"),t("./positions"),t("./changelog"),t("./utils/translate"));t("elements/attributes"),t("elements/events"),t("elements/delegation"),t("elements/insertion"),t("elements/traversal"),t("./fields"),t("./ui/popover"),t("./utils/ajaxify-links"),t("./utils/rAF-polyfill");var x=function(t,e,n){return function(i){var a=Math.floor(i/t),r=e+(a>1?"s":"");return""+a+" "+r+" "+n}},k=[{threshold:-31535999,handler:x(-31536e3,"year","from now")},{threshold:-2591999,handler:x(-2592e3,"month","from now")},{threshold:-604799,handler:x(-604800,"week","from now")},{threshold:-172799,handler:x(-86400,"day","from now")},{threshold:-86399,handler:function(){return"tomorrow"}},{threshold:-3599,handler:x(-3600,"hour","from now")},{threshold:-59,handler:x(-60,"minute","from now")},{threshold:-.9999,handler:x(-1,"second","from now")},{threshold:1,handler:function(){return"just now"}},{threshold:60,handler:x(1,"second","ago")},{threshold:3600,handler:x(60,"minute","ago")},{threshold:86400,handler:x(3600,"hour","ago")},{threshold:172800,handler:function(){return"yesterday"}},{threshold:604800,handler:x(86400,"day","ago")},{threshold:2592e3,handler:x(604800,"week","ago")},{threshold:31536e3,handler:x(2592e3,"month","ago")},{threshold:1/0,handler:x(31536e3,"year","ago")}],S={format:function(t){for(var e=((new Date).getTime()-t.getTime())/1e3,n=0;n<k.length;n++)if(e<k[n].threshold)return k[n].handler(e);throw new Error("exhausted all formatter options, none found")}};window.onbeforeunload=function(){if(m.get("pending"))return w("GANTRY5_PLATFORM_JS_NO_SAVE_DETECTED")},r(function(){var t=i("body"),e=w("GANTRY5_PLATFORM_JS_SAVE_SUCCESS");t.delegate("click","[data-g-close]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.data("g-close");n=n?e.parent(n):e,n.slideUp(function(){n.remove()})}),t.delegate("click","[data-g-popover]",function(t,e){if(t&&t.preventDefault&&t.preventDefault(),!e.PopoverDefined){var n=e.find("[data-popover-content]")||e.siblings("[data-popover-content]");e.getPopover({style:e.data("g-popover-style")||"generic",width:e.data("g-popover-width")||220,content:a("ul").html(n.html())[0].outerHTML,allowElementsClick:e.data("g-popover-elementsclick")||".toggle"});e.on("shown.popover",function(t){var n=e.find(".enabler");e.attribute("aria-expanded",!0).attribute("aria-hidden",!1),n&&n[0].focus()}),e.on("hide.popover",function(t){e.attribute("aria-expanded",!1).attribute("aria-hidden",!0)}),e.getPopover().show()}}),t.delegate("mousedown","[data-settings-key]",function(t,e){var n=e.data("settings-key");if(!n)return!0;var i=window.location.search,a=e.attribute("href"),r=window.location.href.split("?");r.length>1&&r[0].match(/index.php$/)&&(i="index.php"+i),i=u(a,n,btoa(i)),e.href(i)}),t.delegate("mouseover",".button-save",function(t,e){if(!e.lastSaved)return!0;var n=w("GANTRY5_PLATFORM_LAST_SAVED")+": "+S.format(e.lastSaved);e.data("tip",n).data("title",n)}),t.delegate("click",".button-save",function(n,a){n&&n.preventDefault&&n.preventDefault();var r=i(".button-save");if(r.disabled())return!1;r.disabled(!0),r.hideIndicator(),r.showIndicator();var s={},u=[],x=a.data("save"),k="",S=i("[data-lm-root]")?"layout":i("[data-mm-id]")?"menu":i("[data-position]")?"positions":"other",C=p(c(window.location.href,"#")+f());switch(S){case"layout":var T=i("[data-lm-preset]");v.layoutmanager.singles("cleanup",v.builder,!1),v.savestate.setSession(v.builder.serialize(null,!0)),s.preset=T&&T.data("lm-preset")?T.data("lm-preset"):"default";var E=JSON.stringify(v.builder.serialize());s.layout=E;break;case"menu":s.menutype=i("select.menu-select-wrap").value(),s.settings=JSON.stringify(b.menumanager.settings),s.ordering=JSON.stringify(b.menumanager.ordering);var O=JSON.stringify(b.menumanager.items);s.items=O,C=p(a.parent("form").attribute("action")+f());break;case"positions":s.positions=y.serialize();break;case"other":default:var I=a.parent("form");I&&"submit"==a.attribute("type")&&i(I[0].elements).forEach(function(t){t=i(t);var e=t.attribute("name"),n=t.attribute("type"),a=t.value(),r=t.parent(".settings-param, .card-overrideable"),o=r?r.find('> input[type="checkbox"]'):null;o=o||i(t.data("override-target")),!e||t.disabled()||o&&!o.checked()||"radio"==n&&!t.checked()||(g(t)||u.push(t),s[e]=a)})}return u.length?(r.disabled(!1),r.hideIndicator(),r.showIndicator("fa fa-fw fa-exclamation-triangle"),void h.error(w("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),w("GANTRY5_PLATFORM_JS_INVALID_FIELDS"))):("other"==S&&i(".settings-param-title, .card.settings-block > h4").hideIndicator(),t.emit("updateOriginalFields"),void o("post",C,s,function(t,n){n.body.success?(d.close(),i("#styles")&&(k="<br />"+(n.body.warning?"<hr />"+n.body.title+"<br />"+n.body.html:w("GANTRY5_PLATFORM_JS_CSS_COMPILED"))),h[n.body.warning?"warning":"success"](l(e,{verb:"s"==x.slice(-1)?"have":"has",type:x,extras:k}),x+" "+w("GANTRY5_PLATFORM_SAVED"))):d.open({content:n.body.html||n.body,afterOpen:function(t){n.body.html||t.style({width:"90%"})}}),r.disabled(!1),r.hideIndicator(),r.forEach(function(t){i(t).lastSaved=new Date}),"layout"==S&&v.layoutmanager.updatePendingChanges(),m.set("pending",!1),m.emit("update:pending")}))}),t.delegate("keydown","[data-title-edit]",function(e,n){var i=e.which?e.which:e.keyCode;32!=i&&13!=i||(e.preventDefault(),t.emit("click",e))}),t.delegate("click","[data-title-edit]",function(t,e){if(e=i(e),e.hasClass("disabled"))return!1;var n,a=e.siblings("[data-title-editable]")||e.previousSiblings().find("[data-title-editable]")||e.nextSiblings().find("[data-title-editable]");if(!a)return!0;n=a[0],a.text(c(a.text())),a.attribute("contenteditable",!0),n.focus();var r,o=document.createRange();o.selectNodeContents(n),r=window.getSelection(),r.removeAllRanges(),r.addRange(o),a.storedTitle=c(a.text()),a.titleEditCanceled=!1,a.emit("title-edit-start",a.storedTitle)}),t.delegate("keydown","[data-title-editable]",function(t,e){switch(e=i(e),t.keyCode){case 13:case 27:return t.stopPropagation(),27==t.keyCode&&"undefined"!=typeof e.storedTitle&&(e.text(e.storedTitle),e.titleEditCanceled=!0),e.attribute("contenteditable",null),e[0].blur(),e.emit("title-edit-exit",e.data("title-editable"),13==t.keyCode?"enter":"esc"),!1;default:return!0}}),t.delegate("blur","[data-title-editable]",function(t,e){e=i(e),e[0].scrollLeft=0,e.attribute("contenteditable",null),e.data("title-editable",c(e.text())),window.getSelection().removeAllRanges(),e.emit("title-edit-end",e.data("title-editable"),e.storedTitle,e.titleEditCanceled)},!0),t.delegate("click","[data-ajax-action]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.attribute("href")||e.data("ajax-action"),a=e.data("ajax-action-method")||"post",r=i(e.data("ajax-action-indicator"))||e;return!!n&&(r.showIndicator(),void o(a,p(n+f()),function(t,e){return e.body.success?(h[e.body.warning?"warning":"success"](e.body.html||"Action successfully completed.",e.body.title||""),void r.hideIndicator()):(d.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),r.hideIndicator(),!1)}))})});var C={lm:v,mm:b,assingments:t("./assignments"),ui:t("./ui"),styles:t("./styles"),$:i,domready:t("elements/domready"),particles:t("./particles"),zen:t("elements/zen"),moofx:t("moofx"),atoms:t("./pagesettings"),tips:t("./ui/tooltips")};window.G5=C,e.exports=C},{"./assignments":2,"./changelog":3,"./configurations":5,"./fields":6,"./lm":27,"./menu":34,
"./pagesettings":36,"./particles":42,"./positions":47,"./positions/cards":46,"./styles":48,"./ui":53,"./ui/popover":55,"./ui/tooltips":60,"./utils/ajaxify-links":61,"./utils/field-validation":66,"./utils/flags-state":67,"./utils/get-ajax-suffix":68,"./utils/get-ajax-url":69,"./utils/rAF-polyfill":74,"./utils/translate":76,agent:78,elements:111,"elements/attributes":106,"elements/delegation":108,"elements/domready":109,"elements/events":110,"elements/insertion":112,"elements/traversal":134,"elements/zen":135,moofx:136,"mout/queryString/setParam":247,"mout/string/interpolate":259,"mout/string/trim":270}],32:[function(t,e,n){"use strict";var i=t("../ui/drag.events"),a=t("prime"),r=(t("prime/emitter"),t("prime-util/prime/bound")),o=t("prime-util/prime/options"),s=t("mout/function/bind"),l=t("mout/lang/isString"),c=t("mout/math/map"),u=t("mout/math/clamp"),d=t("mout/number/enforcePrecision"),h=t("mout/object/get"),p=t("../utils/elements.utils");t("elements/events"),t("elements/delegation");var f=new a({mixin:[r,o],DRAG_EVENTS:i,options:{minSize:5},constructor:function(t,e,n){this.setOptions(e),this.history=this.options.history||{},this.builder=this.options.builder||{},this.map=this.builder.map,this.menumanager=n,this.origin={x:0,y:0,transform:null,offset:{x:0,y:0}}},getBlock:function(t){return h(this.map,l(t)?t:p(t).data("lm-id")||"")},getAttribute:function(t,e){return this.getBlock(t).getAttribute(e)},getSize:function(t){t=p(t);var e=t.matches("[data-mm-id]")?t:t.parent("[data-mm-id]"),n=e.find(".percentage input");return Number(n.value())},setSize:function(t,e,n){t=p(t),n="undefined"!=typeof n&&n;var i=t.matches("[data-mm-id]")?t:t.parent("[data-mm-id]"),a=i.find(".percentage input");i[n?"animate":"style"]({flex:"0 1 "+e+"%"}),a.value(d(e,1))},start:function(t,e,n,i){if(t&&t.type.match(/^touch/i)&&t.preventDefault(),t.which&&1!==t.which)return!0;t.preventDefault(),this.element=p(e);var a=this.element.parent(".submenu-selector");if(!a)return!1;a.addClass("moving"),this.siblings={occupied:0,elements:n,next:this.element.parent("[data-mm-id]").nextSibling().find("> .submenu-column"),prevs:this.element.parent("[data-mm-id]").previousSiblings(),sizeBefore:0},this.siblings.elements.length>1&&(this.siblings.occupied-=this.getSize(this.siblings.next),this.siblings.elements.forEach(function(t){this.siblings.occupied+=this.getSize(t)},this)),this.siblings.prevs&&this.siblings.prevs.forEach(function(t){this.siblings.sizeBefore+=this.getSize(t)},this),this.origin={size:this.getSize(this.element),maxSize:this.getSize(this.element)+this.getSize(this.siblings.next),x:t.changedTouches?t.changedTouches[0].pageX:t.pageX+6,y:t.changedTouches?t.changedTouches[0].pageY:t.pageY};var r=this.element[0].getBoundingClientRect(),o=this.element.parent()[0].getBoundingClientRect();this.origin.offset={clientRect:r,parentRect:{left:o.left,right:o.right},x:this.origin.x-r.right,y:r.top-this.origin.y,down:i},this.origin.offset.parentRect.left=this.element.parent(".submenu-selector").find("> [data-mm-id]:first-child")[0].getBoundingClientRect().left,this.origin.offset.parentRect.right=this.element.parent(".submenu-selector").find("> [data-mm-id]:last-child")[0].getBoundingClientRect().right,this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){p(document).on(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){p(document).on(t,this.bound("stop"))},this))},move:function(t){t&&t.type.match(/^touch/i)&&t.preventDefault();var e=t.clientX||t.touches[0].clientX||0,n=t.clientY||t.touches[0].clientY||0,i=this.origin.offset.parentRect,a=(this.lastX||e)-e,r=(this.lastY||n)-n;this.direction=Math.abs(a)>Math.abs(r)&&a>0&&"left"||Math.abs(a)>Math.abs(r)&&a<0&&"right"||Math.abs(r)>Math.abs(a)&&r>0&&"up"||"down";var o,s=100-this.siblings.occupied,l=e+(this.siblings.prevs?this.siblings.prevs.length:this.origin.offset.x-this.origin.offset.down),h=u(l,i.left,i.right);o=c(h,i.left,i.right,0,100),o-=this.siblings.sizeBefore,o=d(u(o,this.options.minSize,this.origin.maxSize-this.options.minSize),0),s=d(s-o,0),this.setSize(this.element,o),this.setSize(this.siblings.next,s);var f=this.siblings.elements,m=f?f.length+1:1;if(3==m||6==m||7==m||8==m||9==m||11==m||12==m){var g,v=0;g=p([f,this.element.parent("[data-mm-id]")]),g.forEach(function(t,e){t=p(t),o=this.getSize(t),o%1&&(o=d(100/m,0),this.setSize(t,o)),v+=o,g.length==e+1&&100!=v&&(s=100-v,this.setSize(t,o+s))},this)}this.lastX=e,this.lastY=n},stop:function(t){t&&t.type.match(/^touch/i)&&t.preventDefault(),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){p(document).off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){p(document).off(t,this.bound("stop"))},this)),this.element.parent(".submenu-selector").removeClass("moving"),this.menumanager.emit("dragEnd",this.menumanager.map,"resize")},updateItemSizes:function(t){var e=this.element?this.element.parent(".submenu-selector"):null;if(!e&&!t)return!1;var n=t||e.search("> [data-mm-id]"),i=[],a=p(".menu-selector .active"),r=a?a.data("mm-id"):null;return n.forEach(function(t){i.push(this.getSize(t))},this),this.menumanager.items[r].columns=i,this.updateMaxValues(t),i},updateMaxValues:function(t){var e=this.element?this.element.parent(".submenu-selector"):null;if(!e&&!t)return!1;var n,i,a=t||e.search("> [data-mm-id]");a.forEach(function(t){t=p(t);var e=t.nextSibling()||t.previousSibling();e&&(i={block:t.find("input.column-pc"),sibling:e.find("input.column-pc")},n={current:this.getSize(t),sibling:this.getSize(e)},n.total=n.current+n.sibling,i.block.attribute("max",n.total-Number(i.block.attribute("min"))),i.sibling.attribute("max",n.total-Number(i.sibling.attribute("min"))))},this)},evenResize:function(t,e){var n=t.length,i=d(100/n,4);t.forEach(function(t){t=p(t),this.setSize(t,i,"undefined"!=typeof e&&e)},this),this.updateItemSizes(t),this.menumanager.emit("dragEnd",this.menumanager.map,"evenResize")}});e.exports=f},{"../ui/drag.events":51,"../utils/elements.utils":64,"elements/delegation":108,"elements/events":110,"mout/function/bind":190,"mout/lang/isString":209,"mout/math/clamp":214,"mout/math/map":216,"mout/number/enforcePrecision":220,"mout/object/get":231,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298}],33:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/zen"),r=t("elements/domready"),o=t("../fields/submit"),s=t("../ui").modal,l=t("../ui").toastr,c=t("agent"),u=t("mout/array/indexOf"),d=t("mout/string/trim"),h=t("../utils/get-ajax-url").parse,p=t("../utils/get-ajax-url").global,f=t("../utils/get-ajax-suffix"),m=t("../utils/flags-state"),g=t("mout/lang/deepEquals"),v=t("../utils/translate"),b=t("../positions/cards"),y=t("../utils/wp-widgets-customizer"),w=null,x=function(t,e){e=e&&e.toLowerCase();for(var n="",i=0,a="a"==e?10:0,r="n"==e?10:62;i++<t;){var o=Math.random()*(r-a)+a<<0;n+=String.fromCharCode(o+=o>9?o<36?55:61:48)}return n},k=function(t,e){if(!this.isNewParticle||"reorder"===e){this.resizer.updateItemSizes(),w=this;var n=i("[data-save]"),r={settings:this.settings,ordering:this.ordering,items:this.items};if(this.isNewParticle||(g(t,r)?(n.hideIndicator(),m.set("pending",!1)):(n.showIndicator("fa fa-fw changes-indicator fa-circle-o"),m.set("pending",!0))),this.isParticle&&this.isNewParticle){var o=this.block.data("mm-blocktype");this.block.attribute("data-mm-blocktype",null).addClass("g-menu-item-"+o).data("mm-original-type",o),a("span.menu-item-type.badge").text(o).after(this.block.find(".menu-item .title")),s.open({content:v("GANTRY5_PLATFORM_JS_LOADING"),method:"post",remote:h(i(this.block).find(".config-cog").attribute("href")+f()),remoteLoaded:function(t,e){var n=e.elements.content.find(".search input"),a=e.elements.content.search("[data-mm-type]"),r=e.elements.content.search("[data-mm-filter]");n&&r&&a&&(n.on("input",function(){if(!this.value())return void a.removeClass("hidden");a.addClass("hidden");var t,e=[],n=this.value().toLowerCase();r.forEach(function(a){a=i(a),t=d(a.data("mm-filter")).toLowerCase(),t.match(new RegExp("^"+n+"|\\s"+n,"gi"))&&e.push(a.matches("[data-mm-type]")?a:a.parent("[data-mm-type]"))},this),e.length&&i(e).removeClass("hidden")}),setTimeout(function(){n[0].focus()},5))}})}this.type=void 0}},S=function(t,e,n){var r=e.find("[data-mm-particle-stepone]").data("mm-particle-stepone"),d=t.instancepicker;if(d){var m=JSON.parse(t.item);d=JSON.parse(d),delete t.instancepicker,r=p(m.type+"/"+m[m.type])}c("post",h(r+f()),t,function(t,r){if(!r.body.success)return s.open({content:r.body.html||r.body,afterOpen:function(t){r.body.html||t.style({width:"90%"})}}),void n.hideIndicator();e.html(r.body.html);var p=i("[data-selectize]");p&&p.selectize();var g=e.find(".g-urltemplate");g&&i("body").emit("input",{target:g});var k=e.find("form"),S=e.find('input[type="submit"], button[type="submit"]'),C=a("div").html(r.body.html).find("form");if(!k&&!C||!S)return!0;var T=e.search("[data-apply-and-save]");T&&T.remove(),S.on("click",function(t){t.preventDefault(),S.showIndicator();var n=o(C[0].elements,e,{submitUnchecked:!0});c(C.attribute("method"),h(C.attribute("action")+f()),n.valid.join("&")||{},function(t,e){if(e.body.success)if(d){var n=i('[name="'+d.field+'"]'),r=n.siblings("[data-g-instancepicker]"),o=n.siblings(".g-instancepicker-title");n&&(n.value(JSON.stringify(e.body.item)),i("body").emit("change",{target:n})),o&&o.text(e.body.item.title),"particle"==m.type&&r.text(r.data("g-instancepicker-alttext"))}else if(w){for(var c=w.element,h=c.data("mm-id")+"-",p=x(5),f=c.parent("[data-mm-base]").data("mm-base"),g=(c.parent("[data-mm-id]").data("mm-id").match(/\d+$/)||[0])[0],k=u(c.parent().children("[data-mm-id]"),c[0]);w.items[h+p];)p=x(5);w.items[h+p]=e.body.item,w.ordering[f]||(w.ordering[f]=[]),w.ordering[f][g]||(w.ordering[f][g]=[]),w.ordering[f][g].splice(k,1,h+p),c.data("mm-id",h+p),e.body.html&&c.html(e.body.html),w.isNewParticle=!1,w.emit("dragEnd",w.map),l.success(v("GANTRY5_PLATFORM_JS_MENU_SETTINGS_APPLIED"),v("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else{var C=i('[data-position-name="'+e.body.position+'"]'),T=a("div").html(e.body.html);C.find("> ul").appendChild(T.children()),b.serialize(C),l.success(v("GANTRY5_PLATFORM_JS_POSITIONS_SETTINGS_APPLIED"),v("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else s.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});s.close(),S.hideIndicator(),y(n)})})})};r(function(){var t=i("body");t.delegate("click",".menu-editor-extras [data-lm-blocktype], .menu-editor-extras [data-mm-module]",function(t,e){var n=e.parent(".menu-editor-extras"),i=n.search("[data-lm-blocktype], [data-mm-module]"),a=n.find("[data-mm-select]");i.removeClass("selected"),e.addClass("selected"),a.attribute("disabled",null)}),t.delegate("click",".menu-editor-extras [data-mm-select]",function(e,n){if(e.preventDefault(),n.hasClass("disabled")||n.attribute("disabled"))return!1;var a=n.parent(".menu-editor-extras"),r=a.find("[data-lm-blocktype].selected, [data-mm-module].selected"),o=r.data("mm-type");switch(l={type:o},o){case"particle":l.particle=r.data("lm-subtype");break;case"widget":l.widget=r.data("lm-subtype");break;case"module":l.particle=o,l.title=r.find("[data-mm-title]").data("mm-title"),l.options={particle:{module_id:r.data("mm-module")}}}n.showIndicator();var l,c=n.data("g-instancepicker");if(c&&"module"==o){l=JSON.parse(c);var u=i('[name="'+l.field+'"]');return u&&(u.value(r.data("mm-module")),t.emit("input",{target:u})),n.hideIndicator(),s.close(),!1}var d=c;n.data("g-instancepicker",null),S({item:JSON.stringify(l),instancepicker:d?d:null},n.parent(".g5-content"),n)})}),e.exports=k},{"../fields/submit":8,"../positions/cards":46,"../ui":53,"../utils/flags-state":67,"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,"../utils/translate":76,"../utils/wp-widgets-customizer":77,agent:78,elements:111,"elements/domready":109,"elements/zen":135,"mout/array/indexOf":173,"mout/lang/deepEquals":199,"mout/string/trim":270}],34:[function(t,e,n){"use strict";var i,a=t("elements/domready"),r=t("./menumanager"),o=t("../fields/submit"),s=t("elements"),l=t("elements/zen"),c=t("../ui").modal,u=t("../ui").toastr,d=t("./extra-items"),h=t("agent"),p=t("mout/string/trim"),f=t("mout/math/clamp"),m=t("mout/array/contains"),g=t("mout/array/indexOf"),v=t("../utils/get-ajax-url").parse,b=t("../utils/get-ajax-suffix"),y=t("../utils/translate"),w=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,x=w?"focus":"focusin",k=w?"blur":"focusout";a(function(){var t=s("body");i=new r("[data-mm-container]",{delegate:".g5-mm-particles-picker ul li, #menu-editor > section ul li, .submenu-column, .submenu-column li[data-mm-id], .column-container .g-block",droppables:"#menu-editor [data-mm-id]",exclude:"[data-lm-nodrag], .menu-item-back, .fa-cog, .config-cog",resize_handles:".submenu-column:not(:last-child)",catchClick:!0}),i.on("dragEnd",d),e.exports.menumanager=i,i.setRoot(),t.delegate("statechangeAfter","#main-header [data-g5-ajaxify], select.menu-select-wrap",function(){i.setRoot(),i.refresh(),i.eraser&&(i.eraser.element=s("[data-mm-eraseparticle]"),i.eraser.hide())}),t.delegate(x,".percentage input",function(t,e){e=s(e),e.currentSize=Number(e.value()),e[0].focus(),e[0].select()},!0),t.delegate("keydown",".percentage input",function(t){m([46,8,9,27,13,110,190],t.keyCode)||65==t.keyCode&&(t.ctrlKey===!0||t.ctrlKey===!0)||82==t.keyCode&&(t.ctrlKey===!0||t.metaKey===!0)||t.keyCode>=35&&t.keyCode<=40||(t.shiftKey||t.keyCode<48||t.keyCode>57)&&(t.keyCode<96||t.keyCode>105)&&t.preventDefault()}),t.delegate("keydown",".percentage input",function(e,n){n=s(n);var i=Number(n.value()),a=Number(n.attribute("min")),r=Number(n.attribute("max")),o=38==e.keyCode||40==e.keyCode;o&&(i+=38==e.keyCode?1:-1,i=f(i,a,r),n.value(i),t.emit("keyup",{target:n}))}),t.delegate("keyup",".percentage input",function(t,e){e=s(e);var n=Number(e.value()),a=Number(e.attribute("min")),r=Number(e.attribute("max")),o=i.resizer,l=e.parent("[data-mm-id]"),c=l.nextSibling("[data-mm-id]")||l.previousSibling("[data-mm-id]");if(!(!n||n<a||n>r)){var u={current:Number(e.currentSize),sibling:Number(o.getSize(c))};e.currentSize=n,u.total=u.current+u.sibling,u.diff=u.total-n,o.setSize(l,n),o.setSize(c,u.diff),i.resizer.updateItemSizes(l.parent(".submenu-selector").search("> [data-mm-id]")),i.emit("dragEnd",i.map,"inputChange")}}),t.delegate(k,".percentage input",function(t,e){e=s(e);var n=Number(e.value());(n<Number(e.attribute("min"))||n>Number(e.attribute("max")))&&e.value(e.currentSize)},!0),t.delegate("click",".add-column",function(t,e){t&&t.preventDefault&&t.preventDefault(),e=s(e);var n=e.parent("[data-g5-menu-columns]").find(".submenu-selector"),a=n.children(),r=n.find("> :last-child"),o=a?a.length:0,l=s(".menu-selector .active"),c=l?l.data("mm-id"):null;if(1==o&&!a.search(".submenu-items > [data-mm-id]"))return!1;var u=s(r[0].cloneNode(!0));u.data("mm-id","list-"+o),u.find(".submenu-items").empty(),u.find("[data-mm-base-level]").data("mm-base-level",1),u.find(".submenu-level").text("Level 1"),u.after(r),i.ordering[c]||(i.ordering[c]=[[]]),i.ordering[c].push([]),i.resizer.evenResize(s(".submenu-selector > [data-mm-id]"))}),["click","touchend"].forEach(function(e){t.delegate(e,"[data-g5-menu-columns] .submenu-items:empty",function(t,e){var n=e[0].getBoundingClientRect(),a=t.pageX||t.changedTouches[0].pageX||0,r=t.pageY||t.changedTouches[0].pageY||0,o=s(".submenu-selector > [data-mm-id]"),l={width:36,height:36};if(o.length<=1)return!1;if(a>=n.left+n.width-l.width&&a<=n.left+n.width&&Math.abs(window.scrollY-r)-n.top<l.height){var c=e.parent("[data-mm-id]"),u=c.parent(".submenu-selector").children("[data-mm-id]"),d=g(u,c),h=s(".menu-selector .active"),p=h?h.data("mm-id"):null;c.remove(),o=s(".submenu-selector > [data-mm-id]"),i.ordering[p].splice(d,1),i.resizer.evenResize(o)}})}),t.delegate("click","#menu-editor .config-cog, #menu-editor .global-menu-settings",function(e,n){e.preventDefault();var a={},r=n.hasClass("global-menu-settings");r?a.settings=JSON.stringify(i.settings):a.item=JSON.stringify(i.items[n.parent("[data-mm-id]").data("mm-id")]),c.open({content:y("GANTRY5_PLATFORM_JS_LOADING"),method:"post",data:a,overlayClickToClose:!1,remote:v(s(n).attribute("href")+b()),remoteLoaded:function(e,a){if(!e.body.success)return void c.enableCloseByOverlay();var d,f=a.elements.content.find("form"),m=l("div").html(e.body.html).find("form"),g=a.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),w=a.elements.content.find(".search input"),x=a.elements.content.search("[data-mm-type]"),k=a.elements.content.search("[data-mm-filter]"),S=a.elements.content.find(".g-urltemplate");S&&t.emit("input",{target:S});var C=a.elements.content.find("[data-title-editable]");return C&&C.on("title-edit-end",function(t,e){if(t=p(t),!t)return t=p(e)||"Title",this.text(t).data("title-editable",t),!0}),w&&k&&x&&w.on("input",function(){if(!this.value())return void x.removeClass("hidden");x.addClass("hidden");var t,e=[],n=this.value().toLowerCase();k.forEach(function(i){i=s(i),t=p(i.data("mm-filter")).toLowerCase(),t.match(new RegExp("^"+n+"|\\s"+n,"gi"))&&e.push(i.matches("[data-mm-type]")?i:i.parent("[data-mm-type]"))},this),e.length&&s(e).removeClass("hidden")}),w&&setTimeout(function(){w[0].focus()},5),!f&&!m||!g||void g.on("click",function(e){e.preventDefault();var l=s(e.currentTarget);l.disabled(!0),l.hideIndicator(),l.showIndicator();var p=o(m[0].elements,a.elements.content,{isRoot:r});return p.invalid.length?(l.disabled(!1),l.hideIndicator(),l.showIndicator("fa fa-fw fa-exclamation-triangle"),void u.error(y("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),y("GANTRY5_PLATFORM_JS_INVALID_FIELDS"))):void h(m.attribute("method"),v(m.attribute("action")+b()),p.valid.join("&"),function(e,a){if(a.body.success){if(a.body.path||a.body.item&&"particle"==a.body.item.type?(d=a.body.path||n.parent("[data-mm-id]").data("mm-id"),i.items[d]=a.body.item):a.body.item&&"particle"==a.body.item.type||(i.settings=a.body.settings),a.body.html){var r=n.parent("[data-mm-id]");if(r){var o=a.body.item.enabled||a.body.item.options.particle.enabled;r.html(a.body.html),r["0"==o?"addClass":"removeClass"]("g-menu-item-disabled")}}if(i.emit("dragEnd",i.map),null!==l.data("apply-and-save")){var h=s("body").find(".button-save");h&&t.emit("click",{target:h})}c.close(),u.success(y("GANTRY5_PLATFORM_JS_MENU_SETTINGS_APPLIED"),y("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else c.open({content:a.body.html||a.body,afterOpen:function(t){a.body.html||t.style({width:"90%"})}});l.hideIndicator()})})}})})}),e.exports={menumanager:i}},{"../fields/submit":8,"../ui":53,"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,"../utils/translate":76,"./extra-items":33,"./menumanager":35,agent:78,elements:111,"elements/domready":109,"elements/zen":135,"mout/array/contains":164,"mout/array/indexOf":173,"mout/math/clamp":214,"mout/string/trim":270}],35:[function(t,e,n){"use strict";var i=t("prime"),a=t("../utils/elements.utils"),r=t("mout/function/bind"),o=t("elements/zen"),s=t("prime/emitter"),l=t("prime-util/prime/bound"),c=t("prime-util/prime/options"),u=t("../ui/drag.drop"),d=t("../ui/eraser"),h=t("./drag.resizer"),p=(t("mout/object/get"),t("mout/string/ltrim")),f=(t("mout/array/every"),t("mout/array/last")),m=t("mout/array/indexOf"),g=(t("mout/lang/isArray"),t("mout/lang/isObject"),t("mout/lang/deepClone")),v=(t("mout/object/equals"),new i({mixin:[l,c],inherits:s,options:{},constructor:function(t,e){this.setOptions(e),this.refElement=t,this.map={},t&&a(t)&&this.init(t)},init:function(){this.setRoot(),this.dragdrop=new u(this.refElement,this.options,this),this.resizer=new h(this.refElement,this.options,this),this.eraser=new d("[data-mm-eraseparticle]",this.options),this.dragdrop.on("dragdrop:click",this.bound("click")).on("dragdrop:start",this.bound("start")).on("dragdrop:move:once",this.bound("moveOnce")).on("dragdrop:location",this.bound("location")).on("dragdrop:nolocation",this.bound("nolocation")).on("dragdrop:resize",this.bound("resize")).on("dragdrop:stop:erase",this.bound("removeElement")).on("dragdrop:stop",this.bound("stop")).on("dragdrop:stop:animation",this.bound("stopAnimation"))},refresh:function(){this.refElement&&a(this.refElement)&&this.init()},setRoot:function(){if(this.root=a("#menu-editor"),this.root){this.settings=JSON.parse(this.root.data("menu-settings")),this.ordering=JSON.parse(this.root.data("menu-ordering")),this.items=JSON.parse(this.root.data("menu-items")),this.map={settings:g(this.settings),ordering:g(this.ordering),items:g(this.items)};var t,e=a("[data-g5-menu-columns] .submenu-selector");this.resizer&&e&&(t=e.search("> [data-mm-id]"))&&this.resizer.updateMaxValues(t)}},click:function(t,e){var n=a(t.target);if(n.matches(".g-menu-addblock")||n.parent(".g-menu-addblock"))return!1;if(e.hasClass("g-block"))return this.stopAnimation(),!0;if(e.find("[data-g5-ajaxify]")){var i=e.siblings();e.addClass("active"),i&&i.removeClass("active")}e.emit("click");var r=e.find("a");r&&r[0].click()},resize:function(t,e,n,i){this.resizer.start(t,e,n,i)},start:function(t,e){var n=e.parent(".menu-selector")||e.parent(".submenu-column")||e.parent(".submenu-selector")||e.parent(".g5-mm-particles-picker"),i=a(e).position(),r=a(e)[0].getBoundingClientRect();if(this.block=null,this.targetLevel=void 0,this.addNewItem=!1,this.type=e.parent(".g-toplevel")||e.matches(".g-toplevel")?"main":e.matches(".g-block")?"column":"columns_items",this.isParticle=e.matches("[data-mm-blocktype]")||e.matches("[data-mm-original-type]"),this.wasActive=e.hasClass("active"),this.isNewParticle=e.parent(".g5-mm-particles-picker"),this.ParticleIndex=-1,this.root=n,this.itemID=e.data("mm-id"),this.itemLevel=e.data("mm-level"),this.itemFrom=e.parent("[data-mm-id]"),this.itemTo=null,this.isParticle&&!this.isNewParticle){var s=e.parent().children("[data-mm-id]");this.ParticleIndex=m(s,e[0])}n.addClass("moving");var l=a(e).data("mm-id"),c=e[0].cloneNode(!0);if(this.placeholder||(this.placeholder=o(("column"==this.type?"div":"li")+".block.placeholder[data-mm-placeholder]")),this.placeholder.style({display:"none"}),this.original=a(c).after(e).style({display:"inline-block",opacity:1}).addClass("original-placeholder").data("lm-dropzone",null),this.originalType=l,this.block=e,this.isNewParticle){var u=e.position();this.original.style({position:"fixed",opacity:.5}).style({left:r.left,top:r.top,width:u.width,height:u.height}),this.element=this.dragdrop.element,this.block=this.dragdrop.element,this.dragdrop.element=this.original}else e.style({position:"fixed",zIndex:1500,width:Math.ceil(i.width),height:Math.ceil(i.height),left:r.left,top:r.top}).addClass("active"),this.placeholder.before(e);"column"==this.type&&n.search(".g-block > *").style({"pointer-events":"none"})},moveOnce:function(t){var e=a(t).data("mm-id");this.original&&this.original.style({opacity:.5}),!this.isNewParticle&&e&&e.match(/__(module|particle|widget)(-[a-z0-9]{5,})?$/i)&&this.eraser.show()},location:function(t,e,n){n=a(n),(this.isNewParticle?this.block:this.original).style({transform:"translate(0, 0)"}),this.placeholder||(this.placeholder=o(("column"==this.type?"div":"li")+".block.placeholder[data-mm-placeholder]").style({display:"none"}));var i=n.parent(".g-toplevel")||n.matches(".g-toplevel")?"main":n.matches(".g-block")?"column":"columns_items",r=n.data("mm-level"),s=this.block.data("mm-level");if(this.isParticle&&"main"===i&&!r)return void(this.dragdrop.matched=!1);if(null===r&&"columns_items"===this.type&&this.isParticle&&this.isNewParticle){var l=n.find(".submenu-items");return l?(this.placeholder.style({display:"block"}).bottom(l),this.addNewItem=l,this.targetLevel=2,void(this.dragdrop.matched=!1)):void(this.dragdrop.matched=!1)}if(null===r&&("columns_items"===this.type||this.isParticle)){var l=n.find(".submenu-items"),c=l.data("mm-base-level");return!n.hasClass("g-block")||n.find(this.block)||!this.isParticle&&s!=c&&(!l||l.children()||s>2)?void(this.dragdrop.matched=!1):(this.placeholder.style({display:"block"}).bottom(l),this.addNewItem=l,this.targetLevel=2,void(this.dragdrop.matched=!1))}if(!this.isParticle){if("column"!==this.type&&s!==r)return void(this.dragdrop.matched=!1);if("column"==this.type&&r)return void(this.dragdrop.matched=!1);if(r>2&&n.parent("ul")!=this.block.parent("ul"))return void(this.dragdrop.matched=!1)}var u=':not(.placeholder):not([data-mm-id="'+this.original.data("mm-id")+'"])',d={before:this.original.previousSiblings(u),after:this.original.nextSiblings(u)};if(d.before&&(d.before=a(d.before[0])),d.after&&(d.after=a(d.after[0])),!("main"===i&&(d.before===n&&"after"===e.x||d.after===n&&"before"===e.x)||"column"===i&&(d.before===n&&"after"===e.x||d.after===n&&"before"===e.x)||"columns_items"===i&&(d.before===n&&"below"===e.y||d.after===n&&"above"===e.y))){switch(i){case"main":case"column":this.placeholder[e.x](n);break;case"columns_items":this.placeholder["above"===e.y?"before":"after"](n)}this.targetLevel=r,this.placeholder.style({display:"block"})["main"!==i?"removeClass":"addClass"]("in-between")}},nolocation:function(t){(this.isNewParticle?this.block:this.original).style({transform:"translate(0, 0)"}),this.placeholder&&this.placeholder.remove(),this.targetLevel=void 0;var e=t.type.match(/^touch/i)?document.elementFromPoint(t.touches.item(0).clientX,t.touches.item(0).clientY):t.target;!this.isNewParticle&&this.itemID.match(/__(module|particle|widget)(-[a-z0-9]{5})?$/i)&&(e=a(e),e.matches(this.eraser.element)||this.eraser.element.find(e)?(this.dragdrop.removeElement=!0,this.eraser.over()):(this.dragdrop.removeElement=!1,this.eraser.out()))},removeElement:function(t,e){this.dragdrop.removeElement=!1;var n={opacity:0};e.animate(n,{duration:"150ms"}),"column"==this.type&&this.root.search(".g-block > *").style({"pointer-events":"none"}),this.eraser.hide(),this.dragdrop.DRAG_EVENTS.EVENTS.MOVE.forEach(r(function(t){a("body").off(t,this.dragdrop.bound("move"))},this)),this.dragdrop.DRAG_EVENTS.EVENTS.STOP.forEach(r(function(t){a("body").off(t,this.dragdrop.bound("deferStop"))},this));var i=this.block,o=i.parent("[data-mm-base]").data("mm-base"),s=(i.parent("[data-mm-id]").data("mm-id").match(/\d+$/)||[0])[0],l=m(i.parent().children("[data-mm-id]:not(.original-placeholder)"),i[0]);delete this.items[this.itemID],this.ordering[o][s].splice(l,1),this.block.remove(),this.original.remove(),this.root.removeClass("moving"),this.root.find(".submenu-items")&&(this.root.find(".submenu-items").children()||this.root.find(".submenu-items").text("")),this.emit("dragEnd",this.map,"reorder")},stop:function(t,e,n){e=a(e);var i=a(this.dragdrop.lastOvered);if(i&&i.matches(this.eraser.element.find(".trash-zone")))return void this.eraser.hide();if(e&&n.removeClass("active"),"column"==this.type&&this.root.search(".g-block > *").attribute("style",null),!this.dragdrop.matched&&!this.addNewItem)return this.placeholder&&this.placeholder.remove(),this.type=void 0,this.targetLevel=!1,this.isParticle=void 0,void this.eraser.hide();var r=this.placeholder.parent();if(!r)return this.type=void 0,this.targetLevel=!1,void(this.isParticle=void 0);this.addNewItem&&this.block.attribute("style",null).removeClass("active");var o=this.block.parent();if(this.eraser.hide(),this.original&&(this.isNewParticle?this.original.attribute("style",null).removeClass("original-placeholder"):this.original.remove()),this.block.after(this.placeholder),this.placeholder.remove(),this.itemTo=this.block.parent("[data-mm-id]"),this.currentLevel=this.itemLevel,this.wasActive&&n.addClass("active"),this.isParticle){var s=f(this.itemID.split("/")),l=e||this.itemTo,c=l[e&&!e.hasClass("g-block")?"parent":"find"]("[data-mm-base]").data("mm-base");this.itemID=c?c+"/"+s:s,this.itemLevel=this.targetLevel,this.block.data("mm-id",this.itemID).data("mm-level",this.targetLevel)}var u,d,h=this.itemID.split("/");if(h.splice(this.itemLevel-1),h=h.join("/"),this.itemFrom||this.itemTo){var m=this.itemFrom==this.itemTo?[this.itemFrom]:[this.itemFrom,this.itemTo];if(m.forEach(function(t){if(t){if(u=t.search("[data-mm-id]"),d=Number(this.block.data("mm-level")>2?0:(t.data("mm-id").match(/\d+$/)||[0])[0]),!u)return void(this.ordering[h][d]=[]);u=u.map(function(t){return a(t).data("mm-id")}),this.ordering[h]||(this.ordering[h]=[]),this.ordering[h][d]=u}},this),c=this.itemFrom?null!==this.itemFrom.attribute("data-mm-base")?this.itemFrom:this.itemFrom.find("[data-mm-base]"):null,this.isParticle&&c&&this.targetLevel!=this.currentLevel){var g=(this.itemFrom.data("mm-id").match(/\d+$/)||[0])[0],v=c.data("mm-base")||"",b=p([v,s].join("/"),["/"]);this.ordering[v][g].splice(this.ParticleIndex,1),this.items[this.itemID]=this.items[b],delete this.items[b]}}if(!this.itemFrom&&!this.itemTo&&!this.isParticle){var y=[],w=a(".g-toplevel [data-mm-id].active").data("mm-id");u=o.search("> [data-mm-id]"),u.forEach(function(t,e){t=a(t);var n=t.data("mm-id"),i=Number((n.match(/\d+$/)||[0])[0]);t.data("mm-id",n.replace(/\d+$/,e)),y.push(this.ordering[w][i])},this),this.ordering[w]=y}o.children()||o.empty();var x=this.block.parent(".submenu-selector");x&&this.resizer.updateItemSizes(x.search("> [data-mm-id]")),this.emit("dragEnd",this.map,"reorder")},stopAnimation:function(){var t=null;"column"==this.type&&(t=this.resizer.getSize(this.block)),this.root&&this.root.removeClass("moving"),this.block&&(this.block.attribute("style",null),t&&this.block.style("flex","0 1 "+t+" %")),this.original&&(this.isNewParticle&&(this.dragdrop.matched||this.targetLevel)?this.original.attribute("style",null).removeClass("original-placeholder"):this.original.remove()),!this.wasActive&&this.block&&this.block.removeClass("active")}}));e.exports=v},{"../ui/drag.drop":50,"../ui/eraser":52,"../utils/elements.utils":64,"./drag.resizer":32,"elements/zen":135,"mout/array/every":167,"mout/array/indexOf":173,"mout/array/last":177,"mout/function/bind":190,"mout/lang/deepClone":198,"mout/lang/isArray":201,"mout/lang/isObject":206,"mout/object/equals":225,"mout/object/get":231,"mout/string/ltrim":261,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298}],36:[function(t,e,n){(function(n){"use strict";var i=t("elements"),a=t("elements/domready"),r=t("elements/zen"),o=t("../fields/submit"),s=t("../ui").modal,l=t("../ui").toastr,c=t("../ui/eraser"),u=t("agent"),d=t("mout/array/indexOf"),h=t("sortablejs"),p=(t("mout/string/trim"),t("mout/object/size")),f=t("../utils/get-ajax-url").parse,m=t("../utils/get-ajax-suffix"),g=t("../utils/get-outline").getOutlineNameById,v=t("../utils/translate"),b='[name="page[head][atoms][_json]"]',y=[{name:"atoms",pull:"clone",put:!1},{name:"atoms",pull:!0,put:!0},{name:"atoms",pull:!1,put:!1}],w={eraser:null,lists:{picker:null,items:null},serialize:function(){var t=[],e=i(".atoms-list"),n=e.search("[data-atom-picked]");return n?(n.forEach(function(e){e=i(e),t.push(JSON.parse(e.data("atom-picked")))}),JSON.stringify(t).replace(/\//g,"\\/")):(e.empty(),"[]")},attachEraser:function(){return w.eraser?void(w.eraser.element=i("[data-atoms-erase]")):void(w.eraser=new c("[data-atoms-erase]"))},createSortables:function(t){var e,n;w.attachEraser(),y.forEach(function(a,r){e=r?1==r?".atoms-list":"#trash":".atoms-picker",e=i(e),n=h.create(e[0],{sort:1==r,filter:"[data-atom-ignore]",group:a,scroll:!1,forceFallback:!0,animation:100,onStart:function(t){w.attachEraser();var e=i(t.item);e.addClass("atom-dragging"),i(t.from).hasClass("atoms-list")&&w.eraser.show()},onEnd:function(t){var e=i(t.item),n=i("#trash"),a=i(this.originalEvent.target),r=!1;if("touchend"===this.originalEvent.type){var o=n[0].getBoundingClientRect(),s=this.originalEvent,l=(s.pageY||s.changedTouches[0].pageY)-window.scrollY;r=l<=o.height}return a.matches("#trash")||a.parent("#trash")||r?(e.remove(),w.eraser.hide(),void this.options.onSort()):(e.removeClass("atom-dragging"),void(i(t.from).hasClass("atoms-list")&&w.eraser.hide()))},onSort:function(){var t=w.serialize(),e=i(b);if(!e)throw new Error('Field "'+b+'" not found in the DOM.');
e.value(t),i("body").emit("change",{target:e})},onOver:function(t){if(i(t.from).matches(".atoms-list")){var e=i(t.newIndex);e.matches("#trash")||e.parent("#trash")?w.eraser.over():w.eraser.out()}}}),w.lists[r?"items":"picker"]=n,1==r&&(t.SimpleSort=n)})}},x=function(){var t=i("body");t.delegate("click",".atoms-list [data-atom-picked] .config-cog",function(e,a){e&&e.preventDefault&&e.preventDefault();var c=a.parent("ul"),h=i(b),y=h.value(),w=c.search("> [data-atom-picked]"),x=a.parent("[data-atom-picked]"),k=x.data("atom-picked");s.open({content:v("GANTRY5_PLATFORM_JS_LOADING"),method:"post",data:{data:k},overlayClickToClose:!1,remote:f(a.attribute("href")+m()),remoteLoaded:function(e,a){var c=a.elements.content.find("form"),b=r("div").html(e.body.html).find("form"),k=a.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),S=JSON.parse(y);if(s.getAll().length>1){var C=a.elements.content.search("[data-apply-and-save]");C&&C.remove()}return!c&&!b||!k||void k.on("click",function(e){e.preventDefault();var r=i(e.currentTarget);r.hideIndicator(),r.showIndicator();var c=a.elements.content.find("form")[0].elements,y=o(c,a.elements.content);return y.invalid.length?(r.hideIndicator(),r.showIndicator("fa fa-fw fa-exclamation-triangle"),void l.error(v("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),v("GANTRY5_PLATFORM_JS_INVALID_FIELDS"))):void u(b.attribute("method"),f(b.attribute("action")+m()),y.valid.join("&")||{},function(e,a){if(a.body.success){var o=d(w,x[0]);S[o]=a.body.item,h.value(JSON.stringify(S).replace(/\//g,"\\/")),x.find(".atom-title").text(S[o].title),x.data("atom-picked",JSON.stringify(S[o]).replace(/\//g,"\\/"));var c=Number(S[o].attributes.enabled),u=a.body.item.inherit&&p(a.body.item.inherit);if(x[c?"removeClass":"addClass"]("atom-disabled"),x[u?"addClass":"removeClass"]("g-inheriting"),x.attribute("title",c?"":v("GANTRY5_PLATFORM_JS_LM_DISABLED_PARTICLE","atom")),x.data("tip",null),u){var f=a.body.item.inherit,m=g(f?f.outline:null),b=f.atom||"",y=(f.include||[]).join(", ");x.data("tip",v("GANTRY5_PLATFORM_INHERITING_FROM_X","<strong>"+m+"</strong>")+"<br />ID: "+b+"<br />Replace: "+y)}if(t.emit("change",{target:h}),n.G5.tips.reload(),null!==r.data("apply-and-save")){var k=i("body").find(".button-save");k&&t.emit("click",{target:k})}s.close(),l.success(v("GANTRY5_PLATFORM_JS_GENERIC_SETTINGS_APPLIED","Atom"),v("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else s.open({content:a.body.html||a.body,afterOpen:function(t){a.body.html||t.style({width:"90%"})}});r.hideIndicator()})})}})})},k=function(t){t&&(t.SimpleSort||w.createSortables(t))};a(function(){var t=i("#atoms");i("body").delegate("mouseover","#atoms",function(t,e){k(e)}),k(t),x()}),e.exports=w}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../fields/submit":8,"../ui":53,"../ui/eraser":52,"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,"../utils/get-outline":70,"../utils/translate":76,agent:78,elements:111,"elements/domready":109,"elements/zen":135,"mout/array/indexOf":173,"mout/object/size":240,"mout/string/trim":270,sortablejs:314}],37:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("elements"),r=t("elements/zen"),o=t("../../fields/submit"),s=t("../../ui").modal,l=t("../../ui").toastr,c=t("agent"),u=t("mout/array/last"),d=t("mout/array/indexOf"),h=t("sortablejs"),p=t("mout/string/trim"),f=t("../../utils/get-ajax-url").parse,m=t("../../utils/get-ajax-suffix"),g=t("../../utils/translate");t("elements/insertion"),i(function(){var t=a("body"),e=function(e,n){"enter"==n&&this.CollectionNew&&(this.CollectionNew=!1,t.emit("click",{target:this.parent(".settings-param").find("[data-collection-addnew]")})),"esc"==n&&this.CollectionNew&&(this.CollectionNew=!1,t.emit("click",{target:this.parent("[data-collection-item]").find("[data-collection-remove]")}))},n=function(e){var n=e||a(".collection-list ul");n&&n.forEach(function(e){e=a(e),e.SimpleSort=h.create(e[0],{handle:".fa-reorder",filter:"[data-collection-nosort]",scroll:!1,animation:150,onStart:function(){a(this.el).addClass("collection-sorting")},onEnd:function(e){var n=a(this.el);if(n.removeClass("collection-sorting"),e.oldIndex!==e.newIndex){var i=n.parent(".settings-param").find("[data-collection-data]"),r=i.value();r=JSON.parse(r),r.splice(e.newIndex,0,r.splice(e.oldIndex,1)[0]),i.value(JSON.stringify(r)),t.emit("change",{target:i})}}})})};n(),t.delegate("mouseover",".collection-list ul",function(t,e){e.SimpleSort||n(e)}),t.delegate("click","[data-collection-addnew]",function(n,i){var r,o,s=i.parent(".settings-param"),l=s.find("ul"),c=l.parent("[data-field-name]").find("[data-collection-editall]"),d=s.find("[data-collection-data]"),h=s.find("[data-collection-template]"),p=l.search("> [data-collection-item]")||[],f=a(u(p)),m=a(h[0].cloneNode(!0));f?m.after(f):m.top(l),p.length&&c&&c.style("display","inline-block"),r=m.find("a"),o=r.find("[data-title-editable]");var g=new RegExp("%id%","g");r.href(r.href().replace(g,p.length)),m.attribute("style",null).data("collection-item",m.data("collection-template")),m.attribute("data-collection-template",null),m.attribute("data-collection-nosort",null),o.CollectionNew=!0,t.emit("click",{target:r.siblings("[data-title-edit]")}),o.on("title-edit-exit",e),t.emit("change",{target:d})}),t.delegate("blur","[data-collection-item] [data-title-editable]",function(e,n){var i=p(n.text()),a=n.parent("[data-collection-item]"),r=a.data("collection-item"),o=n.parent("ul").search("> [data-collection-item]"),s=n.parent(".settings-param").find("[data-collection-data]"),l=s.value(),c=d(o,a[0]);c!=-1&&(l=JSON.parse(l),l[c]||l.splice(c,0,{}),l[c][r]=i,s.value(JSON.stringify(l)),t.emit("change",{target:s}))},!0),t.delegate("click","[data-collection-remove]",function(e,n){e&&e.preventDefault&&e.preventDefault();var i=n.parent("[data-collection-item]"),a=n.parent("ul"),r=a.parent("[data-field-name]").find("[data-collection-editall]"),o=a.search("> [data-collection-item]"),s=d(o,i[0]),l=n.parent(".settings-param").find("[data-collection-data]"),c=l.value();c=JSON.parse(c),c.splice(s,1),l.value(JSON.stringify(c)),i.remove(),o.length<=2&&r&&r.style("display","none"),t.emit("change",{target:l})}),t.delegate("click","[data-collection-duplicate]",function(e,n){e&&e.preventDefault&&e.preventDefault();var i=n.parent(".settings-param"),r=n.parent("[data-collection-item]"),o=n.parent("ul"),s=o.parent("[data-field-name]").find("[data-collection-editall]"),l=i.find("[data-collection-template]").find("a").href(),c=o.search("> [data-collection-item]"),u=d(c,r[0]),h=a(r[0].cloneNode(!0)).after(r),p=n.parent(".settings-param").find("[data-collection-data]"),f=p.value(),m=new RegExp("%id%","g");h.find("a").href(l.replace(m,c.length+1)),f=JSON.parse(f),f.splice(u,0,f[u]),p.value(JSON.stringify(f)),c.length>=1&&s.style("display","inline-block"),t.emit("change",{target:p})}),t.delegate("click","[data-collection-item] a",function(t,e){e.find("[contenteditable]")&&(t.preventDefault(),t.stopPropagation())}),t.delegate("click","[data-collection-item] .config-cog, [data-collection-editall]",function(e,n){e&&e.preventDefault&&e.preventDefault();var i=n.find("[data-title-editable]");if(i&&i.attribute("contenteditable"))return e.stopPropagation(),!1;var u=null!==n.data("collection-editall"),h=n.parent(".settings-param"),p=h.find("[data-collection-data]"),v=p.value(),b=n.parent("[data-collection-item]"),y=h.search("ul > [data-collection-item]"),w={data:u?v:JSON.stringify(JSON.parse(v)[d(y,b[0])])};s.open({content:g("GANTRY5_PLATFORM_JS_LOADING"),method:"post",className:"g5-dialog-theme-default g5-modal-collection g5-modal-collection-"+(u?"editall":"single"),data:w,overlayClickToClose:!1,remote:f(n.attribute("href")+m()),remoteLoaded:function(e,i){if(!e.body.success)return void s.enableCloseByOverlay();var u=i.elements.content.find("form"),h=r("div").html(e.body.html).find("form"),w=i.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),x=JSON.parse(v);if(s.getAll().length>1){var k=i.elements.content.search("[data-apply-and-save]");k&&k.remove()}return 1==x.length,!u&&!h||!w||void w.on("click",function(e){e.preventDefault();var r=a(e.currentTarget);r.hideIndicator(),r.showIndicator();var u=o(h[0].elements,i.elements.content);return u.invalid.length?(r.hideIndicator(),r.showIndicator("fa fa-fw fa-exclamation-triangle"),void l.error(g("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),g("GANTRY5_PLATFORM_JS_INVALID_FIELDS"))):void c(h.attribute("method"),f(h.attribute("action")+m()),u.valid.join("&")||{},function(e,i){if(i.body.success){if(b?x[d(y,b[0])]=i.body.data:x=i.body.data,p.value(JSON.stringify(x)),t.emit("change",{target:p}),n.parent(".settings-param-field").search("ul > [data-collection-item]").forEach(function(t,e){t=a(t);var n=t.find("[data-title-editable]"),i=x[e][t.data("collection-item")];n.data("title-editable",i).text(i)}),null!==r.data("apply-and-save")){var o=a("body").find(".button-save");o&&t.emit("click",{target:o})}s.close(),l.success(g("GANTRY5_PLATFORM_JS_GENERIC_SETTINGS_APPLIED","Collection"),g("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else s.open({content:i.body.html||i.body,afterOpen:function(t){i.body.html||t.style({width:"90%"})}});r.hideIndicator()})})}})})}),e.exports={}},{"../../fields/submit":8,"../../ui":53,"../../utils/get-ajax-suffix":68,"../../utils/get-ajax-url":69,"../../utils/translate":76,agent:78,elements:111,"elements/domready":109,"elements/insertion":112,"elements/zen":135,"mout/array/indexOf":173,"mout/array/last":177,"mout/string/trim":270,sortablejs:314}],38:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime/emitter"),r=t("prime-util/prime/bound"),o=t("prime-util/prime/options"),s=t("elements"),l=t("elements/domready"),c=t("elements/zen"),u=t("../../ui/drag.events"),d=t("mout/collection/forEach"),h=t("mout/function/bind"),p=t("mout/math/clamp"),f=navigator.userAgent.toLowerCase().indexOf("firefox")>-1,m=u.EVENTS.START,g=u.EVENTS.MOVE,v=u.EVENTS.STOP,b=f?"focus":"focusin",y=new i({mixin:[o,r],inherits:a,options:{},constructor:function(t){this.setOptions(t),this.built=!1,this.attach()},attach:function(){var t=s("body");m.forEach(h(function(e){t.delegate(e,"#g5-container .g-colorpicker i",this.bound("iconClick"))},this)),t.delegate(b,"#g5-container .g-colorpicker input",this.bound("show"),!0),t.delegate("keydown","#g5-container .g-colorpicker input",h(function(t,e){switch(t.keyCode){case 9:this.hide();break;case 13:case 27:this.hide(),e[0].blur()}return!0},this)),t.delegate("keyup","#g5-container .g-colorpicker input",h(function(t,e){return this.updateFromInput(!0,e),!0},this)),t.delegate("paste","#g5-container .g-colorpicker input",h(function(t,e){setTimeout(h(function(){this.updateFromInput(!0,e)},this),1)},this))},show:function(t,e){var n=s("body");this.built||this.build(),this.element=e,this.reposition(),this.wrapper.addClass("cp-visible"),this.updateFromInput(),g.forEach(h(function(t){n.on(t,this.bound("bodyMove"))},this)),m.forEach(h(function(t){this.wrapper.delegate(t,".cp-grid, .cp-slider, .cp-opacity-slider",this.bound("bodyDown")),n.on(t,this.bound("bodyClick"))},this)),v.forEach(h(function(t){n.on(t,this.bound("targetReset"))},this))},hide:function(){var t=s("body");this.built&&(this.wrapper.removeClass("cp-visible"),g.forEach(h(function(e){t.off(e,this.bound("bodyMove"))},this)),m.forEach(h(function(e){this.wrapper.undelegate(e,".cp-grid, .cp-slider, .cp-opacity-slider",this.bound("bodyDown")),t.off(e,this.bound("bodyClick"))},this)),v.forEach(h(function(e){t.off(e,this.bound("targetReset"))},this)))},iconClick:function(t,e){t.preventDefault();var n=s(e).sibling("input");n[0].focus(),this.show(t,n)},bodyMove:function(t){t.preventDefault(),this.target&&this.move(this.target,t)},bodyClick:function(t){var e=s(t.target);e.parent(".cp-wrapper")||e.parent(".g-colorpicker")||this.hide()},bodyDown:function(t,e){t.preventDefault(),this.target=e,this.move(this.target,t,!0)},targetReset:function(t){t.preventDefault(),this.target=null},move:function(t,e){var n,i,a,r,o=this.element,s=t.find(".cp-picker"),l=t[0].getBoundingClientRect(),c=l.left+window.scrollX,u=l.top+window.scrollY,d=Math.round((e?e.pageX:0)-c),h=Math.round((e?e.pageY:0)-u);e&&e.changedTouches&&(d=(e.changedTouches?e.changedTouches[0].pageX:0)-c,h=(e.changedTouches?e.changedTouches[0].pageY:0)-u),e&&e.manualOpacity&&(h=l.height),d<0&&(d=0),h<0&&(h=0),d>l.width&&(d=l.width),h>l.height&&(h=l.height),t.parent(".cp-mode-wheel")&&s.parent(".cp-grid")&&(n=75-d,i=75-h,a=Math.sqrt(n*n+i*i),r=Math.atan2(i,n),r<0&&(r+=2*Math.PI),a>75&&(d=75-75*Math.cos(r),h=75-75*Math.sin(r)),d=Math.round(d),h=Math.round(h)),t.hasClass("cp-grid")?(s.style({top:h,left:d}),this.updateFromPicker(o,t)):(s.style({top:h}),this.updateFromPicker(o,t))},build:function(){this.wrapper=c("div.cp-wrapper.cp-with-opacity.cp-mode-hue"),this.slider=c("div.cp-slider.cp-sprite").bottom(this.wrapper).appendChild(c("div.cp-picker")),this.opacitySlider=c("div.cp-opacity-slider.cp-sprite").bottom(this.wrapper).appendChild(c("div.cp-picker")),this.grid=c("div.cp-grid.cp-sprite").bottom(this.wrapper).appendChild(c("div.cp-grid-inner")).appendChild(c("div.cp-picker")),c("div").bottom(this.grid.find(".cp-picker"));var t=c("div.cp-tabs").bottom(this.wrapper);this.tabs={hue:c("div.cp-tab-hue.active").text("HUE").bottom(t),brightness:c("div.cp-tab-brightness").text("BRI").bottom(t),saturation:c("div.cp-tab-saturation").text("SAT").bottom(t),wheel:c("div.cp-tab-wheel").text("WHEEL").bottom(t),transparent:c("div.cp-tab-transp").text("TRANSPARENT").bottom(t)},m.forEach(h(function(e){t.delegate(e,"> div",h(function(e,n){if(n==this.tabs.transparent){this.opacity=0;var i=this.opacitySlider.position().height;return this.opacitySlider.find(".cp-picker").style({top:p(i-i*this.opacity,0,i)}),void this.move(this.opacitySlider,{manualOpacity:!0})}var a=t.find(".active"),r=a.attribute("class").replace(/\s|active|cp-tab-/g,""),o=n.attribute("class").replace(/\s|active|cp-tab-/g,"");this.wrapper.removeClass("cp-mode-"+r).addClass("cp-mode-"+o),a.removeClass("active"),n.addClass("active"),this.mode=o,this.updateFromInput()},this))},this)),this.wrapper.bottom("#g5-container"),this.built=!0,this.mode="hue"},updateFromInput:function(t,e){e=s(e)||this.element;var n,i,a=e.value(),r=a.replace(/\s/g,"").match(/^rgba?\([0-9]{1,3},[0-9]{1,3},[0-9]{1,3},(.+)\)/);if(a=S(a)||a,r=r?p(r[1],0,1):1,(n=w(a))||(n="#ffffff"),i=T(n),this.built){this.opacity=Math.max(r,0);var o=this.opacitySlider.position().height;this.opacitySlider.find(".cp-picker").style({top:p(o-o*this.opacity,0,o)});var l,c,u,d,h=this.grid.position().height,f=this.grid.position().width;switch(o=this.slider.position().height,this.mode){case"wheel":l=p(Math.ceil(.75*i.s),0,h/2),c=i.h*Math.PI/180,u=p(75-Math.cos(c)*l,0,f),d=p(75-Math.sin(c)*l,0,h),this.grid.style({backgroundColor:"transparent"}).find(".cp-picker").style({top:d,left:u}),d=150-i.b/(100/h),""===n&&(d=0),this.slider.find(".cp-picker").style({top:d}),this.slider.style({backgroundColor:C({h:i.h,s:i.s,b:100})});break;case"saturation":u=p(5*i.h/12,0,150),d=p(h-Math.ceil(i.b/(100/h)),0,h),this.grid.find(".cp-picker").style({top:d,left:u}),d=p(o-i.s*(o/100),0,o),this.slider.find(".cp-picker").style({top:d}),this.slider.style({backgroundColor:C({h:i.h,s:100,b:i.b})}),this.grid.find(".cp-grid-inner").style({opacity:i.s/100});break;case"brightness":u=p(5*i.h/12,0,150),d=p(h-Math.ceil(i.s/(100/h)),0,h),this.grid.find(".cp-picker").style({top:d,left:u}),d=p(o-i.b*(o/100),0,o),this.slider.find(".cp-picker").style({top:d}),this.slider.style({backgroundColor:C({h:i.h,s:i.s,b:100})}),this.grid.find(".cp-grid-inner").style({opacity:1-i.b/100});break;case"hue":default:u=p(Math.ceil(i.s/(100/f)),0,f),d=p(h-Math.ceil(i.b/(100/h)),0,h),this.grid.find(".cp-picker").style({top:d,left:u}),d=p(o-i.h/(360/o),0,o),this.slider.find(".cp-picker").style({top:d}),this.grid.style({backgroundColor:C({h:i.h,s:100,b:100})})}}t||e.value(this.getValue(n)),this.emit("change",e,n,r)},updateFromPicker:function(t,e){var n,i,a,r,o,s,l,c,u=function(t,e){var n,i;return t.length&&e?(n=t[0].getBoundingClientRect().left,i=t[0].getBoundingClientRect().top,{x:n-e[0].getBoundingClientRect().left+t[0].offsetWidth/2,y:i-e[0].getBoundingClientRect().top+t[0].offsetHeight/2}):null},d=this.wrapper.find(".cp-grid"),h=this.wrapper.find(".cp-slider"),f=this.wrapper.find(".cp-opacity-slider"),m=d.find(".cp-picker"),g=h.find(".cp-picker"),v=f.find(".cp-picker"),b=u(m,d),y=u(g,h),x=u(v,f),k=d[0].getBoundingClientRect().width,T=d[0].getBoundingClientRect().height,E=h[0].getBoundingClientRect().height,O=f[0].getBoundingClientRect().height,I=this.element.value();if(I=S(I)||I,(n=w(I))||(n="#ffffff"),e.hasClass("cp-grid")||e.hasClass("cp-slider"))switch(this.mode){case"wheel":o=k/2-b.x,s=T/2-b.y,l=Math.sqrt(o*o+s*s),c=Math.atan2(s,o),c<0&&(c+=2*Math.PI),l>75&&(l=75,b.x=69-75*Math.cos(c),b.y=69-75*Math.sin(c)),a=p(l/.75,0,100),i=p(180*c/Math.PI,0,360),r=p(100-Math.floor(y.y*(100/E)),0,100),n=C({h:i,s:a,b:r}),h.style({backgroundColor:C({h:i,s:a,b:100})});break;case"saturation":i=p(parseInt(b.x*(360/k),10),0,360),a=p(100-Math.floor(y.y*(100/E)),0,100),r=p(100-Math.floor(b.y*(100/T)),0,100),n=C({h:i,s:a,b:r}),h.style({backgroundColor:C({h:i,s:100,b:r})}),d.find(".cp-grid-inner").style({opacity:a/100});break;case"brightness":i=p(parseInt(b.x*(360/k),10),0,360),a=p(100-Math.floor(b.y*(100/T)),0,100),r=p(100-Math.floor(y.y*(100/E)),0,100),n=C({h:i,s:a,b:r}),h.style({backgroundColor:C({h:i,s:a,b:100})}),d.find(".cp-grid-inner").style({opacity:1-r/100});break;default:i=p(360-parseInt(y.y*(360/E),10),0,360),a=p(Math.floor(b.x*(100/k)),0,100),r=p(100-Math.floor(b.y*(100/T)),0,100),n=C({h:i,s:a,b:r}),d.style({backgroundColor:C({h:i,s:100,b:100})})}e.hasClass("cp-opacity-slider")&&(this.opacity=Math.max(parseFloat(1-x.y/O).toFixed(2),0)),t.value(this.getValue(n)),this.emit("change",this.element,n,this.opacity)},reposition:function(){var t=this.element[0].getBoundingClientRect(),e=s("#g5-container")[0].getBoundingClientRect();this.wrapper.style({top:t.top+t.height-e.top,left:t.left-e.left})},getValue:function(t){if(1==this.opacity)return t;var e=O(t);return"rgba("+e.r+", "+e.g+", "+e.b+", "+this.opacity+")"}}),w=function(t){return t=t.replace(/[^A-F0-9]/gi,""),3!==t.length&&6!==t.length?"":(3===t.length&&(t=t[0]+t[0]+t[1]+t[1]+t[2]+t[2]),"#"+t.toLowerCase())},x=function(t){var e={},n=Math.round(t.h),i=Math.round(255*t.s/100),a=Math.round(255*t.b/100);if(0===i)e.r=e.g=e.b=a;else{var r=a,o=(255-i)*a/255,s=(r-o)*(n%60)/60;360===n&&(n=0),n<60?(e.r=r,e.b=o,e.g=o+s):n<120?(e.g=r,e.b=o,e.r=r-s):n<180?(e.g=r,e.r=o,e.b=o+s):n<240?(e.b=r,e.r=o,e.g=r-s):n<300?(e.b=r,e.g=o,e.r=o+s):n<360?(e.r=r,e.g=o,e.b=r-s):(e.r=0,e.g=0,e.b=0)}return{r:Math.round(e.r),g:Math.round(e.g),b:Math.round(e.b)}},k=function(t){var e=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return d(e,function(t,n){1===t.length&&(e[n]="0"+t)}),"#"+e.join("")},S=function(t){return t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),t&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""},C=function(t){return k(x(t))},T=function(t){var e=E(O(t));return 0===e.s&&(e.h=360),e},E=function(t){var e={h:0,s:0,b:0},n=Math.min(t.r,t.g,t.b),i=Math.max(t.r,t.g,t.b),a=i-n;return e.b=i,e.s=0!==i?255*a/i:0,0!==e.s?t.r===i?e.h=(t.g-t.b)/a:t.g===i?e.h=2+(t.b-t.r)/a:e.h=4+(t.r-t.g)/a:e.h=-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},O=function(t){return t=parseInt(t.indexOf("#")>-1?t.substring(1):t,16),{r:t>>16,g:(65280&t)>>8,b:255&t}};l(function(){var t=new y,e=s("body");t.on("change",function(t,n,i){clearTimeout(this.timer);var a=O(n),r=(299*a.r+587*a.g+114*a.b)/1e3>=128?"dark":"light",o="dark"==r||!i||i<.35;if(i<1){var s="rgba("+a.r+", "+a.g+", "+a.b+", "+i+")";t.style({backgroundColor:s})}else t.style({backgroundColor:n});t.parent(".g-colorpicker")[o?"removeClass":"addClass"]("light-text"),this.timer=setTimeout(function(){t.emit("input"),e.emit("input",{target:t})},150)})}),e.exports=y},{"../../ui/drag.events":51,elements:111,"elements/domready":109,"elements/zen":135,"mout/collection/forEach":187,"mout/function/bind":190,"mout/math/clamp":214,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298}],39:[function(t,e,n){(function(n){"use strict";var i=t("../../utils/elements.utils"),a=t("prime"),r=t("agent"),o=t("elements/zen"),s=t("elements/domready"),l=t("mout/function/bind"),c=(t("mout/string/rtrim"),t("mout/lang/deepClone")),u=t("mout/object/deepFillIn"),d=t("../../ui").modal,h=t("../../utils/get-ajax-suffix"),p=t("../../utils/get-ajax-url").parse,f=t("../../utils/get-ajax-url").global,m=t("../../utils/translate"),g=t("dropzone"),v=new a({constructor:function(t){var e=t.data("g5-filepicker");this.data=!!e&&JSON.parse(e),this.data&&!this.data.value&&(this.data.value=i(this.data.field).value()),this.colors={error:"#D84747",success:"#9ADF87",small:"#aaaaaa",gradient:["#9e38eb","#4e68fc"]}},open:function(){this.data&&(this.data.value=i(this.data.field).value()),d.open({method:"post",data:this.data,content:m("GANTRY5_PLATFORM_JS_LOADING"),className:"g5-dialog-theme-default g5-modal-filepicker",remote:p(f("filepicker")+h()),remoteLoaded:l(this.loaded,this),afterClose:l(function(){this.dropzone&&this.dropzone.destroy()},this)})},getPath:function(){var t,e,n=this.content.search(".g-folders .active");return n?(t=i(n[n.length-1]),e=JSON.parse(t.data("folder")).pathname,e.replace(/\/$/,"")+"/"):null},getPreviewTemplate:function(){var t=o("li[data-file]"),e=(o("span.g-file-delete[data-g-file-delete][data-dz-remove]").html('<i class="fa fa-fw fa-trash-o"></i>').bottom(t),o("div.g-thumb[data-dz-thumbnail]").bottom(t));o("span.g-file-name[data-dz-name]").bottom(t),o("span.g-file-size[data-dz-size]").bottom(t),o("span.g-file-mtime[data-dz-mtime]").bottom(t);o("span.g-file-progress[data-file-uploadprogress]").html('<span class="g-file-progress-text"></span>').bottom(t),o("div").bottom(e),t.bottom("body");var n=t[0].outerHTML;return t.remove(),n},loaded:function(t,e){var a=e.elements.content,s=(a.search(".g-bookmark"),a.find(".g-files")),v=c(this.data),b=this.colors,y=this;this.content=a,s&&(this.dropzone=new g("body",{previewTemplate:this.getPreviewTemplate(),previewsContainer:s.find("ul:not(.g-list-labels)")[0],thumbnailWidth:100,thumbnailHeight:100,clickable:"[data-upload]",acceptedFiles:this.acceptedFiles(this.data.filter)||"",accept:l(function(t,e){this.data.filter?t.name.match(this.data.filter)?e():e("<code>"+t.name+"</code> "+m("GANTRY5_PLATFORM_JS_FILTER_MISMATCH")+": <br />  <code>"+this.data.filter+"</code>"):e()},this),url:l(function(t){return p(f("filepicker/upload/"+n.btoa(encodeURIComponent(this.getPath()+t[0].name)))+h())},this)}),this.dropzone.on("thumbnail",function(t,e){var n=t.name.split(".");n=n.length&&1!=n.length?n.reverse()[0]:"-",i(t.previewElement).addClass("g-image g-image-"+n.toLowerCase()).find("[data-dz-thumbnail] > div").attribute("style","background-image: url("+encodeURI(e)+");")}),this.dropzone.on("addedfile",function(t){var e=i(t.previewElement),n=e.find("[data-file-uploadprogress]"),a=s.hasClass("g-filemode-list"),r={value:0,animation:!1,insertLocation:"bottom"},o=t.name.split(".");o=o.length&&1!=o.length?o.reverse()[0]:"-",t.type.match(/image.*/)?e.find(".g-thumb").addClass("g-image g-image-"+o.toLowerCase()):e.find(".g-thumb").text(o),r=u(a?{size:20,thickness:10,fill:{color:b.small,gradient:!1}}:{size:50,thickness:"auto",fill:{gradient:b.gradient,color:!1}},r),e.addClass("g-file-uploading"),n.progresser(r),n.attribute("title",m("GANTRY5_PLATFORM_JS_PROCESSING")).find(".g-file-progress-text").html("&bull;&bull;&bull;").attribute("title",m("GANTRY5_PLATFORM_JS_PROCESSING"))}).on("processing",function(t){var e=i(t.previewElement).find("[data-file-uploadprogress]");e.find(".g-file-progress-text").text("0%").attribute("title","0%")}).on("sending",function(t,e,n){var a=i(t.previewElement).find("[data-file-uploadprogress]");a.attribute("title","0%").find(".g-file-progress-text").text("0%").attribute("title","0%")}).on("uploadprogress",function(t,e,n){var a=i(t.previewElement).find("[data-file-uploadprogress]");a.progresser({value:e/100}),a.attribute("title",Math.round(e)+"%").find(".g-file-progress-text").text(Math.round(e)+"%").attribute("title",Math.round(e)+"%")}).on("complete",function(t){y.refreshFiles(a)}).on("error",function(t,e){var n=i(t.previewElement),a=n.find("[data-file-uploadprogress]"),r=n.find(".g-file-progress-text"),o=s.hasClass("g-filemode-list");n.addClass("g-file-error"),a.title("Error").progresser({fill:{color:b.error,gradient:!1},value:1,thickness:o?10:25}),r.title("Error").html('<i class="fa fa-exclamation"></i>').parent("[data-file-uploadprogress]").popover({content:e.html?e.html:e.error&&e.error.message?e.error.message:e,placement:"auto",trigger:"mouse",style:"filepicker, above-modal",width:"auto",targetEvents:!1})}).on("success",function(t,e,n){var a=i(t.previewElement),r=a.find("[data-file-uploadprogress]"),o=a.find(".g-file-mtime"),c=a.find(".g-file-progress-text"),u=a.find(".g-thumb"),d=s.hasClass("g-filemode-list");r.progresser({fill:{color:b.success,gradient:!1},value:1,thickness:d?10:25}),c.html('<i class="fa fa-check"></i>'),setTimeout(l(function(){r.animate({opacity:0},{duration:500}),u.animate({opacity:1},{duration:500,callback:function(){a.data("file",JSON.stringify(e.finfo)).data("file-url",e.url).removeClass("g-file-uploading"),a.dropzone=t,r.remove(),o.text(m("GANTRY5_PLATFORM_JUST_NOW"))}})},this),500)})),a.delegate("click",".g-bookmark-title",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=e.nextSibling(".g-folders"),i=e.parent(".g-bookmark");n&&n.slideToggle(function(){i.toggleClass("collapsed",n.gSlideCollapsed)})}),a.delegate("click","[data-folder]",l(function(t,e){t&&t.preventDefault&&t.preventDefault();var n=JSON.parse(e.data("folder")),a=i("[data-file].selected");v.root=n.pathname,v.value=!!a&&a.data("file-url"),v.subfolder=!0,e.showIndicator("fa fa-li fa-fw fa-spin-fast fa-spinner"),r(p(f("filepicker")+h()),v).send(l(function(t,n){if(e.hideIndicator(),this.addActiveState(e),n.body.success){var i,a;n.body.subfolder&&(i=o("div").html(n.body.subfolder),a=e.nextSibling(),a&&!a.attribute("data-folder")&&a.remove(),i.children().after(e)),n.body.files?(s.empty(),i=o("div").html(n.body.files),i.children().bottom(s).style({opacity:0}).animate({opacity:1},{duration:"250ms"})):s.find("> ul:not(.g-list-labels)").empty(),this.dropzone.previewsContainer=s.find("ul:not(.g-list-labels)")[0]}else d.open({content:n.body.html||n.body,afterOpen:function(t){n.body.html||t.style({width:"90%"})}})},this))},this)),a.delegate("click","[data-g-file-preview]",l(function(t,e){t.preventDefault(),t.stopPropagation();var n=e.parent("[data-file]"),i=JSON.parse(n.data("file"));if(i.isImage){var a=n.find(".g-thumb > div");d.open({className:"g5-dialog-theme-default g5-modal-filepreview center",content:'<img src="'+a[0].style.backgroundImage.slice(4,-1).replace(/"/g,"")+'" />'})}},this)),a.delegate("click","[data-g-file-delete]",l(function(t,e){t.preventDefault();var i=e.parent("[data-file]"),o=JSON.parse(i.data("file")),s=p(f("filepicker/"+n.btoa(encodeURIComponent(o.pathname))+h()));return!!o.isInCustom&&void r("delete",s,function(t,e){e.body.success?(i.addClass("g-file-deleted"),setTimeout(function(){i.remove(),y.refreshFiles(a)},210)):d.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}})})},this)),a.delegate("click","[data-file]",l(function(t,e){t&&t.preventDefault&&t.preventDefault();var n=i(t.target),a=null!==n.data("g-file-delete")||n.parent("[data-g-file-delete]"),r=null!==n.data("g-file-preview")||n.parent("[data-g-file-preview]");if(!(e.hasClass("g-file-error")||e.hasClass("g-file-uploading")||a||r)){JSON.parse(e.data("file"));s.search("[data-file]").removeClass("selected"),e.addClass("selected")}},this)),a.delegate("click","[data-select]",l(function(t,e){t&&t.preventDefault&&t.preventDefault();var n=s.find("[data-file].selected"),a=n?n.data("file-url"):"";i(this.data.field).value(a),d.close()},this)),a.delegate("click","[data-files-mode]",l(function(t,e){if(t&&t.preventDefault&&t.preventDefault(),!e.hasClass("active")){var n=i("[data-files-mode]");n.removeClass("active"),e.addClass("active"),s.animate({opacity:0},{duration:200,callback:function(){var t=e.data("files-mode"),n=s.search("[data-file-uploadprogress]"),a="list"==t?{size:20,thickness:10,fill:{color:b.small,gradient:!1}}:{size:50,thickness:"auto",fill:{gradient:b.gradient,color:!1}};s.attribute("class","g-files g-block g-filemode-"+t),n&&n.forEach(function(e){e=i(e);var n=c(a);e.parent(".g-file-error")&&(n.fill={color:b.error},n.value=1,n.thickness="list"==t?10:25),e.progresser(n)}),s.animate({opacity:1},{duration:200})}})}},this))},addActiveState:function(t){var e=this.content.search("[data-folder].active, .g-folders > .active"),n=t.parent();for(e&&e.removeClass("active"),t.addClass("active");"ul"==n.tag()&&!n.hasClass("g-folders");)n.previousSibling().addClass("active"),n=n.parent()},acceptedFiles:function(t){var e="";switch(t){case".(jpe?g|gif|png|svg)$":e=".jpg,.jpeg,.gif,.png,.svg";break;case".(mp4|webm|ogv|mov)$":e=".mp4,.webm,.ogv,.mov"}return e},refreshFiles:function(t){var e=i("[data-folder].active"),n=e[e.length-1];n&&t.emit("click",{target:i(n)})}});s(function(){var t=i("body");t.delegate("click","[data-g5-filepicker]",function(t,e){t&&t.preventDefault&&t.preventDefault(),e=i(e),e.GantryFilePicker||(e.GantryFilePicker=new v(e)),e.GantryFilePicker.open()})}),e.exports=v}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../../ui":53,"../../utils/elements.utils":64,"../../utils/get-ajax-suffix":68,"../../utils/get-ajax-url":69,"../../utils/translate":76,agent:78,dropzone:105,"elements/domready":109,"elements/zen":135,"mout/function/bind":190,"mout/lang/deepClone":198,"mout/object/deepFillIn":223,"mout/string/rtrim":268,prime:299}],40:[function(t,e,n){"use strict";var i=t("prime"),a=t("../../utils/elements.utils"),r=t("elements/zen"),o=t("prime/map")(),s=t("prime/emitter"),l=t("prime-util/prime/bound"),c=(t("prime-util/prime/options"),t("elements/domready")),u=t("../../utils/decouple"),d=t("mout/function/bind"),h=(t("mout/array/map"),t("mout/array/forEach"),t("mout/array/contains")),p=(t("mout/array/last"),t("mout/array/split"),t("mout/array/removeAll")),f=t("mout/array/insert"),m=(t("mout/array/append"),t("mout/array/find"),t("mout/array/combine"),t("mout/array/intersection")),g=(t("mout/object/merge"),t("mout/string/unhyphenate")),v=t("mout/string/properCase"),b=t("mout/string/trim"),y=t("../../utils/get-ajax-suffix"),w=t("../../utils/get-ajax-url").parse,x=t("../../utils/get-ajax-url").global,k=t("../../ui").modal,S=t("../../utils/async-foreach"),C=t("../../utils/translate"),T=(t("agent"),t("webfontloader"));t("../../utils/elements.viewport");var E=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||!1},O=new i({mixin:l,inherits:s,previewSentence:{latin:"Wizard boy Jack loves the grumpy Queen's fox.","latin-ext":"Wizard boy Jack loves the grumpy Queen's fox.",arabic:"نص حكيم له سر قاطع وذو شأن عظيم مكتوب على ثوب أخضر ومغلف بجلد أزرق",cyrillic:"В чащах юга жил бы цитрус? Да, но фальшивый экземпляр!","cyrillic-ext":"В чащах юга жил бы цитрус? Да, но фальшивый экземпляр!",devanagari:"एक पल का क्रोध आपका भविष्य बिगाड सकता है",greek:"Τάχιστη αλώπηξ βαφής ψημένη γη, δρασκελίζει υπέρ νωθρού κυνός","greek-ext":"Τάχιστη αλώπηξ βαφής ψημένη γη, δρασκελίζει υπέρ νωθρού κυνός",hebrew:"דג סקרן שט בים מאוכזב ולפתע מצא חברה",khmer:"ខ្ញុំអាចញ៉ាំកញ្ចក់បាន ដោយគ្មានបញ្ហា",telugu:"దేశ భాషలందు తెలుగు లెస్స",vietnamese:"Tôi có thể ăn thủy tinh mà không hại gì."},constructor:function(){
this.wf=T,this.field=null,this.element=null,this.throttle=!1,this.selected=null,this.loadedFonts=[],this.filters={search:"",script:"latin",categories:[]}},open:function(t,e){var n=e.data("g5-fontpicker");if(!n)throw new Error("No fontpicker data found");n=JSON.parse(n),this.field=a(n.field),k.open({content:C("GANTRY5_PLATFORM_JS_LOADING"),className:"g5-dialog-theme-default g5-modal-fonts",remote:w(x("fontpicker")+y()),remoteLoaded:d(function(t,e){var n=e.elements.content;this.attachEvents(n),this.updateCategories(n),this.search(),this.scroll(n.find("ul.g-fonts-list")),this.updateTotal(),this.selectFromValue(),setTimeout(function(){n.find(".particle-search-wrapper input")[0].focus()},5)},this)})},scroll:function(t){clearTimeout(this.throttle),this.throttle=setTimeout(d(function(){if(!t)return void clearTimeout(this.throttle);var e=(t.find("ul.g-fonts-list")||t).inviewport(" > li:not(.g-font-hide)",550*(E()?2:7)),n=[];e&&(a(e).forEach(function(t){t=a(t);var e=t.data("font"),i=t.data("variant");!h(this.loadedFonts,e)&&i?n.push(e+("regular"!=i?":"+i:"")):i&&t.find('[data-variant="'+i+'"] .preview').style({fontFamily:e,fontWeight:"regular"==i?"normal":i})},this),n&&n.length&&this.wf.load({classes:!1,google:{families:n},fontactive:d(function(e,n){t.find('li[data-font="'+e+'"]:not(.g-variant-hide) > .preview').style({fontFamily:e,fontWeight:n}),this.loadedFonts.push(e)},this)}))},this),100)},unselect:function(t){if(t=t||this.selected,!t)return!1;var e=t.element.data("variant");t.element.removeClass("selected"),t.element.search("input[type=checkbox]").checked(!1),t.element.search("[data-font]").addClass("g-variant-hide"),t.element.find('[data-variant="'+e+'"]').removeClass("g-variant-hide"),t.variants=[t.baseVariant],t.selected=[]},selectFromValue:function(){var t,e,n,i=this.field.value(),r=!1;if(i.match("family=")){var o=i.split("&"),s=o[0],l=s.split(":");t=l[0].replace("family=","").replace(/\+/g," "),e=l[1]?l[1].split(","):["regular"],n=o[1]?o[1].replace("subset=","").split(","):["latin"]}else{var c,u=a('[data-category="local-fonts"][data-font]')||[];if(u=u.map(function(t){return a(t).data("font")}),i=i.replace(/(\s{1,})?,(\s{1,})?/gi,",").split(","),c=m(u,i),!c.length)return!1;r=!0,t=c.shift()}var g=r?'[data-category="local-fonts"]':':not([data-category="local-fonts"])',v=a('ul.g-fonts-list > [data-font="'+t+'"]'+g);e=e||v.data("variants").split(",")||["regular"],h(e,"400")&&(p(e,"400"),f(e,"regular")),h(e,"400italic")&&(p(e,"400italic"),f(e,"italic")),this.selected={font:t,baseVariant:v.data("variant"),element:v,variants:e,selected:[],local:r,charsets:n,availableVariants:v.data("variants").split(","),expanded:r,loaded:r},(r?[t]:e).forEach(function(t){this.select(v,t),t=v.find('> ul > [data-variant="'+t+'"]'),t&&t.removeClass("g-variant-hide")},this);var b=v.find(".font-charsets-selected");if(b){var y=v.data("subsets").split(",").length;b.html('(<i class="fa fa-fw fa-check-square-o"></i>  <span class="font-charsets-details">'+n.length+" of "+y+"</span> selected)")}r||(a("ul.g-fonts-list")[0].scrollTop=v[0].offsetTop),this.toggleExpansion(),setTimeout(d(function(){this.toggleExpansion()},this),50),r||setTimeout(d(function(){a("ul.g-fonts-list")[0].scrollTop=v[0].offsetTop},this,250))},select:function(t,e){var n=t.data("variant"),i=!n;if(!this.selected||this.selected.element!=t){if(e&&this.selected){var r=this.selected.element.find(".font-charsets-selected");if(r){var o=t.data("subsets").split(",").length;r.html('(<i class="fa fa-fw fa-check-square-o"></i>  <span class="font-charsets-details">1 of '+o+"</span> selected)")}}this.selected={font:t.data("font"),baseVariant:n,element:t,variants:[n],selected:[],local:i,charsets:["latin"],availableVariants:t.data("variants").split(","),expanded:i,loaded:i}}if(e||this.toggleExpansion(),e||i){var s=a('ul.g-fonts-list > [data-font]:not([data-font="'+this.selected.font+'"]) input[type="checkbox"]:checked');s&&(s.checked(!1),s.parent("[data-variants]").removeClass("font-selected"));var l=this.selected.element.find('input[type="checkbox"][value="'+(i?this.selected.font:e)+'"]'),c=l.checked();l&&l.checked(!c),c?(e!=this.selected.baseVariant&&p(this.selected.variants,e),p(this.selected.selected,e)):(f(this.selected.variants,e),f(this.selected.selected,e)),this.updateSelection()}},toggleExpansion:function(){if(!(this.selected.availableVariants.length<=1)){if(this.selected.local)return void(this.selected.expanded=!0);if(this.selected.expanded){var t=':not([data-variant="'+this.selected.variants.join('"]):not([data-variant="')+'"])';t=this.selected.element.search("[data-font]"+t),t&&t.addClass("g-variant-hide")}else{var e=this.selected.element.data("variants");e.split(",").length>1&&(this.manipulateLink(this.selected.font),this.selected.element.search("[data-font]").removeClass("g-variant-hide"),this.selected.loaded||this.wf.load({classes:!1,google:{families:[this.selected.font.replace(/\s/g,"+")+":"+e]},fontactive:d(function(t,e){var n=this.fvdToStyle(t,e),i=n.fontWeight;"400"==i?i="normal"==n.fontStyle?"regular":"italic":"italic"==n.fontStyle&&(i+="italic"),this.selected.element.find('li[data-variant="'+i+'"] .preview').style(n),this.selected.loaded=!0},this)}))}this.selected.expanded=!this.selected.expanded}},manipulateLink:function(t){t=t.replace(/\s/g,"+");var e=a('head link[href*="'+t+'"]');if(e){var n=decodeURIComponent(e.href()).split("|");!n||n.length<=1||(p(n,t),e.attribute("href",encodeURI(n.join("|"))))}},toggle:function(t,e){e=a(e);var n=a(t.target);return"checkbox"==n.attribute("type")&&n.checked(!n.checked()),this.select(e.parent("[data-font]")||e,!!e.parent("[data-font]")&&e.data("variant"),e),!1},updateSelection:function(){var t,e,n=a(".g-particles-footer .font-selected");if(n){if(!this.selected.selected.length)return n.empty(),void this.selected.element.removeClass("font-selected");t=this.selected.selected.sort(),e=this.selected.local?"(<small>local</small>)":"(<small>"+t.join(", ").replace("regular","normal")+"</small>)",this.selected.element.addClass("font-selected"),n.html("<strong>"+this.selected.font+"</strong> "+e)}},updateTotal:function(){var t=a(".g-particles-header .particle-search-total"),e=a(".g-fonts-list > [data-font]:not(.g-font-hide)");t.text(e?e.length:0)},updateCategories:function(t){var e=t.find("[data-font-categories]");e&&(this.filters.categories=e.data("font-categories").split(","))},attachEvents:function(t){var e=t.find(".g-particles-header"),n=t.find(".g-fonts-list"),i=e.find("input.font-search"),a=e.find("input.font-preview");u(n,"scroll",d(this.scroll,this,n)),t.delegate("click",".g-fonts-list li[data-font]",d(this.toggle,this)),i&&i.on("keyup",d(this.search,this,i)),a&&a.on("keyup",d(this.updatePreview,this,a)),this.attachCharsets(t),this.attachLocalVariants(t),this.attachFooter(t)},attachCharsets:function(t){t.delegate("mouseover",".font-charsets-selected",d(function(t,e){if(!e.PopoverDefined){e.getPopover({placement:"auto",width:"200",trigger:"mouse",style:"font-categories, above-modal"});e.on("beforeshow.popover",d(function(t){var n,i=e.parent("[data-subsets]").data("subsets").split(","),o=t.$target.find(".g5-popover-content");o.empty();var s;i.forEach(function(t){s=h(this.selected.charsets,t)?"latin"==t?"checked disabled":"checked":"",r("div").html('<label><input type="checkbox" '+s+' value="'+t+'"/> '+v(g(t.replace("ext","extended")))+"</label>").bottom(o)},this),o.delegate("click",'input[type="checkbox"]',d(function(t,r){r=a(r),n=o.search('input[type="checkbox"]:checked'),this.selected.charsets=n?n.map("value"):[],e.html('(<i class="fa fa-fw fa-check-square-o"></i>  <span class="font-charsets-details">'+this.selected.charsets.length+" of "+i.length+"</span> selected)")},this)),t.displayContent()},this)),e.getPopover().show()}},this))},attachLocalVariants:function(t){t.delegate("mouseover",".g-font-variants-list",d(function(t,e){if(!e.PopoverDefined){e.getPopover({placement:"auto",width:"200",trigger:"mouse",style:"font-categories, above-modal"});e.on("beforeshow.popover",d(function(t){var n=t.$target.find(".g5-popover-content"),i=e.parent("[data-variants]").data("variants").split(",");n.empty(),S(i,d(function(t){t="400"==t?"regular":"400italic"==t?"italic":t+"",r("div").text(this.mapVariant(t)).bottom(n)},this)),t.displayContent()},this))}},this))},attachFooter:function(t){var e,n=t.find(".g-particles-footer"),i=n.find("button.button-primary"),o=n.find(".font-category"),s=n.find(".font-subsets");return i.on("click",d(function(){if(!a('ul.g-fonts-list > [data-font] input[type="checkbox"]:checked'))return this.field.value(""),void k.close();var t=this.selected.font.replace(/\s/g,"+"),e=this.selected.selected,n=this.selected.charsets;e&&1==e.length&&"regular"==e[0]&&(e=[]),n&&1==n.length&&"latin"==n[0]&&(n=[]),h(e,"regular")&&(p(e,"regular"),f(e,"400")),h(e,"italic")&&(p(e,"italic"),f(e,"400italic")),this.selected.local?this.field.value(t):this.field.value("family="+t+(e.length?":"+e.join(","):"")+(n.length?"&subset="+n.join(","):"")),this.field.emit("input"),a("body").emit("input",{target:this.field}),k.close()},this)),o.popover({placement:"top",width:"200",trigger:"mouse",style:"font-categories, above-modal"}).on("beforeshow.popover",d(function(t){var n,i=o.data("font-categories").split(","),s=t.$target.find(".g5-popover-content");s.empty(),i.forEach(function(t){"local-fonts"!=t&&(e=h(this.filters.categories,t)?"checked":"",r("div").html('<label><input type="checkbox" '+e+' value="'+t+'"/> '+v(g(t))+"</label>").bottom(s))},this),s.delegate("click",'input[type="checkbox"]',d(function(t,e){e=a(e),n=s.search('input[type="checkbox"]:checked'),this.filters.categories=n?n.map("value"):[],o.find("small").text(this.filters.categories.length),this.search()},this)),t.displayContent()},this)),s.popover({placement:"top",width:"200",trigger:"mouse",style:"font-subsets, above-modal"}).on("beforeshow.popover",d(function(t){var n=s.data("font-subsets").split(","),i=t.$target.find(".g5-popover-content");i.empty();n.forEach(function(t){e=t==this.filters.script?"checked":"",r("div").html('<label><input name="font-subset[]" type="radio" '+e+' value="'+t+'"/> '+v(g(t.replace("ext","extended")))+"</label>").bottom(i)},this),i.delegate("change",'input[type="radio"]',d(function(t,e){e=a(e),this.filters.script=e.value(),a(".g-particles-header input.font-preview").value(this.previewSentence[this.filters.script]),s.find("small").text(v(g(e.value().replace("ext","extended")))),this.search(),this.updatePreview()},this)),t.displayContent()},this)),t},search:function(t){t=t||a(".g-particles-header input.font-search");var e,n,i,r=a(".g-fonts-list"),o=t.value();r.search("> [data-font]").forEach(function(t){if(t=a(t),e=t.data("font"),n=t.data("subsets").split(","),i=t.data("category"),t.removeClass("g-font-hide"),!this.selected||this.selected.font!=e||!this.selected.selected.length)return h(n,this.filters.script)&&h(this.filters.categories,i)?void(e.match(new RegExp("^"+o+"|\\s"+o,"gi"))?t.removeClass("g-font-hide"):t.addClass("g-font-hide")):void t.addClass("g-font-hide")},this),this.updateTotal(),clearTimeout(t.refreshTimer),t.refreshTimer=setTimeout(d(function(){this.scroll(a("ul.g-fonts-list"))},this),400),t.previousValue=o},updatePreview:function(t){t=t||a(".g-particles-header input.font-preview"),clearTimeout(t.refreshTimer);var e=t.value(),n=a(".g-fonts-list");return e=b(e)?b(e):this.previewSentence[this.filters.script],t.previousValue==e||(n.search("[data-font] .preview").text(e),void(t.previousValue=e))},fvdToStyle:function(t,e){var n=e.match(/([a-z])([0-9])/);if(!n)return"";var i={n:"normal",i:"italic",o:"oblique"};return{fontFamily:t,fontStyle:i[n[1]],fontWeight:(100*n[2]).toString()}},mapVariant:function(t){switch(t){case"100":return"Thin 100";case"100italic":return"Thin 100 Italic";case"200":return"Extra-Light 200";case"200italic":return"Extra-Light 200 Italic";case"300":return"Light 300";case"300italic":return"Light 300 Italic";case"400":case"regular":return"Normal 400";case"400italic":case"italic":return"Normal 400 Italic";case"500":return"Medium 500";case"500italic":return"Medium 500 Italic";case"600":return"Semi-Bold 600";case"600italic":return"Semi-Bold 600 Italic";case"700":return"Bold 700";case"700italic":return"Bold 700 Italic";case"800":return"Extra-Bold 800";case"800italic":return"Extra-Bold 800 Italic";case"900":return"Ultra-Bold 900";case"900italic":return"Ultra-Bold 900 Italic";default:return"Unknown Variant"}}});c(function(){var t=a("body");t.delegate("click","[data-g5-fontpicker]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=o.get(e);n||(n=new O,o.set(e,n)),n.open(t,e)})}),e.exports=O},{"../../ui":53,"../../utils/async-foreach":62,"../../utils/decouple":63,"../../utils/elements.utils":64,"../../utils/elements.viewport":65,"../../utils/get-ajax-suffix":68,"../../utils/get-ajax-url":69,"../../utils/translate":76,agent:78,"elements/domready":109,"elements/zen":135,"mout/array/append":162,"mout/array/combine":163,"mout/array/contains":164,"mout/array/find":169,"mout/array/forEach":172,"mout/array/insert":174,"mout/array/intersection":175,"mout/array/last":177,"mout/array/map":178,"mout/array/removeAll":180,"mout/array/split":183,"mout/function/bind":190,"mout/object/merge":235,"mout/string/properCase":262,"mout/string/trim":270,"mout/string/unhyphenate":273,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298,"prime/map":300,webfontloader:315}],41:[function(t,e,n){"use strict";var i=t("../../utils/elements.utils"),a=t("elements/domready"),r=t("../../ui").modal,o=t("../../utils/get-ajax-suffix"),s=t("../../utils/get-ajax-url").parse,l=t("../../utils/get-ajax-url").global,c=t("../../utils/translate"),u=t("mout/string/trim"),d=t("mout/array/contains");a(function(){var t=i("body");t.delegate("keyup",'.g-icons input[type="text"]',function(t,e){e=i(e);var n,a=e.sibling("[data-g5-iconpicker]")||e.siblings().find("[data-g5-iconpicker]"),r=e.value();a.find("i").attribute("class",r||"fa fa-hand-o-up picker"),n=a[0].offsetWidth,n||a.find("i").attribute("class","fa fa-hand-o-up picker")}),t.delegate("click","[data-g5-iconpicker]",function(t,e){t&&t.preventDefault&&t.preventDefault(),e=i(e);var n=i(e.data("g5-iconpicker")),a=e,h=u(n.value()).replace(/\s{2,}/g," ").split(" ");r.open({content:c("GANTRY5_PLATFORM_JS_LOADING"),className:"g5-dialog-theme-default g5-modal-icons",remote:s(l("icons")+o()),afterClose:function(){var t=i(".g5-popover");t&&t.remove()},remoteLoaded:function(t,e){var o,s,l=e.elements.content,c=l.search("[data-g-icon]");if(!c||!t.body.success)return l.html(t.body.html||t.body),!1;var u=function(){var t=[],e=l.find("[data-g-icon].active"),n=l.search(".g-particles-header .float-right input:checked, .g-particles-header .float-right select");e&&t.push(e.data("g-icon")),n&&n.forEach(function(e){var n=i(e).value();n&&"fa-"!==n&&t.push(n)}),l.find(".g-icon-preview").html('<i class="fa '+t.join(" ")+'"></i> <span>'+t[0]+"</span>"),l.find("[data-g-select]").disabled(!l.find("[data-g-icon].active")||null)},p=function(){var t=l.search("[data-g-icon]:not(.hide-icon)");l.find(".particle-search-total").text(t?t.length:0)};l.find("[data-g-select]").disabled(!l.find("[data-g-icon].active")||null),l.delegate("click","[data-g-icon]",function(t,e){t&&t.preventDefault&&t.preventDefault(),e=i(e);var n=l.find("[data-g-icon].active");n&&n.removeClass("active"),e.addClass("active"),l.find("[data-g-select]").disabled(null),u()}),l.delegate("click","[data-g-select]",function(t){if(t.preventDefault(),!l.find("[data-g-icon].active"))return!1;var e=l.find(".g-icon-preview i");n.value(e.attribute("class")),a.find("i").attribute("class",e.attribute("class")),n.emit("input"),i("body").emit("input",{target:n}),r.close()}),l.delegate("change",'.g-particles-header .float-right input[type="checkbox"], .g-particles-header .float-right select',function(){u()}),l.delegate("keyup",'.particle-search-wrapper input[type="text"]',function(t,e){e=i(e);var n=e.value(),a=l.search("[data-g-icon].hide-icon");if(!n)return a&&(a.removeClass("hide-icon"),p()),!0;var r=l.search('[data-g-icon*="'+n+'"]');l.search("[data-g-icon]").addClass("hide-icon"),r&&r.removeClass("hide-icon"),p()}),c.forEach(function(t){t=i(t),o="";for(var e=5,n=0;e>n;e--)s=e?e+"x":"lg",o+='<i class="fa '+t.data("g-icon")+" fa-"+s+'"></i> ';if(o+="<h3>"+t.data("g-icon")+"</h3>",t.popover({content:o,placement:"auto",trigger:"mouse",style:"above-modal, icons-preview",width:"auto",targetEvents:!1,delay:1}).on("hidden.popover",function(t){t.$target&&t.$target.remove()}),d(h,t.data("g-icon"))){t.addClass("active"),h.forEach(function(t){var e=l.find('[name="'+t+'"]');e?e.checked(!0):(e=l.find('option[value="'+t+'"]'),e&&e.parent().value(t))});var a=t.parent(".icons-wrapper"),r=a[0].offsetHeight;a[0].scrollTop=t[0].offsetTop-r/2,u()}}),setTimeout(function(){l.find(".particle-search-wrapper input")[0].focus()},5)}})})}),e.exports={}},{"../../ui":53,"../../utils/elements.utils":64,"../../utils/get-ajax-suffix":68,"../../utils/get-ajax-url":69,"../../utils/translate":76,"elements/domready":109,"mout/array/contains":164,"mout/string/trim":270}],42:[function(t,e,n){"use strict";e.exports={colorpicker:t("./colorpicker"),fonts:t("./fonts"),menu:t("./menu"),icons:t("./icons"),filepicker:t("./filepicker"),collections:t("./collections"),keyvalue:t("./keyvalue"),instancepicker:t("./instancepicker")}},{"./collections":37,"./colorpicker":38,"./filepicker":39,"./fonts":40,"./icons":41,"./instancepicker":43,"./keyvalue":44,"./menu":45}],43:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/zen"),r=t("elements/domready"),o=t("../../fields/submit"),s=t("../../ui").modal,l=t("agent"),c=t("mout/string/trim"),u=t("../../utils/get-ajax-url").parse,d=t("../../utils/get-ajax-url").global,h=t("../../utils/get-ajax-suffix"),p=t("../../utils/translate"),f=t("../../utils/wp-widgets-customizer");r(function(){var t=i("body"),e=(i('[data-g-instancepicker] ~ input[type="hidden"]'),{wordpress:"widget",joomla:"module"});t.delegate("input",'[data-g-instancepicker] ~ input[type="hidden"]',function(t,e){if(!e.value()){var n=e.siblings(".g-instancepicker-title"),i=e.siblings("[data-g-instancepicker]"),a=e.sibling(".g-reset-field");n.text(""),i.text(i.data("g-instancepicker-text")),a.style("display","none")}}),t.delegate("click","[data-g-instancepicker]",function(t,n){t&&t.preventDefault();var r,m,g=JSON.parse(n.data("g-instancepicker")),v=i('[name="'+g.field+'"]');return m=g.type==e[GANTRY_PLATFORM]?("widget"!=g.type?"particle/":"")+e[GANTRY_PLATFORM]:"particle",!!v&&(r=v.value(),"particle"!=g.type&&"widget"!=g.type||!r||(r=JSON.parse(r||{}),m=r.type+"/"+r[g.type]),!!g.modal_close||void s.open({content:p("GANTRY5_PLATFORM_JS_LOADING"),method:r&&"module"!=g.type?"post":"get",data:r&&"module"!=g.type?r:{},overlayClickToClose:!1,remote:u(d(m)+h()),remoteLoaded:function(t,r){if(!t.body.success)return void s.enableCloseByOverlay();var d=r.elements.content,p=d.find("[data-mm-select]"),m=d.find(".search input"),g=d.search("[data-mm-type]"),b=d.search("[data-mm-filter]");m&&b&&g&&(m.on("input",function(){if(!this.value())return void g.removeClass("hidden");g.addClass("hidden");var t,e=[],n=this.value().toLowerCase();b.forEach(function(a){a=i(a),t=c(a.data("mm-filter")).toLowerCase(),t.match(new RegExp("^"+n+"|\\s"+n,"gi"))&&e.push(a.matches("[data-mm-type]")?a:a.parent("[data-mm-type]"))},this),e.length&&i(e).removeClass("hidden")}),setTimeout(function(){m[0].focus()},5));var y=JSON.parse(n.data("g-instancepicker"));if(y.type==e[GANTRY_PLATFORM]&&(y.modal_close=!0),p)p.data("g-instancepicker",JSON.stringify(y));else{var w=d.find("form"),x=a("div").html(t.body.html||t.body).find("form"),k=d.find('input[type="submit"], button[type="submit"]');if(!w&&!x||!k)return!0;var S=d.search("[data-apply-and-save]");S&&S.remove(),k.on("click",function(t){t.preventDefault(),k.showIndicator();var e=o(x[0].elements,d);l(x.attribute("method"),u(x.attribute("action")+h()),e.valid.join("&")||{},function(t,e){if(e.body.success){var n=v.siblings(".g-instancepicker-title");v&&(v.value(JSON.stringify(e.body.item)),i("body").emit("change",{target:v})),n&&n.text(e.body.item.title)}else s.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}});s.close(),k.hideIndicator(),f(v)})})}}}))})}),e.exports={}},{"../../fields/submit":8,"../../ui":53,"../../utils/get-ajax-suffix":68,"../../utils/get-ajax-url":69,"../../utils/translate":76,"../../utils/wp-widgets-customizer":77,agent:78,elements:111,"elements/domready":109,"elements/zen":135,"mout/string/trim":270}],44:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("elements"),r=(t("elements/zen"),t("mout/object/has")),o=t("mout/array/some"),s=(t("../../ui").modal,t("../../ui").toastr,t("agent"),t("mout/array/indexOf")),l=t("mout/array/contains"),c=t("mout/array/last"),u=t("mout/object/keys"),d=t("sortablejs"),h=t("mout/string/escapeUnicode"),p=t("mout/string/trim"),f=(t("../../utils/get-ajax-suffix"),t("../../utils/translate"));t("elements/insertion"),i(function(){var t=a("body"),e=function(e){var n=e||a(".g-keyvalue-field ul");n&&n.forEach(function(e){e=a(e),e.SimpleSort=d.create(e[0],{handle:".fa-reorder",filter:"[data-keyvalue-nosort]",scroll:!1,animation:150,onStart:function(){a(this.el).addClass("keyvalue-sorting")},onEnd:function(e){var n=a(this.el);if(n.removeClass("keyvalue-sorting"),e.oldIndex!==e.newIndex){var i=n.parent(".settings-param").find("[data-keyvalue-data]"),r=i.value();r=JSON.parse(r),r.splice(e.newIndex,0,r.splice(e.oldIndex,1)[0]),i.value(JSON.stringify(r)),t.emit("change",{target:i})}}})})};e(),t.delegate("mouseover",".g-keyvalue-field ul",function(t,n){n.SimpleSort||e(n)}),t.delegate("click","[data-keyvalue-addnew]",function(t,e){var n=e.parent(".settings-param"),i=n.find("ul"),r=n.find("[data-keyvalue-template]"),o=i.search("> [data-keyvalue-item]")||[],s=a(c(o)),l=a(r[0].cloneNode(!0));s?l.after(s):l.top(i),l.attribute("style",null).data("keyvalue-item",l.data("keyvalue-template")),l.attribute("data-keyvalue-template",null),l.attribute("data-keyvalue-nosort",null),l.find("[data-keyvalue-key]")[0].focus()}),t.delegate("click","[data-keyvalue-remove]",function(e,n){e&&e.preventDefault&&e.preventDefault();var i=n.parent("[data-keyvalue-item]"),a=(i.find('input[type="text"]').data("keyvalue-key"),n.parent(".settings-param").find("[data-keyvalue-data]")),r=n.parent("ul").search("> [data-keyvalue-item]"),o=s(r,i[0]),l=JSON.parse(a.value());l.splice(o,1),a.value(h(JSON.stringify(l))),i.remove(),t.emit("change",{target:a})}),t.delegate("blur",'[data-keyvalue-item] input[type="text"]',function(e,n){var i=n.parent("[data-keyvalue-item]"),a=i.find(".g-keyvalue-wrapper"),c=i.find("[data-keyvalue-key]"),u=i.find("[data-keyvalue-value]"),d=c.data("keyvalue-key"),m=p(c.value()),g=p(u.value()),v=n.parent("ul").search("> [data-keyvalue-item]:not(.g-keyvalue-warning):not(.g-keyvalue-excluded)"),b=s(v,i[0]),y=n.parent(".settings-param").find("[data-keyvalue-data]"),w=JSON.parse(y.value()),x=JSON.parse(y.data("keyvalue-exclude")),k=l(x,m),S=o(w,function(t){return r(t,m)})&&d!==m;c==n&&(d===m||S||(w.splice(b,1),c.data("keyvalue-key",m||"")),i[S?"addClass":"removeClass"]("g-keyvalue-warning"),i[k?"addClass":"removeClass"]("g-keyvalue-excluded"),a.data("tip",S?f("GANTRY5_PLATFORM_JS_KEYVALUE_DUPLICATE",m):k?f("GANTRY5_PLATFORM_JS_KEYVALUE_EXCLUDED",m):null).data("tip-place","top-right").data("tip-spacing",2).data("tip-offset",8),k||S?window.G5.tips.get(a[0]).show():window.G5.tips.remove(a[0])),!m||k||S||(w[b]||w.splice(b,0,{}),w[b][m]=g),y.value(h(JSON.stringify(w))),t.emit("change",{target:y})},!0),t.delegate("update","[data-keyvalue-data]",function(t,e){var n=e.parent(),i=n.search("[data-keyvalue-item]"),r=n.find("ul"),o=JSON.parse(e.value()),s=n.find("[data-keyvalue-template]");i&&i.remove(),o.forEach(function(t,e){var n=a(s[0].cloneNode(!0)),i=u(t).shift(),o=t[i];r.appendChild(n),n.attribute("style",null).data("keyvalue-item",n.data("keyvalue-template")),n.attribute("data-keyvalue-template",null),n.attribute("data-keyvalue-nosort",null),n.find("[data-keyvalue-key]").value(i),n.find("[data-keyvalue-value]").value(o)})})}),e.exports={}},{"../../ui":53,"../../utils/get-ajax-suffix":68,"../../utils/translate":76,agent:78,elements:111,"elements/domready":109,"elements/insertion":112,"elements/zen":135,"mout/array/contains":164,"mout/array/indexOf":173,"mout/array/last":177,"mout/array/some":182,"mout/object/has":232,"mout/object/keys":234,"mout/string/escapeUnicode":258,"mout/string/trim":270,sortablejs:314}],45:[function(t,e,n){"use strict";var i=t("../../utils/elements.utils"),a=t("elements/domready");a(function(){var t=i("body");t.delegate("click","[data-g5-content] .g-main-nav .g-toplevel [data-g5-ajaxify]",function(t,e){t&&t.preventDefault&&t.preventDefault();var n=i("[data-g5-content] .g-main-nav .g-toplevel [data-g5-ajaxify] !> li");n&&n.removeClass("active"),e.parent("li").addClass("active")})}),e.exports={}},{"../../utils/elements.utils":64,"elements/domready":109}],46:[function(t,e,n){"use strict";var i=t("elements"),a=(t("elements/zen"),t("elements/domready")),r=(t("mout/string/trim"),t("mout/object/keys"),t("../ui").modal,t("../ui").toastr,t("agent"),t("../utils/get-ajax-suffix"),t("../utils/get-ajax-url").parse,t("../utils/get-ajax-url").global,t("../ui/eraser")),o=t("sortablejs"),s=(t("../utils/flags-state"),[{name:"positions",pull:!0,put:!0},{name:"positions",pull:!1,put:!1}]),l={eraser:null,lists:[],serialize:function(t){var e,n=[],a=i(t)||i("[data-position]");return a?(a.forEach(function(t){t=i(t),e=JSON.parse(t.data("position")),e.modules=[],(t.search("[data-pm-data]")||[]).forEach(function(t){t=i(t),e.modules.push(JSON.parse(t.data("pm-data")||"{}"))}),n.push(e),t.data("position",JSON.stringify(e))}),JSON.stringify(n).replace(/\//g,"\\/")):"[]"},attachEraser:function(){return l.eraser?(l.eraser.element=i("[data-positions-erase]"),void l.eraser.hide("fast")):void(l.eraser=new r("[data-positions-erase]"))},createSortables:function(t){var e,n;l.attachEraser(),s.forEach(function(a,r){e=r?"#trash":"[data-position] ul",e=i(e),e.forEach(function(t,e){n=o.create(t,{sort:!r,filter:"[data-position-ignore]",group:a,scroll:!0,forceFallback:!0,animation:100,onStart:function(t){l.attachEraser();var e=i(t.item);e.addClass("position-dragging"),l.eraser.show()},onEnd:function(t){var e=i(t.item),n=i("#trash"),a=i(this.originalEvent.target),r=!1;if("touchend"===this.originalEvent.type){var o=n[0].getBoundingClientRect(),s=this.originalEvent,c=(s.pageY||s.changedTouches[0].pageY)-window.scrollY;r=c<=o.height}return a.matches("#trash")||a.parent("#trash")||r?(e.remove(),l.eraser.hide(),void this.options.onSort(t)):(e.removeClass("position-dragging"),void l.eraser.hide())},onSort:function(t){var e=i(t.from),n=i(t.to),a=[e.parent("[data-position]"),n.parent("[data-position]")];t.from[0]===t.to[0]&&a.shift(),l.serialize(a)},onOver:function(t){if(i(t.from).matches("ul")){var e=i(t.newIndex);e.matches("#trash")||e.parent("#trash")?l.eraser.over():l.eraser.out()}}}),r||l.lists[e]||(l.lists[e]=n)}),r||(t.SimpleSort=n)})}},c=function(t){t&&(t.SimpleSort||l.createSortables(t))};a(function(){var t=i("#positions");i("body").delegate("mouseover","#positions",function(t,e){c(e)}),c(t)}),e.exports=l},{"../ui":53,"../ui/eraser":52,"../utils/flags-state":67,"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,agent:78,elements:111,"elements/domready":109,"elements/zen":135,"mout/object/keys":234,"mout/string/trim":270,sortablejs:314}],47:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/zen"),r=t("elements/domready"),o=t("mout/string/trim"),s=(t("mout/object/keys"),t("../ui").modal),l=t("../ui").toastr,c=t("agent"),u=t("../utils/get-ajax-suffix"),d=t("../utils/get-ajax-url").parse,h=t("../utils/get-ajax-url").global,p=t("../fields/submit"),f=t("../utils/flags-state"),m=t("../utils/translate"),g=t("./cards");r(function(){var t=i("body"),e=d(h("confirmdeletion")+u());t.delegate("click","#positions [data-g-config]",function(n,a){var r=a.data("g-config"),o=a.data("g-config-href"),p=window.btoa(o),m=(a.data("g-config-method")||"post").toLowerCase();return n&&n.preventDefault&&n.preventDefault(),"delete"!=r||f.get("free:to:delete:"+p,!1)?(a.hideIndicator(),a.showIndicator(),void c(m,d(o+u()),{},function(e,n){if(n.body.success){var r=n.body.position,o=i('[href="'+h("positions")+'"]');o?t.emit("click",{target:o}):window.location=window.location,l.success(n.body.html||"Action successfully completed.",n.body.title||""),r&&(t.positionDeleted=r)}else s.open({content:n.body.html||n.body,afterOpen:function(t){n.body.html||t.style({width:"90%"})}});a.hideIndicator()})):(f.warning({url:e,data:{page_type:"POSITION"},callback:function(e,n){var r=n.find("[data-g-delete-confirm]"),o=n.find("[data-g-delete-cancel]");r&&(r.on("click",function(e){return e.preventDefault(),!this.attribute("disabled")&&(f.get("free:to:delete:"+p,!0),i([r,o]).attribute("disabled"),t.emit("click",{target:a}),void s.close())}),o.on("click",function(t){return t.preventDefault(),!this.attribute("disabled")&&(i([r,o]).attribute("disabled"),f.get("free:to:delete:"+p,!1),void s.close())}))}}),!1)}),t.delegate("click","#positions .position-add",function(e,n){e.preventDefault();s.open({content:m("GANTRY5_PLATFORM_JS_LOADING"),method:"get",overlayClickToClose:!1,remote:d(n.attribute("href")+u()),remoteLoaded:function(e,n){if(!e.body.success)return void s.enableCloseByOverlay();var r=n.elements.content.find("form"),l=a("div").html(e.body.html).find("form"),c=n.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),u=n.elements.content.find(".search input"),d=n.elements.content.search("[data-mm-type]"),h=n.elements.content.search("[data-mm-filter]"),p=n.elements.content.find(".g-urltemplate");p&&t.emit("input",{target:p});var f=n.elements.content.find("[data-title-editable]");return f&&f.on("title-edit-end",function(t,e){if(t=o(t),!t)return t=o(e)||"Title",this.text(t).data("title-editable",t),!0}),u&&h&&d&&u.on("input",function(){if(!this.value())return void d.removeClass("hidden");d.addClass("hidden");var t,e=[],n=this.value().toLowerCase();h.forEach(function(a){a=i(a),t=o(a.data("mm-filter")).toLowerCase(),t.match(new RegExp("^"+n+"|\\s"+n,"gi"))&&e.push(a.matches("[data-mm-type]")?a:a.parent("[data-mm-type]"))},this),e.length&&i(e).removeClass("hidden")}),u&&setTimeout(function(){u[0].focus()},5),!r&&!l||!c||void 0}})}),t.delegate("click","#positions .item-settings",function(e,n){e.preventDefault();var r={},f=n.parent("[data-pm-data]"),v=JSON.parse(n.parent("[data-position]").data("position"));r.position=v.name,r.item=f.data("pm-data"),s.open({content:m("GANTRY5_PLATFORM_JS_LOADING"),method:"post",data:r,overlayClickToClose:!1,remote:d(h("positions/edit/"+f.data("pm-blocktype"))+u()),remoteLoaded:function(e,r){if(!e.body.success)return void s.enableCloseByOverlay();var h=r.elements.content.find("form"),f=a("div").html(e.body.html).find("form"),v=r.elements.content.search('input[type="submit"], button[type="submit"], [data-apply-and-save]'),b=r.elements.content.find("[data-title-editable]");return b&&b.on("title-edit-end",function(t,e){if(t=o(t),!t)return t=o(e)||"Title",this.text(t).data("title-editable",t),!0}),!h&&!f||!v||void v.on("click",function(e){e.preventDefault(),f=r.elements.content.find("form");var o=i(e.currentTarget);o.disabled(!0),o.hideIndicator(),o.showIndicator();var h=p(f[0].elements,r.elements.content);return h.invalid.length?(o.disabled(!1),o.hideIndicator(),o.showIndicator("fa fa-fw fa-exclamation-triangle"),void l.error(m("GANTRY5_PLATFORM_JS_REVIEW_FIELDS"),m("GANTRY5_PLATFORM_JS_INVALID_FIELDS"))):void c(f.attribute("method"),d(f.attribute("action")+u()),h.valid.join("&"),function(e,r){if(r.body.success){var c=n.parent("[data-pm-data]");if(c){c.data("pm-data",JSON.stringify(r.body.item));var u=r.body.item.enabled||r.body.item.options.attributes.enabled,d=a("div").html(r.body.html);c.html(d.firstChild().html()),
c["0"==u?"addClass":"removeClass"]("g-menu-item-disabled")}if(null!==o.data("apply-and-save")){var h=i("body").find(".button-save");h&&t.emit("click",{target:h})}g.serialize(n.parent("[data-position]")),s.close(),l.success(m("GANTRY5_PLATFORM_JS_POSITIONS_SETTINGS_APPLIED"),m("GANTRY5_PLATFORM_JS_SETTINGS_APPLIED"))}else s.open({content:r.body.html||r.body,afterOpen:function(t){r.body.html||t.style({width:"90%"})}});o.hideIndicator()})})}})});var n=function(t,e,n){if(this.style("text-overflow","ellipsis"),!n&&t!=e){var i=this,r=i.data("g-config-href"),l=i.data("title-editable-type"),h=(i.data("g-config-method")||"post").toLowerCase(),p=i.parent("[id]"),f={};p.showIndicator(),p.find("[data-title-edit]").addClass("disabled"),f="title"===l?{title:o(t)}:{key:o(t)},c(h,d(r+u()),f,function(n,r){if(r.body.success){i.data("title",t).data("tip",t);var o=a("div").html(r.body.position),l=o.find(".position-actions"),c=i.parent(".card");c.find("h4 .position-key").html(r.body.id),c.find(".position-actions").html(l.html());var u=c.find("[data-position]"),d=JSON.parse(u.data("position"));d.title=t,u.data("position",JSON.stringify(d))}else s.open({content:r.body.html||r.body,afterOpen:function(t){r.body.html||t.style({width:"90%"})}}),i.data("title-editable",e).text(e);p.hideIndicator(),p.find("[data-title-edit]").removeClass("disabled")})}},r=function(t){t&&t.length&&t.forEach(function(t){t=i(t),t.confWasAttached=!0,t.on("title-edit-start",function(){t.style("text-overflow","inherit")}),t.on("title-edit-end",n)})};t.delegate("change",'[data-positions-assignments] input[type="hidden"]',function(t,e){var n=e.parent(".card"),a=n.find(".settings-param-wrapper");a[1==e.value()?"addClass":"removeClass"]("hide"),a.search('input[type="hidden"]').forEach(function(t){t=i(t),t.value(0).disabled(!0)})}),t.on("statechangeAfter",function(t,e){var n=i("#positions [data-title-editable]");return!n||(n=n.filter(function(t){return"undefined"==typeof i(t).confWasAttached}),void r(n))}),r(i("#positions [data-title-editable]"))}),e.exports={}},{"../fields/submit":8,"../ui":53,"../utils/flags-state":67,"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,"../utils/translate":76,"./cards":46,agent:78,elements:111,"elements/domready":109,"elements/zen":135,"mout/object/keys":234,"mout/string/trim":270}],48:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("elements/attributes"),r=t("../ui").modal,o=t("mout/array/contains"),s=t("mout/collection/forEach");t("../ui/popover");navigator.userAgent.toLowerCase().indexOf("firefox")>-1;i(function(){var t=a("body");t.delegate("click","[data-g-styles]",function(e,n){var i=a(e.target);if(e&&e.preventDefault&&e.preventDefault(),i.hasClass("swatch-preview")||i.parent(".swatch-preview"))return!0;var r,l,c,u,d=JSON.parse(n.data("g-styles"));s(d,function(e,n){r=a('[name="'+n+'"]'),l=!!r&&r.value(),r&&l!==e&&(u={target:r,forceOverride:!0},c="select"==r.tag()||o(["hidden","checkbox"],r.type())?"change":"input",r.value(e),t.emit(c,u),t.emit("keyup",u))})}),t.delegate("click","[data-g-styles] .swatch-preview",function(t,e){var n=e.parent("[data-g-styles]").find("img");return!!n&&void r.open({content:n[0].outerHTML,afterOpen:function(t){var e=parseInt(t.compute("padding-left"),10)+parseInt(t.compute("padding-right"),10);t.style({maxWidth:"80%",width:e+(n[0].naturalWidth||n[0].width)})}})})}),e.exports={}},{"../ui":53,"../ui/popover":55,"elements/attributes":106,"elements/domready":109,"mout/array/contains":164,"mout/collection/forEach":187}],49:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("mout/string/trim"),r=t("mout/object/forOwn"),o=t("elements"),s={write:function(t,e){var n=new Date;n.setTime(n.getTime()+31536e7);var i=window.location.host.toString(),a=i.substring(i.lastIndexOf(".",i.lastIndexOf(".")-1)+1);i.match(/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/)&&(a=i);var r=[t,"=",JSON.stringify(e),"; expires=",n.toGMTString(),"; domain=.",a,"; path=/;"];document.cookie=r.join("")},read:function(t){t=t.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1");var e=document.cookie.match("(?:^|;)\\s*"+t+"=([^;]*)");return e?JSON.parse(decodeURIComponent(e[1])):null}},l=function(){var t=s.read("g5-collapsed")||{},e=o("[data-g-collapse]");if(!e)return!1;var n,i,a,l,c;r(t,function(t,e){n=o('[data-g-collapse-id="'+e+'"]'),n&&(i=JSON.parse(n.data("g-collapse")),a=i.handle?n.find(i.handle):n.find(".g-collapse"),l=i.target?n.find(i.target):n,c=n.parent(".card")||l,a.data("title",t?i.expand:i.collapse).data("tip",t?i.expand:i.collapse),l.attribute("style",null),c[t?"addClass":"removeClass"]("g-collapsed"),n[t?"addClass":"removeClass"]("g-collapsed-main"))})};i(function(){var t,e,n,i=o("body");i.delegate("click","[data-g-collapse]",function(i,a){if(a=i.element||a,t=JSON.parse(a.data("g-collapse")),e=o(i.target),n=(t.store!==!1?s.read("g5-collapsed"):n)||{},t.handle||(t.handle=a.find(".g-collapse")),!e.matches(t.handle)&&!e.parent(t.handle))return!1;void 0===n[t.id]&&(n[t.id]=t.collapsed,t.store!==!1&&s.write("g5-collapsed",n));var r=n[t.id],l=t.target?a.find(t.target):a,c=l.parent(".card")||l;c&&c.hasClass("g-collapsed")&&(c.removeClass("g-collapsed"),a.removeClass("g-collapsed-main"));var u=function(e){r="number"!=typeof e?e:r,r||(c.addClass("g-collapsed"),a.addClass("g-collapsed-main"),a.attribute("style",null)),t.handle.data("title",r?t.collapse:t.expand).data("tip",r?t.collapse:t.expand),n[t.id]=!r,t.collapsed=!r;var i=JSON.parse(a.data("g-collapse"));i.collapsed=!r,a.data("g-collapse",JSON.stringify(i)),t.store!==!1&&s.write("g5-collapsed",n)};a.gFastCollapse?(l[r?"removeClass":"addClass"]("g-collapsed"),a[r?"removeClass":"addClass"]("g-collapsed-main"),u(r)):(a.removeClass("g-collapsed-main"),l.removeClass("g-collapsed")[r?"removeClass":"addClass"]("g-collapsed"),u(r)),a.gFastCollapse=!1}),i.delegate("click","[data-g-collapse-all]",function(t,e){var i,a,r,l,c,u="true"==e.data("g-collapse-all"),d=e.parent(".g-filter-actions"),h=d.nextSibling(),p=h.search("[data-g-collapse]"),f=s.read("g5-collapsed")||{};p&&p.forEach(function(t){t=o(t),l=t.parent(".card"),c=l.find("> .g-collapsed"),a=JSON.parse(t.data("g-collapse")),r=a.handle?t.find(a.handle):t.find(".g-collapse"),i=a.target?t.find(a.target):t,n=(a.store!==!1?f:n)||{},n[a.id]=u,a.store!==!1&&s.write("g5-collapsed",n),i.attribute("style",null),t[u?"addClass":"removeClass"]("g-collapsed-main"),l[u?"addClass":"removeClass"]("g-collapsed"),c&&c[u?"addClass":"removeClass"]("g-collapsed")})}),i.delegate("input","[data-g-collapse-filter]",function(t,e){var n=JSON.parse(e.data("g-collapse-filter")||"{}"),i=e.parent(".g-filter-actions"),r=i.nextSibling(),s=r.search(n.element||".card"),l=e.value();s&&(l||s.attribute("style",null),s.forEach(function(t,e){t=o(t);var i=a(t.find(n.title||"h4 .g-title").text()),r=i.match(new RegExp("^"+l+"|\\s"+l,"gi"));r?t.attribute("style",null):t.style("display","none")}))})}),e.exports=l},{elements:111,"elements/domready":109,"mout/object/forOwn":230,"mout/string/trim":270}],50:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime/emitter"),r=t("prime-util/prime/bound"),o=t("prime-util/prime/options"),s=t("mout/function/bind"),l=(t("mout/array/contains"),t("./drag.events")),c=t("../utils/elements.utils");t("elements/events"),t("elements/delegation");var u="Microsoft Internet Explorer"===navigator.appName,d=new i({mixin:[r,o],inherits:a,options:{delegate:null,droppables:!1,catchClick:!1},DRAG_EVENTS:l,constructor:function(t,e){this.container=c(t),this.container&&(this.setOptions(e),this.element=null,this.origin={x:0,y:0,transform:null,offset:{x:0,y:0}},this.matched=!1,this.lastMatched=!1,this.lastOvered=null,this.attach())},attach:function(){this.DRAG_EVENTS.EVENTS.START.forEach(s(function(t){this.container.delegate(t,this.options.delegate,this.bound("start"))},this))},detach:function(){this.DRAG_EVENTS.EVENTS.START.forEach(s(function(t){this.container.undelegate(t,this.options.delegate,this.bound("start"))},this))},start:function(t,e){clearTimeout(this.scrollInterval),e.LMTooltip&&e.LMTooltip.remove(),c("html").attribute("style","height: 100% !important"),this.scrollHeight=document.body.scrollHeight;var n=c(t.target);if(!e.parent("[data-lm-root]")&&e.hasClass("g-block")&&!n.matches(".submenu-reorder")&&!n.parent(".submenu-reorder"))return!0;if(t.which&&1!==t.which||c(t.target).matches(this.options.exclude))return!0;this.element=c(e),this.original=this.element,this.matched=!1,this.options.catchClick&&(this.moved=!1),(n.matches(".submenu-reorder")||n.parent(".submenu-reorder"))&&(this.element=n.parent("[data-mm-id]")),this.emit("dragdrop:beforestart",t,this.element),u&&this.element.style({"-ms-touch-action":"none","touch-action":"none"}),t.preventDefault(),this.origin={x:t.changedTouches?t.changedTouches[0].pageX:t.pageX,y:t.changedTouches?t.changedTouches[0].pageY:t.pageY,transform:this.element.compute("transform")};var i=this.element[0].getBoundingClientRect();if(this.origin.offset={clientRect:i,scroll:{x:window.scrollX,y:window.scrollY},x:this.origin.x-i.right,y:i.top-this.origin.y},"grid"===this.element.data("lm-blocktype")&&Math.abs(this.origin.offset.x)<i.width)return!1;var a=Math.abs(this.origin.offset.x),r="grid"===this.element.parent().data("lm-blocktype")&&this.element.parent().parent().data("lm-root")||"container"==this.element.parent().parent().data("lm-blocktype")&&(this.element.parent().parent().parent().data("lm-root")||"wrapper"==this.element.parent().parent().parent().data("lm-blocktype"));return("grid"==this.element.data("lm-blocktype")&&"container"===this.element.parent().data("lm-blocktype")&&this.element.parent().parent().parent().data("lm-root")||"section"===this.element.parent().data("lm-blocktype")&&this.element.parent().parent().parent().data("lm-root"))&&(r=!1),a<6&&this.element.parent().find(":last-child")!==this.element||r&&a>3&&a<10?!this.element.parent('[data-lm-blocktype="atoms"]')&&(this.emit("dragdrop:resize",t,this.element,(this.element.parent("[data-mm-id]")||this.element).siblings(":not(.placeholder)"),this.origin.offset.x),!1):!(!r&&(!e.hasClass("submenu-column")||n.matches(".submenu-reorder")||n.parent(".submenu-reorder")))||(this.element.style({"pointer-events":"none",zIndex:100}),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){c("body").on(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){c("body").on(t,this.bound("deferStop"))},this)),this.emit("dragdrop:start",t,this.element),this.element)},deferStop:function(t){var e=this;setTimeout(function(){e.stop(t)},0)},stop:function(t){if(clearTimeout(this.scrollInterval),c("html").attribute("style",null),!this.moved&&this.options.catchClick)return this.element.style({transform:this.origin.transform||"translate(0, 0)"}),this.emit("dragdrop:stop",t,this.matched,this.element),this._removeStyleAttribute(this.element),this.emit("dragdrop:stop:animation",this.element),this.emit("dragdrop:click",t,this.element),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){c("body").off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){c("body").off(t,this.bound("deferStop"))},this)),void(this.element=null);var e={duration:"250ms"};return this.removeElement?(this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){c("body").off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){c("body").off(t,this.bound("deferStop"))},this)),this.emit("dragdrop:stop:erase",t,this.element)):(this.element&&(this.emit("dragdrop:stop",t,this.matched,this.element),this.matched&&this.element.style({opacity:0,transform:"translate(0, 0)"}).removeClass("active"),this.matched?(this.element.style({transform:this.origin.transform||"translate(0, 0)",opacity:1}),this._removeStyleAttribute(this.element),this.emit("dragdrop:stop:animation",this.element)):(e.callback=s(function(t){this._removeStyleAttribute(t),setTimeout(s(function(){this.emit("dragdrop:stop:animation",t)},this),1)},this,this.element),this.element.animate({transform:this.origin.transform||"translate(0, 0)",opacity:1},e))),this.DRAG_EVENTS.EVENTS.MOVE.forEach(s(function(t){c("body").off(t,this.bound("move"))},this)),this.DRAG_EVENTS.EVENTS.STOP.forEach(s(function(t){c("body").off(t,this.bound("deferStop"))},this)),void(this.element=null))},move:function(t){if(this.options.catchClick){var e={x:t.changedTouches?t.changedTouches[0].pageX:t.pageX,y:t.changedTouches?t.changedTouches[0].pageY:t.pageY};if(Math.abs(e.x-this.origin.x)<=3&&Math.abs(e.y-this.origin.y)<=3)return;this.moved||(this.element.style({opacity:.5}),this.emit("dragdrop:move:once",this.element)),this.moved=!0}var n=t.clientX||t.touches&&t.touches[0].clientX||0,i=t.clientY||t.touches&&t.touches[0].clientY||0,a=document.elementFromPoint(n,i),r="grid"===this.element.data("lm-blocktype"),o=this.scrollHeight,s=document.body.clientHeight,l=window.pageYOffset;if(clearTimeout(this.scrollInterval),a){if(!c(a).matches("#trash")&&!c(a).parent("#trash")){var u,d,h=c("#g5-container #trash");i+50>=s&&l+s<o?this.scrollInterval=setInterval(function(){d=(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),u=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),window.scrollTo(d,Math.min(o,u+4))},8):i-50<=(h?h[0].offsetHeight:0)&&o>0&&(this.scrollInterval=setInterval(function(){d=(window.pageXOffset||document.documentElement.scrollLeft)-(document.documentElement.clientLeft||0),u=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0),window.scrollTo(d,Math.max(0,u-4))},8))}if(r&&(a=document.elementFromPoint(n+30,i)),!a)return!1;this.matched=c(a).matches(this.options.droppables)?a:(c(a).parent(this.options.droppables)||[!1])[0],this.isPlaceHolder=!!c(a).matches("[data-lm-placeholder]")||!!c(a).parent("[data-lm-placeholder]");var p=this.lastX-n,f=this.lastY-i,m=Math.abs(p)>Math.abs(f)&&p>0&&"left"||Math.abs(p)>Math.abs(f)&&p<0&&"right"||Math.abs(f)>Math.abs(p)&&f>0&&"up"||"down";p=(t.changedTouches?t.changedTouches[0].pageX:t.pageX)-this.origin.x,f=(t.changedTouches?t.changedTouches[0].pageY:t.pageY)-this.origin.y;var g=this.element.parent(".particles-container");if(g&&(f+=this.origin.offset.scroll.y-window.scrollY),this.direction=m,this.element.style({transform:"translate("+p+"px, "+f+"px)"}),!this.isPlaceHolder)if(this.lastMatched&&this.matched!==this.lastMatched&&(this.emit("dragdrop:leave",t,this.lastMatched,this.element),this.lastMatched=!1),this.matched&&this.matched!==this.lastMatched&&a!==this.lastOvered&&(this.emit("dragdrop:enter",t,this.matched,this.element),this.lastMatched=this.matched),this.matched&&this.lastMatched){var v=this.matched.getBoundingClientRect(),b={x:Math.abs(n-v.left)<v.width/2&&"before"||Math.abs(n-v.left)>=v.width-v.width/2&&"after"||"other",y:Math.abs(i-v.top)<v.height/2&&"above"||Math.abs(i-v.top)>=v.height/2&&"below"||"other"};this.emit("dragdrop:location",t,b,this.matched,this.element)}else this.emit("dragdrop:nolocation",t);this.lastOvered=a,this.lastX=n,this.lastY=i,this.emit("dragdrop:move",t,this.element)}},_removeStyleAttribute:function(t){t=c(t||this.element),t.data("mm-id")||t.attribute("style",null)}});e.exports=d},{"../utils/elements.utils":64,"./drag.events":51,"elements/delegation":108,"elements/events":110,"mout/array/contains":164,"mout/function/bind":190,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298}],51:[function(t,e,n){"use strict";var i=function(t){t=t.split(" ");for(var e,n=document.createElement("div"),i=!1,a=t.length-1;a>=0;a--)if(e="on"+t[a],i=e in n,i||(n.setAttribute(e,"return;"),i="function"==typeof n[e]),i){i=t[a];break}return n=null,i},a=function(t){t=t.split(" ");for(var e=!1,n=[],a=t.length-1;a>=0;a--)e=i(t[a]),e&&n.push(e);return n},r={START:i("mousedown touchstart MSPointerDown pointerdown"),MOVE:i("mousemove touchmove MSPointerMove pointermove"),STOP:i("mouseup touchend MSPointerUp pointerup")},o={START:a("mousedown touchstart MSPointerDown pointerdown"),MOVE:a("mousemove touchmove MSPointerMove pointermove"),STOP:a("mouseup touchend MSPointerUp pointerup")};e.exports={EVENT:r,EVENTS:o}},{}],52:[function(t,e,n){"use strict";var i=t("prime"),a=t("../utils/elements.utils"),r=t("prime/emitter"),o=t("prime-util/prime/bound"),s=t("prime-util/prime/options"),l=new i({mixin:[s,o],inherits:r,constructor:function(t,e){this.setOptions(e),this.element=a(t),this.element&&this.hide(!0)},setTop:function(){"undefined"==typeof this.top&&(this.top=parseInt(this.element.compute("top"),10),this.left=a("#g5-container")[0].getBoundingClientRect().left,"grav"==GANTRY_PLATFORM&&(this.left=0))},show:function(t){this.element&&(this.setTop(),this.out(),this.element[t?"style":"animate"]({top:this.top,left:this.left},{duration:"150ms"}))},hide:function(t){if(this.element){this.setTop(),this.element.style("display","block");var e={top:-this.element[0].offsetHeight};this.out(),this.element[t?"style":"animate"](e,{duration:"150ms"})}},over:function(){this.element.find(".trash-zone").animate({transform:"scale(1.2)"},{duration:"150ms",equation:"cubic-bezier(0.5,0,0.5,1)"})},out:function(){this.element.find(".trash-zone").animate({transform:"scale(1)"},{duration:"150ms",equation:"cubic-bezier(0.5,0,0.5,1)"})}});e.exports=l},{"../utils/elements.utils":64,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298}],53:[function(t,e,n){"use strict";var i=t("./selectize");e.exports={modal:t("./modal"),togglers:t("./togglers"),collapse:t("./collapse"),selectize:i,toastr:t("./toastr")}},{"./collapse":49,"./modal":54,"./selectize":57,"./toastr":58,"./togglers":59}],54:[function(t,e,n){"use strict";var i=t("prime"),a=t("../utils/elements.utils"),r=t("elements/zen"),o=t("prime/map")(),s=t("prime/emitter"),l=t("prime-util/prime/bound"),c=t("prime-util/prime/options"),u=t("elements/domready"),d=t("mout/function/bind"),h=t("mout/array/map"),p=t("mout/array/forEach"),f=t("mout/array/last"),m=t("mout/object/merge"),g=(t("mout/string/trim"),t("agent")),v=!1,b=new i({mixin:[l,c],inherits:s,animationEndEvent:["animationend","webkitAnimationEnd","mozAnimationEnd","MSAnimationEnd","oanimationend"],globalID:1,options:{baseClassNames:{container:"g5-dialog",content:"g5-content",overlay:"g5-overlay",close:"g5-close",closing:"g5-closing",open:"g5-dialog-open"},content:"",remote:"",showCloseButton:!0,escapeToClose:!0,overlayClickToClose:!0,appendNode:"#g5-container",className:"g5-dialog-theme-default",css:{},overlayClassName:"",overlayCSS:"",contentClassName:"",contentCSS:"",closeClassName:"g5-dialog-close",closeCSS:"",afterOpen:null,afterClose:null},constructor:function(t){this.setOptions(t),this.defaults=this.options;var e=this;u(function(){a(window).on("keydown",function(t){if(27===t.keyCode)return e.closeByEscape()}),e.animationEndEvent=v}),this.on("dialogOpen",function(t){a("body").addClass(t.baseClassNames.open),a("html").addClass(t.baseClassNames.open)}).on("dialogAfterClose",d(function(t){var e=this.getAll();e&&e.length||(a("body").removeClass(t.baseClassNames.open),a("html").removeClass(t.baseClassNames.open))},this))},storage:function(){return o},open:function(t){t=m(this.options,t),t.id=this.globalID++;var e={};if(e.container=r("div").addClass(t.baseClassNames.container).addClass(t.className).style(t.css).attribute("tabindex","0").attribute("role","dialog").attribute("aria-hidden","true").attribute("aria-labelledby","g-modal-labelledby").attribute("aria-describedby","g-modal-describedby"),o.set(e.container,{dialog:t}),e.overlay=r("div").addClass(t.baseClassNames.overlay).addClass(t.overlayClassName).style(t.overlayCSS),o.set(e.overlay,{dialog:t}),t.overlayClickToClose&&(e.container.on("click",d(this._overlayClick,this,e.container[0])),e.overlay.on("click",d(this._overlayClick,this,e.overlay[0]))),e.container.appendChild(e.overlay),e.content=r("div").addClass(t.baseClassNames.content).addClass(t.contentClassName).style(t.contentCSS).attribute("aria-live","assertive").attribute("tabindex","0").html(t.content),o.set(e.content,{dialog:t}),e.container.appendChild(e.content),t.overlayClickToClose&&e.content.on("click",function(){return!0}),t.remote&&t.remote.length>1){this.showLoading(),t.method=t.method||"get";var n=g();n.method(t.method),n.url(t.remote),t.data&&n.data(t.data),n.send(d(function(n,i){if(e.container.hasClass(t.baseClassNames.closing))return void this.hideLoading();e.content.html(i.body.html||i.body),i.body.success||i.body.html||e.content.style({width:"90%"}),this.hideLoading(),t.remoteLoaded&&!e.container.hasClass(t.baseClassNames.closing)&&t.remoteLoaded(i,t),e.container.attribute("aria-hidden","false"),setTimeout(function(){e.content[0].focus()},0);var r=a("[data-selectize]");r&&r.selectize()},this))}else e.container.attribute("aria-hidden","false"),setTimeout(function(){e.content[0].focus()},0);t.showCloseButton&&(e.closeButton=r("div").addClass(t.baseClassNames.close).addClass(t.closeClassName).attribute("role","button").attribute("aria-label","Close").style(t.closeCSS),o.set(e.closeButton,{dialog:t}),e.content.appendChild(e.closeButton)),e.container.delegate("click",".g5-dialog-close",d(function(t){t.preventDefault(),this._closeButtonClick(e.container)},this));var i=a(t.appendNode);if("wordpress"==GANTRY_PLATFORM&&(i=a("#customize-preview")||a("#widgets-right")||a(t.appendNode),"#"+i.id()!=t.appendNode)){var s,l,c=a("#wpwrap")||a(".wp-customizer");"wpwrap"==c.id()?(s=c.nextSibling(t.appendNode),l=s?s:r("div.g5wp-out-of-scope"+t.appendNode).after(c)):(s=c.find("> "+t.appendNode),l=s?s:r("div.g5wp-out-of-scope"+t.appendNode).top(c)),i=l}return i.appendChild(e.container),t.elements=e,t.afterOpen&&t.afterOpen(e.content,t),setTimeout(d(function(){return this.emit("dialogOpen",t)},this),0),e.content},getAll:function(){var t=this.options;return a("."+t.baseClassNames.container+":not(."+t.baseClassNames.closing+") ."+t.baseClassNames.content)},getByID:function(t){var e=this.getAll();return e?a(e.filter(function(e){return e=a(e),o.get(e).dialog.id===t})):[]},getLast:function(){var t;return t=h(this.getAll(),function(t){return t=a(t),o.get(t).dialog.id}),!!t.length&&Math.max.apply(Math,t)},close:function(t){if(!t){var e=a(f(this.getAll()));if(!e)return!1;t=o.get(e).dialog.id}return this.closeByID(t)},closeAll:function(){var t;return t=h(this.getAll(),function(t){return t=a(t),o.get(t).dialog.id}),!!t.length&&(p(t.reverse(),function(t){return this.closeByID(t)},this),!0)},closeByID:function(t){var e=this.getByID(t);if(!e||!e.length)return!1;var n,i;n=o.get(e).dialog.elements.container,i=m({},o.get(e).dialog);var a=function(){if(i.beforeClose)return i.beforeClose(e,i)},r=d(function(){if(i.remoteLoaded&&(i.remoteLoaded=function(){}),e.emit("dialogClose",i),n.remove(),this.emit("dialogAfterClose",i),i.afterClose)return i.afterClose(e,i)},this);return v?(a(),n.off(this.animationEndEvent).on(this.animationEndEvent,function(){return r()}).addClass(i.baseClassNames.closing)):(a(),r()),!0},closeByEscape:function(){var t=this.getLast();if(t===!1)return!1;var e=this.getByID(t);return!!o.get(e).dialog.escapeToClose&&this.closeByID(t)},enableCloseByOverlay:function(){var t=this.getLast();if(t===!1)return!1;var e=o.get(this.getByID(t)).dialog.elements;e.container.on("click",d(this._overlayClick,this,e.container[0])),e.overlay.on("click",d(this._overlayClick,this,e.overlay[0])),e.content.on("click",function(){return!0})},showLoading:function(){return this.hideLoading(),a("#g5-container").appendChild(r("div.g5-dialog-loading-spinner."+this.options.className))},hideLoading:function(){var t=a(".g5-dialog-loading-spinner");return!!t&&t.remove()},_overlayClick:function(t,e){if(e.target===t)return this.close(o.get(a(t)).dialog.id)},_closeButtonClick:function(t){return this.close(o.get(a(t)).dialog.id)}});u(function(){var t=(document.body||document.documentElement).style;p(["animation","WebkitAnimation","MozAnimation","MsAnimation","OAnimation"],function(e,n){v||(v=void 0!==t[e]&&b.prototype.animationEndEvent[n])})});var y=new b;e.exports=y},{"../utils/elements.utils":64,agent:78,"elements/domready":109,"elements/zen":135,"mout/array/forEach":172,"mout/array/last":177,"mout/array/map":178,"mout/function/bind":190,"mout/object/merge":235,"mout/string/trim":270,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298,"prime/map":300}],55:[function(t,e,n){"use strict";var i=t("prime"),a=t("../utils/elements.utils"),r=t("elements/zen"),o=t("prime/map")(),s=t("prime/emitter"),l=t("prime-util/prime/bound"),c=t("prime-util/prime/options"),u=(t("elements/domready"),t("mout/function/bind")),d=(t("mout/array/map"),t("mout/array/forEach"),t("mout/array/last"),t("mout/object/merge"),t("mout/lang/isFunction")),h=t("agent"),p=new i({mixin:[l,c],inherits:s,options:{mainClass:"g5-popover",placement:"auto",width:"auto",height:"auto",trigger:"click",style:"",delay:300,cache:!0,multi:!1,arrow:!0,title:"",content:"",closeable:!1,padding:!0,targetEvents:!0,allowElementsClick:!1,url:"",type:"html",where:"#g5-container",template:'<div class="g5-popover"><div class="g-arrow"></div><div class="g5-popover-inner"><a href="#" class="close">x</a><h3 class="g5-popover-title"></h3><div class="g5-popover-content"><i class="icon-refresh"></i> <p>&nbsp;</p></div></div></div>'},constructor:function(t,e){this.setOptions(e),this.element=a(t),"click"===this.options.trigger?this.element.off("click",this.bound("toggle")).on("click",this.bound("toggle")):this.element.off("mouseenter",this.bound("mouseenterHandler")).off("mouseleave",this.bound("mouseleaveHandler")).on("mouseenter",this.bound("mouseenterHandler")).on("mouseleave",this.bound("mouseleaveHandler")),this._poped=!1},destroy:function(){this.hide(),o.set(this.element[0],null),this.element.off("click",this.bound("toggle")).off("mouseenter",this.bound("mouseenterHandler")).off("mouseleave",this.bound("mouseleaveHandler")),this.$target&&this.$target.remove()},hide:function(t){t&&(t.preventDefault(),t.stopPropagation()),this.element.emit("hide.popover",this),this.$target&&(this.$target.removeClass("in").style({display:"none"}),this.$target.remove()),this.element.emit("hidden.popover",this),this._focusAttached&&(a("body").off("focus",this.bound("focus"),!0),this._focusAttached=!1,this.restoreFocus())},toggle:function(t){t&&(t.preventDefault(),t.stopPropagation()),this[this.getTarget().hasClass("in")?"hide":"show"]()},focus:function(t){if(this.getTarget().hasClass("in")){var e=a(t.target||t);this.$target[0]===e[0]||e.parent(this.$target)||this.element[0]===e[0]||e.parent(this.element)||(this.hide(),this._focusAttached&&this.restoreFocus())}},restoreFocus:function(t){t=a(t||this.element);var e=t.tag();setTimeout(function(){if("a"!=e&&"input"!=e&&"button"!=e){var n=t.find("a, button, input");n&&n[0].focus()}else t[0].focus()},0)},hideAll:function(t){var e="";e=t?"div."+this.options.mainClass:"div."+this.options.mainClass+":not(."+this.options.mainClass+"-fixed)";var n=a(e);return n?(n.removeClass("in").style({display:"none"}).attribute("tabindex","-1"),!t&&this._focusAttached&&this.restoreFocus(),this._focusAttached&&(a("body").off("focus",this.bound("focus"),!0),this._focusAttached=!1),this):this},show:function(){var t=this.getTarget().attribute("class",null).addClass(this.options.mainClass).attribute("tabindex","0");if(this.options.multi||this.hideAll(),this.element.emit("beforeshow.popover",this),!this.options.cache||!this._poped){if(this.setTitle(this.getTitle()),this.options.closeable||t.find(".close").off("click").remove(),this.isAsync())return this.setContentASync(this.options.content),void this.displayContent();this.setContent(this.getContent()),t.style({display:"block"})}this.displayContent(),this.bindBodyEvents(),setTimeout(function(){t[0].focus()},0),this._focusAttached||(a("body").on("focus",this.bound("focus"),!0),this._focusAttached=!0)},displayContent:function(){var t,e,n,i=this.element.position(),o=this.getTarget().attribute("class",null).addClass(this.options.mainClass),s=this.getContentElement();this.element.emit("show.popover",this),"auto"!==this.options.width&&o.style({width:this.options.width}),"auto"!==this.options.height&&s.style({height:this.options.height}),!this.options.arrow&&o.find(".g-arrow")&&o.find(".g-arrow").remove();var l=a(this.options.where);if("wordpress"==GANTRY_PLATFORM&&(l=a("#customize-preview")||a("#widgets-right")||a(this.options.where),"#"+l.id()!=this.options.where)){var c,u,d=a("#wpwrap")||a(".wp-customizer");"wpwrap"==d.id()?(c=d.nextSibling(this.options.where),u=c?c:r("div.g5wp-out-of-scope"+this.options.where).after(d)):(c=d.find("> "+this.options.where),u=c?c:r("div.g5wp-out-of-scope"+this.options.where).top(d)),l=u}o.remove().style({top:-1e3,left:-1e3,display:"block"}).bottom(l),this.options.style&&("string"==typeof this.options.style&&(this.options.style=this.options.style.split(",").map(Function.prototype.call,String.prototype.trim)),this.options.style.forEach(function(t){this.$target.addClass(this.options.mainClass+"-"+t)},this)),this.options.padding||(s.css("height",s.position().height),this.$target.addClass("g5-popover-no-padding")),t=o[0].offsetWidth,e=o[0].offsetHeight,n=this.getPlacement(i,e),this.options.targetEvents&&this.initTargetEvents();var h=this.getTargetPosition(i,n,t,e);if(this.$target.style(h.position).addClass(n).addClass("in"),"iframe"===this.options.type){var p=o.find("iframe");p.style({width:o.position().width,height:p.parent().position.height})}if(this.options.arrow||this.$target.style({margin:0}),this.options.arrow){var f=this.$target.find(".g-arrow");f.attribute("style",null),h.arrowOffset&&f.style(h.arrowOffset)}this._poped=!0,this.element[0].focus(),this.element.emit("shown.popover",this)},getTarget:function(){return this.$target||(this.$target=a(r("div").html(this.options.template).children()[0])),this.$target},getTitleElement:function(){return this.getTarget().find("."+this.options.mainClass+"-title")},getContentElement:function(){return this.getTarget().find("."+this.options.mainClass+"-content")},getTitle:function(){return this.options.title||this.element.data("g5-popover-title")||this.element.attribute("title")},setTitle:function(t){var e=this.getTitleElement();t?e.html(t):e.remove()},hasContent:function(){return this.getContent()},getContent:function(){if(this.options.url)"iframe"===this.options.type&&(this.content=a('<iframe frameborder="0"></iframe>').attribute("src",this.options.url));else if(!this.content){var t="";t=d(this.options.content)?this.options.content.apply(this.element[0],arguments):this.options.content,this.content=this.element.data("g5-popover-content")||t}return this.content},setContent:function(t){var e=this.getTarget();this.getContentElement().html(t),this.$target=e},isAsync:function(){return"async"===this.options.type},setContentASync:function(t){h("get",this.options.url,u(function(e,n){t&&d(t)?this.content=t.apply(this.element[0],[n]):this.content=n.body.html,this.setContent(this.content);var i=this.getContentElement();i.attribute("style",null),setTimeout(u(function(){i.parent("."+this.options.mainClass)[0].focus()},this),0),this.displayContent(),this.bindBodyEvents();var r=a("[data-selectize]");r&&r.selectize()},this))},bindBodyEvents:function(){var t=a("body");t.off("keyup",this.bound("escapeHandler")).on("keyup",this.bound("escapeHandler")),t.off("click",this.bound("bodyClickHandler")).on("click",this.bound("bodyClickHandler"))},mouseenterHandler:function(){this._timeout&&clearTimeout(this._timeout),this.getTarget()[0].offsetWidth>0||this.getTarget()[0].offsetHeight>0||this.show()},mouseleaveHandler:function(){this._timeout=setTimeout(u(function(){this.hide()},this),this.options.delay)},escapeHandler:function(t){27===t.keyCode&&this.hideAll()},bodyClickHandler:function(){this.hideAll()},targetClickHandler:function(t){var e=a(t.target);e.matches(this.options.allowElementsClick)&&t.preventDefault(),e.parent("[data-g-popover-follow]")||null!==e.data("g-popover-follow")||t.stopPropagation();
},initTargetEvents:function(){"click"!==this.options.trigger&&this.$target.off("mouseenter",this.bound("mouseenter")).off("mouseleave",this.bound("mouseleave")).on("mouseenter",this.bound("mouseenterHandler")).on("mouseleave",this.bound("mouseleaveHandler"));var t=this.$target.find(".close");t&&t.off("click",this.bound("hide")).on("click",this.bound("hide")),this.$target.off("click",this.bound("targetClickHandler")).on("click",this.bound("targetClickHandler"))},getPlacement:function(t,e){var n,i=document.documentElement,a=document.body,r=i.clientWidth,o=i.clientHeight,s=Math.max(a.scrollTop,i.scrollTop),l=Math.max(a.scrollLeft,i.scrollLeft),c=Math.max(0,t.left-l),u=Math.max(0,t.top-s),d=20;return n="function"==typeof this.options.placement?this.options.placement.call(this,this.getTarget()[0],this.element[0]):this.element.data("g5-popover-placement")||this.options.placement,"auto"===n&&(c<r/3?n=u<o/3?"bottom-right":u<2*o/3?"right":"top-right":c<2*r/3?n=u<o/3?"bottom":u<2*o/3?"bottom":"top":(n=u>e+d?"top-left":"bottom-left",n=u<o/3?"bottom-left":u<2*o/3?"left":"top-left")),n},getTargetPosition:function(t,e,n,i){var a=t,r=this.element[0].offsetWidth,o=this.element[0].offsetHeight,s={},l=null,c=this.options.arrow?28:0,u=r<c+10?c:0,d=o<c+10?c:0;switch(e){case"bottom":s={top:a.top+a.height,left:a.left+a.width/2-n/2};break;case"top":s={top:a.top-i,left:a.left+a.width/2-n/2};break;case"left":s={top:a.top+a.height/2-i/2,left:a.left-n};break;case"right":s={top:a.top+a.height/2-i/2,left:a.left+a.width};break;case"top-right":s={top:a.top-i,left:a.left-u},l={left:r/2+u};break;case"top-left":s={top:a.top-i,left:a.left-n+a.width+u},l={left:n-r/2-u};break;case"bottom-right":s={top:a.top+a.height,left:a.left-u},l={left:r/2+u};break;case"bottom-left":s={top:a.top+a.height,left:a.left-n+a.width+u},l={left:n-r/2-u};break;case"right-top":s={top:a.top-i+a.height+d,left:a.left+a.width},l={top:i-o/2-d};break;case"right-bottom":s={top:a.top-d,left:a.left+a.width},l={top:o/2+d};break;case"left-top":s={top:a.top-i+a.height+d,left:a.left-n},l={top:i-o/2-d};break;case"left-bottom":s={top:a.top,left:a.left-n},l={top:o/2}}return{position:s,arrowOffset:l}}});a.implement({getPopover:function(t){var e=o.get(this);return e||"destroy"===t||(t=t||{},e=new p(this,t),o.set(this,e),this.PopoverDefined=!0),e},popover:function(t){return this.forEach(function(e){var n=o.get(e);n||"destroy"===t||(t=t||{},n=new p(e,t),o.set(e,n))})},position:function(){var t=this[0],e=a("#g5-container")[0].getBoundingClientRect(),n={left:0,right:0,top:0,bottom:0};return"undefined"!=typeof t.getBoundingClientRect&&(n=t.getBoundingClientRect()),{x:n.left-e.left,left:n.left-e.left,y:n.top-e.top,top:n.top-e.top,right:n.right-e.right,bottom:n.bottom-e.bottom,width:n.right-n.left,height:n.bottom-n.top}}}),e.exports=a},{"../utils/elements.utils":64,agent:78,"elements/domready":109,"elements/zen":135,"mout/array/forEach":172,"mout/array/last":177,"mout/array/map":178,"mout/function/bind":190,"mout/lang/isFunction":203,"mout/object/merge":235,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298,"prime/map":300}],56:[function(t,e,n){"use strict";var i=t("elements"),a=t("prime"),r=t("prime/emitter"),o=t("prime-util/prime/bound"),s=t("prime-util/prime/options"),l=t("elements/zen"),c=t("moofx"),u=t("mout/function/bind"),d=t("mout/lang/isArray"),h=t("mout/lang/isNumber"),p=new a({mixin:[o,s],inherits:r,options:{value:0,size:50,startAngle:-Math.PI/2,thickness:"auto",fill:{gradient:["#9e38eb","#4e68fc"]},emptyFill:"rgba(0, 0, 0, .1)",animation:{duration:1200,equation:"cubic-bezier(0.645, 0.045, 0.355, 1)"},animationStartValue:0,reverse:!1,lineCap:"butt",insertElement:null,insertLocation:"before"},constructor:function(t,e){this.setOptions(e),this.element=this.element||i(t),this.canvas=this.canvas||l("canvas")[this.options.insertLocation||"before"](this.options.insertElement||this.element)[0],this.radius=this.options.size/2,this.arcFill=null,this.lastFrameValue=0,this.canvas.width=this.options.size,this.canvas.height=this.options.size,this.ctx=this.canvas.getContext("2d"),this.initFill(),this.draw()},initFill:function(){var t=this.options.fill,e=this.options.size,n=this.ctx;if(!t)throw Error("The fill is not specified.");if(t.color&&(this.arcFill=t.color),t.gradient){var i=t.gradient;if(1==i.length)this.arcFill=i[0];else{for(var a=t.gradientAngle||0,r=t.gradientDirection||[e/2*(1-Math.cos(a)),e/2*(1+Math.sin(a)),e/2*(1+Math.cos(a)),e/2*(1-Math.sin(a))],o=n.createLinearGradient.apply(n,r),s=0;s<i.length;s++){var l=i[s],c=s/(i.length-1);d(l)&&(c=l[1],l=l[0]),o.addColorStop(c,l)}this.arcFill=o}}},draw:function(){this[this.options.animation?"drawAnimated":"drawFrame"](this.options.value)},drawFrame:function(t){this.lastFrameValue=t,this.ctx.clearRect(0,0,this.options.size,this.options.size),this.drawEmptyArc(t),this.drawArc(t)},drawArc:function(t){var e=this.ctx,n=this.radius,i=this.getThickness(),a=this.options.startAngle;e.save(),e.beginPath(),this.options.reverse?e.arc(n,n,n-i/2,a-2*Math.PI*t,a):e.arc(n,n,n-i/2,a,a+2*Math.PI*t),e.lineWidth=i,e.lineCap=this.options.lineCap,e.strokeStyle=this.arcFill,e.stroke(),e.restore()},drawEmptyArc:function(t){var e=this.ctx,n=this.radius,i=this.getThickness(),a=this.options.startAngle;t<1&&(e.save(),e.beginPath(),t<=0?e.arc(n,n,n-i/2,0,2*Math.PI):this.reverse?e.arc(n,n,n-i/2,a,a-2*Math.PI*t):e.arc(n,n,n-i/2,a+2*Math.PI*t,a),e.lineWidth=i,e.strokeStyle=this.options.emptyFill,e.stroke(),e.restore())},drawAnimated:function(t){this.element.emit("progress-animation-start"),c(u(function(e){var n=this.options.animationStartValue*(1-e)+t*e;this.drawFrame(n),this.element.emit("progress-animation-change",e,n)},this),{duration:this.options.animation.duration||"1200",equation:this.options.animation.equation||"linear",callback:u(function(){this.options.animation.callback&&this.options.animation.callback(),this.element.emit("progress-animation-end")},this)}).start(0,1)},getThickness:function(){return h(this.options.thickness)?this.options.thickness:this.options.size/14}});e.exports=p},{elements:111,"elements/zen":135,moofx:136,"mout/function/bind":190,"mout/lang/isArray":201,"mout/lang/isNumber":205,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298}],57:[function(t,e,n){"use strict";var i=t("prime"),a=t("elements/domready"),r=t("elements/zen"),o=t("sifter"),s=t("prime/emitter"),l=t("prime-util/prime/bound"),c=t("prime-util/prime/options"),u=t("../utils/elements.utils"),d=(t("moofx"),t("mout/function/bind")),h=t("mout/collection/forEach"),p=t("mout/array/indexOf"),f=t("mout/array/last"),m=t("mout/function/debounce"),g=t("mout/lang/isArray"),v=t("mout/lang/isBoolean"),b=t("mout/object/merge"),y=(t("mout/object/unset"),t("mout/object/size")),w=(t("mout/object/values"),t("mout/string/escapeHtml")),x=t("mout/string/trim"),k=t("mout/string/slugify"),S=/Mac/.test(navigator.userAgent),C=(/MSIE 9/i.test(navigator.userAgent)||/MSIE 10/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent),65),T=13,E=27,O=37,I=38,_=80,A=39,N=40,j=78,D=8,F=46,z=16,R=S?91:17,L=S?18:17,P=9,M=1,B=2,$=!/android/i.test(window.navigator.userAgent)&&!!document.createElement("form").validity,H=function(t){return"undefined"==typeof t||null===t?null:"boolean"==typeof t?t?"1":"0":t+""},q=function(t){return"undefined"!=typeof t},G=function(t){return(t+"").replace(/\$/g,"$$$$")},U=function(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}},V=function(t,e,n){var i,a=t.emit,r={};t.emit=function(){var n=arguments[0];return e.indexOf(n)===-1?a.apply(t,arguments):void(r[n]=arguments)},n.apply(t,[]),t.emit=a;for(i in r)r.hasOwnProperty(i)&&a.apply(t,r[i])},Y=function(t){var e=document.createElement("div");return e.appendChild(t.cloneNode(!0)),e.innerHTML},J=function(t){var e={};if("selectionStart"in t)e.start=t.selectionStart,e.length=t.selectionEnd-e.start;else if(document.selection){t.focus();var n=document.selection.createRange(),i=document.selection.createRange().text.length;n.moveStart("character",-t.value.length),e.start=n.text.length-i,e.length=i}return e},W=function(t,e,n){var i,a,r={};if(n)for(i=0,a=n.length;i<a;i++)r[n[i]]=t.compute(n[i]);else r=t.compute();e.style(r)},X=null,K=function(t,e){if(!t)return 0;var n;return X?(n=X,n.text(t)):(n=r("test").style({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(t).bottom("body"),W(e,n,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]),X=n),n[0].offsetWidth},Q=function(t,e){if("string"!=typeof e||e.length){var n="string"==typeof e?new RegExp(e,"i"):e,i=function(t){var e=0;if(3===t.nodeType){var a=t.data.search(n);if(a>=0&&t.data.length>0){var r=t.data.match(n),o=document.createElement("span");o.className="g-highlight";var s=t.splitText(a),l=(s.splitText(r[0].length),s.cloneNode(!0));o.appendChild(l),s.parentNode.replaceChild(o,s),e=1}}else if(1===t.nodeType&&t.childNodes&&!/(script|style)/i.test(t.tagName))for(var c=0;c<t.childNodes.length;++c)c+=i(t.childNodes[c]);return e};return h(t,function(t){i(t)})}},Z=function(t){t=u(t);var e=null,n=function(n,i){var a,r,o,s,l,c,u,d;i=i||window.event||{},n=n||{},i.metaKey||i.altKey||(n.force||t.selectizeGrow!==!1)&&(a=t.value(),i.type&&"keydown"===i.type.toLowerCase()&&(r=i.keyCode,o=r>=97&&r<=122||r>=65&&r<=90||r>=48&&r<=57||32===r,r===F||r===D?(d=J(t[0]),d.length?a=a.substring(0,d.start)+a.substring(d.start+d.length):r===D&&d.start?a=a.substring(0,d.start-1)+a.substring(d.start+1):r===F&&"undefined"!=typeof d.start&&(a=a.substring(0,d.start)+a.substring(d.start+1))):o&&(c=i.shiftKey,u=String.fromCharCode(i.keyCode),u=c?u.toUpperCase():u.toLowerCase(),a+=u)),s=t.attribute("placeholder"),!a&&s&&(a=s),l=K(a,t)+4,l!==e&&(e=l,t[0].style.width=l+"px",t.emit("resize")))};t.on("keydown",n),t.on("keyup",n),t.on("update",n),t.on("blur",n),n()},tt=new i({mixin:[l,c],inherits:s,options:{delimiter:" ",splitOn:null,persist:!0,diacritics:!0,create:!1,createOnBlur:!0,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,closeAfterSelect:!1,searchOnKeypress:!0,scrollDuration:60,loadThrottle:300,loadingClass:"g-loading",dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",lockOptgroupOrder:!1,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"g-selectize-control",inputClass:"g-selectize-input",dropdownClass:"g-selectize-dropdown",dropdownContentClass:"g-selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},constructor:function(t,e){t=u(t),this.setOptions(e);var n=window.getComputedStyle&&window.getComputedStyle(t[0],null),i=n?n.getPropertyValue("direction"):t[0].currentStyle&&t[0].currentStyle.direction;i=i||t.parents("[dir]:first").attr("dir")||"",this.rand="selectize-id-"+(Math.random()+1).toString(36).substring(5),this.input=t,this.input.selectizeInstance=this,this.order=0,this.tabIndex=t.attribute("tabindex")||"",this.tagType="select"==t.tag()?M:B,this.rtl=/rtl/i.test(i),this.highlightedValue=null,this.isRequired=t.attribute("required"),h(["isOpen","isDisabled","isInvalid","isLocked","isFocused","isInputHidden","isSetup","isShiftDown","isCmdDown","isCtrlDown","ignoreFocus","ignoreBlur","ignoreHover","hasOptions"],function(t){this[t]=!1},this),this.currentResults=null,this.lastValue="",this.caretPos=0,this.loading=0,this.loadedSearches={},this.$activeOption=null,this.$activeItems=[],this.Optgroups={},this.Options={},this.UserOptions={},this.items=[],this.renderCache={},this.onSearchChange=null===this.options.loadThrottle?this.onSearchChange:m(this.onSearchChange,this.options.loadThrottle),this.sifter=new o(this.Options,{diacritics:this.options.diacritics});var a,r;if(this.options.Options){for(a=0,r=this.options.Options.length;a<r;a++)this.registerOption(this.options.Options[a]);delete this.options.Options}if(this.options.Optgroups){for(a=0,r=this.options.Optgroups.length;a<r;a++)this.registerOptionGroup(this.options.Optgroups[a]);delete this.options.Optgroups}this.options.mode=this.options.mode||(1===this.options.maxItems?"single":"multi"),v(this.options.hideSelected)||(this.options.hideSelected="multi"===this.options.mode),this.setupCallbacks(),this.setupTemplates(),this.setup()},setup:function(){var t,e,n,i,a,o,s,l,c=this.input;if(s=this.options.mode,l=c.attribute("class")||"",t=r("div").addClass(this.options.wrapperClass).addClass(l).addClass("g-"+s).after(this.input),e=r("div").addClass(this.options.inputClass).addClass("g-items").bottom(t),n=r('input[type="text"][autocomplete="off"][role="textbox"]').bottom(e).attribute("tabindex",c.disabled()?"-1":this.tabIndex),o=u(this.options.dropdownParent||t),i=r("div").addClass(this.options.dropdownClass).addClass("g-"+s).hide().bottom(o),a=r('div[id="'+this.rand+'"]').addClass(this.options.dropdownContentClass).bottom(i),this.options.copyClassesToDropdown&&i.addClass(l),"single"==s&&t.style("width",parseInt(c[0].offsetWidth)+12+24),(null===this.options.maxItems||this.options.maxItems>1)&&this.tagType===M&&c.attribute("multiple","multiple"),this.options.placeholder&&n.attribute("placeholder",this.options.placeholder),!this.options.splitOn&&this.options.delimiter){var h=this.options.delimiter.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");this.options.splitOn=new RegExp("\\s*"+h+"+\\s*")}c.attribute("autocorrect")&&n.attribute("autocorrect",c.attribute("autocorrect")),c.attribute("autocapitalize")&&n.attribute("autocapitalize",c.attribute("autocapitalize")),this.$wrapper=t,this.$control=e,this.$control_input=n,this.$dropdown=i,this.$dropdown_content=a,i.delegate("mouseover","[data-selectable]",d(function(){return this.onOptionHover.apply(this,arguments)},this)),i.delegate("mousedown","[data-selectable]",d(function(){return this.onOptionSelect.apply(this,arguments)},this)),i.delegate("click","[data-selectable]",d(function(){return this.onOptionSelect.apply(this,arguments)},this)),Z(n),e.delegate("mousedown","*:not(input)",d(function(t,n){return n==e||this.onItemSelect.apply(this,arguments)},this)),e.on("mousedown",d(function(){return this.onMouseDown.apply(this,arguments)},this)),e.on("click",d(function(){return this.onClick.apply(this,arguments)},this)),e.delegate("click",".g-remove-single-item",d(function(){return this.onItemRemoveViaX.apply(this,arguments)},this)),n.on("mousedown",function(t){t.stopPropagation()}),n.on("keydown",d(function(){return this.onKeyDown.apply(this,arguments)},this)),n.on("keyup",d(function(){return this.onKeyUp.apply(this,arguments)},this)),n.on("keypress",d(function(){return this.onKeyPress.apply(this,arguments)},this)),n.on("resize",d(function(){this.positionDropdown.apply(this,[])},this)),n.on("blur",d(function(){return this.onBlur.apply(this,arguments)},this)),n.on("focus",d(function(){return this.ignoreBlur=!1,this.onFocus.apply(this,arguments)},this)),n.on("paste",d(function(){return this.onPaste.apply(this,arguments)},this)),u(document).on("keydown",d(function(t){this.isCmdDown=t[S?"metaKey":"ctrlKey"],this.isCtrlDown=t[S?"altKey":"ctrlKey"],this.isShiftDown=t.shiftKey},this)),u(document).on("keyup",d(function(t){t.keyCode===L&&(this.isCtrlDown=!1),t.keyCode===z&&(this.isShiftDown=!1),t.keyCode===R&&(this.isCmdDown=!1)},this)),u(document).on("mousedown",d(function(t){if(this.isFocused){if(t.target===this.$dropdown[0]||t.target.parentNode===this.$dropdown[0])return t.preventDefault(),!1;this.$control.find(u(t.target))||t.target===this.$control[0]||this.blur(t.target)}},this)),u(window).on("scroll",d(function(){this.isOpen&&this.positionDropdown.apply(this,arguments)},this)),u(window).on("resize",d(function(){this.isOpen&&this.positionDropdown.apply(this,arguments)},this)),u(window).on("mousemove",d(function(){this.ignoreHover=!1},this)),this.revertSettings={$children:this.input.children(),tabindex:this.input.attribute("tabindex")},this.input.attribute("tabindex",-1).attribute("aria-hidden",!0).hide().after(t),g(this.options.items)&&(this.setValue(this.options.items),delete this.options.items),$&&this.input.on("invalid",d(function(t){t.preventDefault(),this.isInvalid=!0,this.refreshState()},this)),this.updateOriginalInput(),this.refreshItems(),this.refreshState(),this.updatePlaceholder(),this.isSetup=!0,this.input.disabled()&&this.disable(),this.on("change",this.onChange),this.input.selectizeInstance=this,this.input.addClass("selectized"),this.emit("initialize"),this.options.preload===!0&&this.onSearchChange(""),t.attribute("role","combobox").attribute("aria-autocomplete","list").attribute("aria-haspopup",!0).attribute("aria-expanded",!1).attribute("aria-labelledby",this.rand+"-"+k(this.getValue())),a.attribute("role","tree").attribute("aria-expanded",!1).attribute("aria-hidden",!0)},setupTemplates:function(){var t=this.options.labelField,e=this.options.valueField,n=this.options.optgroupLabelField,i=this.options.mode,a={optgroup:function(t){return'<div class="g-optgroup">'+t.html+"</div>"},optgroup_header:function(t,e){return'<div class="g-optgroup-header">'+e(t[n])+"</div>"},option:function(n,i){var a='<div class="g-option">'+i(n[t])+"</div>";return this.options.Subtitles&&(a='<div class="g-option"><span>'+i(n[t])+'</span> <div class="g-option-subtitle"><small>'+i(n[e])+"</small></div></div>"),a},item:function(n,a){var r="",o=a(n[e]);return"single"!==i&&(r='<span  class="g-remove-single-item" tabindex="-1" title="Remove">&times;</span></div>'),this.options.Subtitles&&(o="class name: "+o),'<div class="g-item" title="'+o+'">'+a(n[t])+r},option_create:function(t,e){return'<div class="g-create">Add <strong>'+e(t.input)+"</strong>&hellip;</div>"}};this.options.render=b({},a,this.options.render)},setupCallbacks:function(){var t,e,n={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",optgroup_add:"onOptionGroupAdd",optgroup_remove:"onOptionGroupRemove",optgroup_clear:"onOptionGroupClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad",focus:"onFocus",blur:"onBlur"};for(t in n)n.hasOwnProperty(t)&&(e=this.options[n[t]],e&&this.on(t,e))},onClick:function(t){this.isFocused||(this.focus(),t.preventDefault())},onMouseDown:function(t){var e=t.defaultPrevented||"undefined"==typeof t.defaultPrevented;u(t.target);if(this.isFocused){if(t.target!==this.$control_input[0])return"single"===this.options.mode?this.isOpen?this.close():this.open():e||this.setActiveItem(null),!1}else e||window.setTimeout(d(function(){this.focus()},this),0)},onChange:function(){this.input.emit("change",this.input.value(),this),u("body").emit("change",{target:this.input})},onPaste:function(t){this.isFull()||this.isInputHidden||this.isLocked?t.preventDefault():this.options.splitOn&&setTimeout(d(function(){for(var t=x(this.$control_input.value()||"").split(this.options.splitOn),e=0,n=t.length;e<n;e++)this.createItem(t[e])},this),0)},onKeyPress:function(t){if(this.isLocked)return t&&t.preventDefault();var e=String.fromCharCode(t.keyCode||t.which);return this.options.create&&"multi"===this.options.mode&&e===this.options.delimiter?(this.createItem(),t.preventDefault(),!1):void 0},onKeyDown:function(t){t.target===this.$control_input[0];if(this.isLocked)return void(t.keyCode!==P&&t.preventDefault());switch(t.keyCode){case C:if(this.isCmdDown)return void this.selectAll();break;case E:return void(this.isOpen&&(t.preventDefault(),t.stopPropagation(),this.close()));case j:if(!t.ctrlKey||t.altKey)break;case N:if(!this.isOpen&&this.hasOptions)this.open();else if(this.$activeOption){this.ignoreHover=!0;var e=this.getAdjacentOption(this.$activeOption,1);e&&this.setActiveOption(e,!0,!0)}return void t.preventDefault();case _:if(!t.ctrlKey||t.altKey)break;case I:if(this.$activeOption){this.ignoreHover=!0;var n=this.getAdjacentOption(this.$activeOption,-1);n&&this.setActiveOption(n,!0,!0)}return void t.preventDefault();case T:return void(this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),t.preventDefault()));case O:return void this.advanceSelection(-1,t);case A:return void this.advanceSelection(1,t);case P:return this.options.selectOnTab&&this.isOpen&&this.$activeOption&&(this.onOptionSelect({currentTarget:this.$activeOption}),self.isFull()||t.preventDefault()),void(this.options.create&&this.createItem()&&t.preventDefault());case D:case F:return void this.deleteSelection(t)}return!this.isFull()&&!this.isInputHidden||(S?t.metaKey:t.ctrlKey)?void 0:void t.preventDefault()},onKeyUp:function(t){if(this.isLocked)return t&&t.preventDefault();var e=this.$control_input.value()||"";this.lastValue!==e&&(this.lastValue=e,this.onSearchChange(e),this.refreshOptions(),this.emit("type",e))},onSearchChange:function(t){var e=this.options.load;e&&(this.loadedSearches.hasOwnProperty(t)||(this.loadedSearches[t]=!0,this.load(d(function(n){e.apply(this,[t,n])},this))))},onFocus:function(t){var e=this.isFocused;return this.isDisabled?(this.blur(),t&&t.preventDefault(),!1):void(this.ignoreFocus||(this.isFocused=!0,"focus"===this.options.preload&&this.onSearchChange(""),e||this.emit("focus"),this.$activeItems.length||(this.showInput(),this.setActiveItem(null),this.refreshOptions(!!this.options.openOnFocus)),this.refreshState()))},onBlur:function(t,e){if(this.isFocused&&(this.isFocused=!1,!this.ignoreFocus)){if(!this.ignoreBlur&&document.activeElement===this.$dropdown_content[0])return this.ignoreBlur=!0,void this.onFocus(t);var n=d(function(){this.close(),this.setTextboxValue(""),this.setActiveItem(null),this.setActiveOption(null),this.setCaret(this.items.length),this.refreshState(),e&&e.focus(),this.ignoreFocus=!1,this.emit("blur")},this);this.ignoreFocus=!0,this.options.create&&this.options.createOnBlur?this.createItem(null,!1,n):n()}},onOptionHover:function(t,e){e=u(e),this.ignoreHover||this.setActiveOption(e||t.currentTarget,!1)},onOptionSelect:function(t,e){var n,i;t.preventDefault&&(t.preventDefault(),t.stopPropagation()),i=u(e||t.currentTarget),i.hasClass("g-create")?this.createItem(null,d(function(){this.options.closeAfterSelect&&this.close()},this)):(n=i.attribute("data-value"),"undefined"!=typeof n&&(this.lastQuery=null,this.setTextboxValue(""),this.addItem(n),this.options.closeAfterSelect?this.close():!this.options.hideSelected&&t.type&&/mouse/.test(t.type)&&this.setActiveOption(this.getOption(n))))},onItemSelect:function(t,e){this.isLocked||"multi"===this.options.mode&&(t.preventDefault(),this.setActiveItem(e||t.currentTarget,t))},onItemRemoveViaX:function(t,e){if(t.preventDefault(),!this.isLocked&&"single"!=this.options.mode){var n=e.parent();this.setActiveItem(n),this.deleteSelection()&&this.setCaret(this.items.length)}},load:function(t){var e=this.$wrapper.addClass(this.options.loadingClass);this.loading++,t.apply(this,[d(function(t){this.loading=Math.max(this.loading-1,0),t&&t.length&&(this.addOption(t),this.refreshOptions(this.isFocused&&!this.isInputHidden)),this.loading||e.removeClass(this.options.loadingClass),this.emit("load",t)},this)])},setTextboxValue:function(t){var e=this.$control_input,n=e.value()!==t;n&&(e.value(t).emit("update"),this.lastValue=t)},getValue:function(t){return this.tagType===M&&this.input.attribute("multiple")?t||this.items:(t||this.items).join(this.options.delimiter)},setValue:function(t,e){var n=e?[]:["change"];V(this,n,function(){this.clear(e),this.previousValue=this.getValue()||t,this.addItems(t,e)})},setActiveItem:function(t,e){var n,i,a,r,o,s,l;if("single"!==this.options.mode){if(t=u(t),!t)return this.$activeItems.length&&u(this.$activeItems).removeClass("g-active"),this.$activeItems=[],void(this.isFocused&&this.showInput());if(n=e&&e.type.toLowerCase(),"mousedown"===n&&this.isShiftDown&&this.$activeItems.length){l=u(f(this.$control.children(".g-active"))),a=Array.prototype.indexOf.apply(this.$control[0].childNodes,[l[0]]),r=Array.prototype.indexOf.apply(this.$control[0].childNodes,[t[0]]),a>r&&(s=a,a=r,r=s);for(var c=a;c<=r;c++)o=this.$control[0].childNodes[c],this.$activeItems.indexOf(o)===-1&&(u(o).addClass("g-active"),this.$wrapper.attribute("aria-activedescendant",k(this.rand+"-"+u(o).attribute("data-value"))),this.$activeItems.push(o));e.preventDefault()}else"mousedown"===n&&this.isCtrlDown||"keydown"===n&&this.isShiftDown?t.hasClass("g-active")?(i=this.$activeItems.indexOf(t[0]),this.$activeItems.splice(i,1),t.removeClass("g-active")):(this.$activeItems.push(t.addClass("g-active")[0]),this.$wrapper.attribute("aria-activedescendant",k(this.rand+"-"+t.attribute("data-value")))):(u(this.$activeItems)&&u(this.$activeItems).removeClass("g-active"),this.$activeItems=[t.addClass("g-active")[0]],this.$wrapper.attribute("aria-activedescendant",k(this.rand+"-"+t.attribute("data-value"))));this.hideInput(),this.isFocused||this.focus()}},setActiveOption:function(t,e,n){var i,a,r,o,s;this.$activeOption&&this.$activeOption.removeClass("g-active"),this.$activeOption=null,t=u(t),t&&(this.$activeOption=t.addClass("g-active"),this.$wrapper.attribute("aria-activedescendant",k(this.rand+"-"+t.attribute("data-value"))),!e&&q(e)||(i=this.$dropdown_content[0].offsetHeight,a=this.$activeOption[0].offsetHeight,e=this.$dropdown_content[0].scrollTop||0,r=this.$activeOption.position().top-this.$dropdown_content.position().top+e,o=r,s=r-i+a,r+a>i+e?this.$dropdown_content[0].scrollTop=s:r<e&&(this.$dropdown_content[0].scrollTop=o)))},selectAll:function(){if("single"!==this.options.mode){var t=this.$control.children(":not(input)");t&&(t.addClass("g-active"),this.$wrapper.attribute("aria-activedescendant",k(this.rand+"-"+t.attribute("data-value")))),this.$activeItems=Array.prototype.slice.apply(t||[]),this.$activeItems.length&&(this.hideInput(),this.close()),this.focus()}},hideInput:function(){this.setTextboxValue(""),this.$control_input.style({opacity:0,position:"absolute",left:this.rtl?1e4:-1e4}),this.isInputHidden=!0},showInput:function(){this.$control_input.style({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){this.isDisabled||(this.ignoreFocus=!0,this.$control_input[0].focus(),setTimeout(d(function(){this.ignoreFocus=!1,this.onFocus()},this),0))},blur:function(t){this.$control_input[0].blur(),this.onBlur(null,t)},getScoreFunction:function(t){return this.sifter.getScoreFunction(t,this.getSearchOptions())},getSearchOptions:function(){var t=this.options.sortField;return"string"==typeof t&&(t=[{field:t}]),{fields:this.options.searchField,conjunction:this.options.searchConjunction,sort:t}},search:function(t){var e,n,i,a=this.getSearchOptions();if(this.options.score&&(i=this.options.score.apply(this,[t]),"function"!=typeof i))throw new Error('Selectize "score" setting must be a function that returns a function');if(t!==this.lastQuery?(this.lastQuery=t,n=this.sifter.search(t,b(a,{score:i})),this.currentResults=n):n=b({},this.currentResults),this.options.hideSelected)for(e=n.items.length-1;e>=0;e--)this.items.indexOf(H(n.items[e].id))!==-1&&n.items.splice(e,1);return n},refreshOptions:function(t){var e,n,i,a,r,o,s,l,c,d,h,p,f,m,v,y;"undefined"==typeof t&&(t=!0);var w=x(this.$control_input.value()),k=this.search(w),S=this.$dropdown_content,C=this.$activeOption&&H(this.$activeOption.attribute("data-value"));for(a=k.items.length,"number"==typeof this.options.maxOptions&&(a=Math.min(a,this.options.maxOptions)),r={},o=[],e=0;e<a;e++)for(s=this.Options[k.items[e].id],l=this.render("option",s),c=s[this.options.optgroupField]||"",d=g(c)?c:[c],n=0,i=d&&d.length;n<i;n++)c=d[n],this.Optgroups.hasOwnProperty(c)||(c=""),r.hasOwnProperty(c)||(r[c]=document.createDocumentFragment(),o.push(c)),r[c].appendChild(l);for(this.options.lockOptgroupOrder&&o.sort(function(t,e){var n=this.Optgroups[t].$order||0,i=this.Optgroups[e].$order||0;return n-i}),h=document.createDocumentFragment(),e=0,a=o.length;e<a;e++)c=o[e],this.Optgroups.hasOwnProperty(c)&&r[c].childNodes.length?(p=document.createDocumentFragment(),p.appendChild(this.render("optgroup_header",this.Optgroups[c])),p.appendChild(r[c]),h.appendChild(this.render("optgroup",b({},this.Optgroups[c],{html:Y(p),dom:p})))):h.appendChild(r[c]);if(S.html(Y(h)),this.options.highlight&&k.query.length&&k.tokens.length)for(e=0,a=k.tokens.length;e<a;e++)Q(S,k.tokens[e].regex);if(!this.options.hideSelected)for(e=0,a=this.items.length;e<a;e++)this.getOption(this.items[e]).addClass("g-selected").attribute("aria-selected",!0);f=this.canCreate(w),f&&(u(this.render("option_create",{input:w})).top(S),y=u(S[0].childNodes[0])),this.hasOptions=k.items.length>0||f,this.hasOptions?(k.items.length>0?(v=C&&this.getOption(C),v&&v.length?m=v:"single"===this.options.mode&&this.items.length&&(m=this.getOption(this.items[0])),m&&m.length||(m=y&&!this.options.addPrecedence?this.getAdjacentOption(y,1):S.find("[data-selectable]:first-child"))):m=y,this.setActiveOption(m),t&&!this.isOpen&&this.open()):(this.setActiveOption(null),t&&this.isOpen&&this.close())},addOption:function(t){var e;if(g(t))for(var n=0,i=t.length;n<i;n++)this.addOption(t[n]);else(e=this.registerOption(t))&&(this.UserOptions[e]=!0,this.lastQuery=null,this.emit("option_add",e,t))},registerOption:function(t){var e=H(t[this.options.valueField]);return!(!e&&!this.options.allowEmptyOption||this.options.hasOwnProperty(e))&&(t.$order=t.$order||++this.order,this.Options[e]=t,e)},registerOptionGroup:function(t){var e=H(t[this.options.optgroupValueField]);return!!e&&(t.$order=t.$order||++this.order,this.Optgroups[e]=t,e)},addOptionGroup:function(t,e){e[this.options.optgroupValueField]=t,(t=this.registerOptionGroup(e))&&this.emit("optgroup_add",t,e)},removeOptionGroup:function(t){this.Optgroups.hasOwnProperty(t)&&(delete this.Optgroups[t],this.renderCache={},this.emit("optgroup_remove",t))},clearOptionGroups:function(){this.Optgroups={},this.renderCache={},this.emit("optgroup_clear")},updateOption:function(t,e){var n,i,a,r,o,s,l;if(t=H(t),a=H(e[this.options.valueField]),null!==t&&this.Options.hasOwnProperty(t)){if("string"!=typeof a)throw new Error("Value must be set in option data");l=this.Options[t].$order,a!==t&&(delete this.Options[t],r=this.items.indexOf(t),r!==-1&&this.items.splice(r,1,a)),e.$order=e.$order||l,this.Options[a]=e,o=this.renderCache.item,s=this.renderCache.option,o&&(delete o[t],delete o[a]),s&&(delete s[t],delete s[a]),this.items.indexOf(a)!==-1&&(n=this.getItem(t),i=u(this.render("item",e)),n.hasClass("g-active")&&(i.addClass("g-active"),this.$wrapper.attribute("aria-activedescendant",k(this.rand+"-"+i.attribute("data-value")))),i.after(n),n.remove()),this.lastQuery=null,this.isOpen&&this.refreshOptions(!1)}},removeOption:function(t,e){t=H(t);var n=this.renderCache.item,i=this.renderCache.option;n&&delete n[t],i&&delete i[t],delete this.UserOptions[t],delete this.Options[t],this.lastQuery=null,this.emit("option_remove",t),this.removeItem(t,e)},clearOptions:function(){this.loadedSearches={},this.UserOptions={},this.renderCache={},this.Options=this.sifter.items={},this.lastQuery=null,this.emit("option_clear"),this.clear()},getOption:function(t){return this.getElementWithValue(t,this.$dropdown_content.search("[data-selectable]"))},getAdjacentOption:function(t,e){var n=this.$dropdown.search("[data-selectable]"),i=p(n,t?t[0]:null)+e;return i>=0&&i<(n?n.length:0)?u(n[i]):u()},getElementWithValue:function(t,e){if(t=H(t),"undefined"!=typeof t&&null!==t)for(var n=0,i=e?e.length:0;n<i;n++)if(e[n].getAttribute("data-value")===t)return u(e[n]);return u()},getItem:function(t){return this.getElementWithValue(t,this.$control.children())},addItems:function(t,e){for(var n=g(t)?t:[t],i=0,a=n.length;i<a;i++)this.isPending=i<a-1,this.addItem(n[i],e)},addItem:function(t,e){var n=e?[]:["change"];V(this,n,function(){var n,i,a,r,o,s=this.options.mode;if(t=H(t),this.items.indexOf(t)!==-1)return void("single"===s&&this.close());if(this.Options.hasOwnProperty(t)&&("single"===s&&this.clear(e),
("multi"!==s||!this.isFull())&&(n=u(this.render("item",this.Options[t])),n.attribute("id",this.rand+"-"+k(n.attribute("data-value"))),"multi"===s&&n.attribute("aria-selected",!0),o=this.isFull(),this.items.splice(this.caretPos,0,t),this.insertAtCaret(n),(!this.isPending||!o&&this.isFull())&&this.refreshState(),this.isSetup))){if(a=this.$dropdown_content.search("[data-selectable]"),!this.isPending){i=this.getOption(t);var l=this.getAdjacentOption(i,1);r=l?l.attribute("data-value"):null,this.refreshOptions(this.isFocused&&"single"!==s),r&&this.setActiveOption(this.getOption(r))}!a||this.isFull()?this.close():this.positionDropdown(),this.updatePlaceholder(),this.emit("item_add",t,n),this.updateOriginalInput({silent:e})}})},removeItem:function(t,e){var n,i,a;n=t instanceof u?t:this.getItem(t),t=H(n.attribute("data-value")),i=this.items.indexOf(t),i!==-1&&(n.remove(),n.hasClass("g-active")&&(a=this.$activeItems.indexOf(n[0]),this.$activeItems.splice(a,1)),this.items.splice(i,1),this.lastQuery=null,!this.options.persist&&this.UserOptions.hasOwnProperty(t)&&this.removeOption(t,e),i<this.caretPos&&this.setCaret(this.caretPos-1),this.refreshState(),this.updatePlaceholder(),this.updateOriginalInput({silent:e}),this.positionDropdown(),this.emit("item_remove",t,n))},createItem:function(t,e){var n=this.caretPos;t=t||x(this.$control_input.value()||"");var i=arguments[arguments.length-1];if("function"!=typeof i&&(i=function(){}),v(e)||(e=!0),!this.canCreate(t))return i(),!1;this.lock();var a="function"==typeof this.options.create?this.options.create:d(function(t){var e={};return e[this.options.labelField]=t,e[this.options.valueField]=t,e},this),r=U(d(function(t){if(this.unlock(),!t||"object"!=typeof t)return i();var a=H(t[this.options.valueField]);return"string"!=typeof a?i():(this.setTextboxValue(""),this.addOption(t),this.setCaret(n),this.addItem(a),this.refreshOptions(e&&"single"!==this.options.mode),void i(t))},this)),o=a.apply(this,[t,r]);return"undefined"!=typeof o&&r(o),!0},refreshItems:function(){this.lastQuery=null,this.isSetup&&this.addItem(this.items),this.refreshState(),this.updateOriginalInput()},refreshState:function(){this.isRequired&&(this.items.length&&(this.isInvalid=!1),this.$control_input.attribute("required",this.isInvalid||null)),this.refreshClasses()},refreshClasses:function(){var t=this.isFull(),e=this.isLocked;this.$wrapper.toggleClass("g-rtl",this.rtl),this.$control.toggleClass("g-focus",this.isFocused),this.$control.toggleClass("g-disabled",this.isDisabled),this.$control.toggleClass("g-required",this.isRequired),this.$control.toggleClass("g-invalid",this.isInvalid),this.$control.toggleClass("g-locked",e),this.$control.toggleClass("g-full",t),this.$control.toggleClass("g-not-full",!t),this.$control.toggleClass("g-input-active",this.isFocused&&!this.isInputHidden),this.$control.toggleClass("g-dropdown-active",this.isOpen),this.$control.toggleClass("g-has-options",!y(this.options.Options)),this.$control.toggleClass("g-has-items",this.items.length>0),this.isOpen?(this.$wrapper.attribute("aria-owns",this.rand).attribute("aria-activedescendant",k(this.rand+"-"+this.getValue())).attribute("aria-expanded",!0),this.$dropdown_content.attribute("aria-expanded",!0).attribute("aria-hidden",!1)):(this.$wrapper.attribute("aria-owns",null).attribute("aria-activedescendant",null).attribute("aria-expanded",!1),this.$dropdown_content.attribute("aria-expanded",!1).attribute("aria-hidden",!0)),this.$control_input.selectizeGrow=!t&&!e},isFull:function(){return null!==this.options.maxItems&&this.items.length>=this.options.maxItems},updateOriginalInput:function(t){var e,n;if(t=t||{},this.tagType===M){e=[];for(var i=0,a=this.items.length;i<a;i++)n=this.Options[this.items[i]][this.options.labelField]||"",e.push('<option value="'+w(this.items[i])+'" selected="selected">'+w(n)+"</option>");e.length||this.input.attribute("multiple")||e.push('<option value="" selected="selected"></option>'),this.input.html(e.join(""))}else this.input.value(this.getValue()),this.input.attribute("value",this.input.value());this.isSetup&&!t.silent&&this.emit("change",this.input.value())},updatePlaceholder:function(){if(this.options.placeholder){var t=this.$control_input;this.items.length?t.attribute("placeholder",null):t.attribute("placeholder",this.options.placeholder),t.emit("update",{force:!0})}},open:function(){this.isLocked||this.isOpen||"multi"===this.options.mode&&this.isFull()||(this.focus(),this.isOpen=!0,this.refreshState(),this.$dropdown.style({visibility:"hidden",display:"block"}),this.positionDropdown(),this.$dropdown.style({visibility:"visible"}),this.emit("dropdown_open",this.$dropdown))},close:function(){var t=this.isOpen;"single"===this.options.mode&&this.items.length&&this.hideInput(),this.isOpen=!1,this.$dropdown.hide(),this.setActiveOption(null),this.refreshState(),t&&this.emit("dropdown_close",this.$dropdown)},positionDropdown:function(){var t=this.$control,e=t.position();e.top+=t[0].offsetHeight,this.$dropdown.style({width:t[0].offsetWidth,top:t[0].offsetTop+t[0].offsetHeight,left:t[0].offsetLeft})},clear:function(t){if(this.items.length){var e=this.$control.children(":not(input)");e&&e.remove(),this.items=[],this.lastQuery=null,this.setCaret(0),this.setActiveItem(null),this.updatePlaceholder(),this.updateOriginalInput({silent:t}),this.refreshState(),this.showInput(),this.emit("clear")}},insertAtCaret:function(t){var e=Math.min(this.caretPos,this.items.length);0===e?t.top(this.$control):t.after(this.$control.find(":nth-child("+e+")")),this.setCaret(e+1)},deleteSelection:function(t){var e,n,i,a,r,o,s,l,c;if(i=t&&t.keyCode===D?-1:1,a=J(this.$control_input[0]),this.$activeOption&&!this.options.hideSelected&&(s=this.getAdjacentOption(this.$activeOption,-1),s&&(s=s.attribute("data-value"))),r=[],this.$activeItems.length){var d=this.$control.children(":not(input)");for(c=this.$control.children(".g-active"),c&&(c=u(i>0?f(c):c[0])),o=d?p(d,c[0]):-1,i>0&&o++,e=0,n=this.$activeItems.length;e<n;e++)r.push(u(this.$activeItems[e]).attribute("data-value"));t&&(t.preventDefault(),t.stopPropagation())}else(this.isFocused||"single"===this.options.mode)&&this.items.length&&(i<0&&0===a.start&&0===a.length?r.push(this.items[this.caretPos-1]):i>0&&a.start===this.$control_input.value().length&&r.push(this.items[this.caretPos]));if(!r.length||"function"==typeof this.options.onDelete&&this.options.onDelete.apply(this,[r])===!1)return!1;for("undefined"!=typeof o&&this.setCaret(o);r.length;)this.removeItem(r.pop());return this.showInput(),this.positionDropdown(),this.refreshOptions(!0),s&&(l=this.getOption(s),l.length&&this.setActiveOption(l)),!0},advanceSelection:function(t,e){var n,i,a,r,o,s;0!==t&&(this.rtl&&(t*=-1),n=t>0?"last-child":"first-child",i=J(this.$control_input[0]),this.isFocused&&!this.isInputHidden?(r=this.$control_input.value().length,o=t<0?0===i.start&&0===i.length:i.start===r,o&&!r&&this.advanceCaret(t,e)):(s=this.$control.children(".g-active:"+n),s&&(a=p(this.$control.children(":not(input)"),s),this.setActiveItem(null),this.setCaret(t>0?a+1:a))))},advanceCaret:function(t,e){var n,i;0!==t&&(n=t>0?"nextSibling":"previousSibling",this.isShiftDown?(i=this.$control_input[n](),i&&(this.hideInput(),this.setActiveItem(i),e&&e.preventDefault())):this.setCaret(this.caretPos+t))},setCaret:function(t){if(t="single"===this.options.mode?this.items.length:Math.max(0,Math.min(this.items.length,t)),!this.isPending){var e,n,i,a;for(i=this.$control.children(":not(input)"),e=0,n=i?i.length:0;e<n;e++)a=u(i[e]),e<t?a.before(this.$control_input):this.$control.appendChild(a)}this.caretPos=t},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){this.input.disabled(!0),this.$control_input.attribute("disabled",!0).attribute("tabindex",-1),this.isDisabled=!0,this.lock()},enable:function(){this.input.attribute("disabled",null),this.$control_input.attribute("disabled",null).attribute("tabindex",this.tabIndex),this.isDisabled=!1,this.unlock()},destroy:function(){var t=this.revertSettings;this.emit("destroy"),this.off(),this.$wrapper.remove(),this.$dropdown.remove(),this.input.html("").appendChild(t.$children).attribute("tabindex",null).removeClass("selectized").attribute({tabindex:t.tabindex}).show(),delete this.$control_input.selectizeGrow,delete this.input.selectizeInstance,delete this.input[0].selectize},render:function(t,e){var n,i,a="",o=!1;if("option"!==t&&"item"!==t||(n=H(e[this.options.valueField]),o=!!n),o&&(q(this.renderCache[t])||(this.renderCache[t]={}),this.renderCache[t].hasOwnProperty(n)))return this.renderCache[t][n];var s=r("div").html(this.options.render[t].apply(this,[e,w]));return s=s.firstChild(),"option"!==t&&"option_create"!==t||(s=s.data("selectable","")),"optgroup"===t&&(i=e[this.options.optgroupValueField]||"",a=G(w(i)),s=s.data("group",a).attribute("role","group").attribute("aria-label",a)),"option"!==t&&"item"!==t||(a=G(w(n||"")),s=s.data("value",a).attribute("id",k(this.rand+"-"+a)).attribute("role","treeitem").attribute("aria-label",x(e.text)).attribute("aria-selected","false")),o&&(this.renderCache[t][n]=s[0]),s[0]},clearCache:function(t){"undefined"==typeof t?this.renderCache={}:delete this.renderCache[t]},canCreate:function(t){if(!this.options.create)return!1;var e=this.options.createFilter;return t.length&&("function"!=typeof e||e.apply(self,[t]))&&("string"!=typeof e||new RegExp(e).test(t))&&(!(e instanceof RegExp)||e.test(t))},getPreviousValue:function(){return this.previousValue}});u.implement({selectize:function(t){t=t||{};var e=tt.prototype.options,n=b({},e,t),i=n.dataAttr,a=n.labelField,r=n.valueField,o=n.optgroupField,s=n.optgroupLabelField,l=n.optgroupValueField,c=function(t,e){t=u(t);var o,s,l,c,d=t.attribute(i);if(d)for(e.Options=JSON.parse(d),o=0,s=e.Options.length;o<s;o++)e.items.push(e.Options[o][r]);else{var h=x(t.value()||"");if(!n.allowEmptyOption&&!h.length)return;for(l=h.split(n.delimiter),o=0,s=l.length;o<s;o++)c={},c[a]=l[o],c[r]=l[o],e.Options.push(c);e.items=l}},d=function(t,e){var c,d,h,p,f=e.Options,m={},v=function(t){var e=i&&t.attribute(i);return"string"==typeof e&&e.length?JSON.parse(e):null},b=function(t,i){var s,l;if(t=u(t),s=H(t.value()),s.length||n.allowEmptyOption)if(m.hasOwnProperty(s)){if(i){var c=m[s][o];c?g(c)?c.push(i):m[s][o]=[c,i]:m[s][o]=i}}else l=v(t)||{},l[a]=l[a]||t.text(),l[r]=l[r]||s,l[o]=l[o]||i,m[s]=l,f.push(l),t.matches(":selected")&&e.items.push(s)},y=function(t){var n,i,a,r,o;for(t=u(t),a=t.attribute("label"),a&&(r=v(t)||{},r[s]=a,r[l]=a,e.Optgroups.push(r)),o=t.search("option"),n=0,i=o.length;n<i;n++)b(o[n],a)};for(e.maxItems=t.attribute("multiple")?null:1,p=t.children()||0,c=0,d=p.length;c<d;c++)h=p[c].tagName.toLowerCase(),"optgroup"===h?y(p[c]):"option"===h&&b(p[c])};return this.forEach(function(i,a){if(n=b({},e,t),i=u(i),!i.selectizeInstance){var r,o=i.data("selectize"),s=i.tag().toLowerCase(),l=i.attribute("placeholder")||i.attribute("data-placeholder");if(o&&(o=JSON.parse(o)),n=b({},n,o),!l&&!n.allowEmptyOption){var h=i.children('option[value=""]');l=h?i.children('option[value=""]').text():""}var p={placeholder:l,Options:[],Optgroups:[],items:[]};"select"===s?d(i,p):c(i,p),r=new tt(i,b({},e,p,t,o)),i.selectizeInstance=r}})}}),a(function(){var t=u("[data-selectize]");t&&t.selectize()}),e.exports=tt},{"../utils/elements.utils":64,"elements/domready":109,"elements/zen":135,moofx:136,"mout/array/indexOf":173,"mout/array/last":177,"mout/collection/forEach":187,"mout/function/bind":190,"mout/function/debounce":191,"mout/lang/isArray":201,"mout/lang/isBoolean":202,"mout/object/merge":235,"mout/object/size":240,"mout/object/unset":242,"mout/object/values":243,"mout/string/escapeHtml":257,"mout/string/slugify":269,"mout/string/trim":270,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298,sifter:310}],58:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime/emitter"),r=t("prime-util/prime/bound"),o=t("prime-util/prime/options"),s=t("elements/zen"),l=t("../utils/elements.utils.js"),c=t("prime/map")(),u=t("mout/function/bind"),d=t("mout/object/merge"),h=new i({mixin:[r,o],inherits:a,options:{tapToDismiss:!0,noticeClass:"g-notifications",containerID:"g-notifications-container",types:{base:"",error:"fa-minus-circle",info:"fa-info-circle",success:"fa-check-circle",warning:"fa-exclamation-triangle"},showDuration:300,showEquation:"cubic-bezier(0.02, 0.01, 0.47, 1)",hideDuration:500,hideEquation:"cubic-bezier(0.02, 0.01, 0.47, 1)",timeOut:2500,extendedTimeout:2500,location:"bottom-right",titleClass:"g-notifications-title",messageClass:"g-notifications-message",closeButton:!0,target:"#g5-container",targetLocation:"bottom",newestOnTop:!0,preventDuplicates:!1,progressBar:!0},constructor:function(t){this.setOptions(t),this.id=0,this.previousNotice=null,this.map=c},mergeOptions:function(t){return d(this.options,t||{})},base:function(t,e,n){return n=this.mergeOptions(n),this.notify(d(n,{title:e||"",type:n.type||"base",message:t}))},success:function(t,e,n){return n=this.mergeOptions(n),this.notify(d(n,{title:e||"Success!",type:"success",message:t}))},info:function(t,e,n){return n=this.mergeOptions(n),this.notify(d(n,{title:e||"Info",type:"info",message:t}))},warning:function(t,e,n){return n=this.mergeOptions(n),this.notify(d(n,{title:e||"Warning!",type:"warning",message:t}))},error:function(t,e,n){return n=this.mergeOptions(n),this.notify(d(n,{title:e||"Error!",type:"error",message:t}))},notify:function(t){if(t=this.mergeOptions(t),!t.preventDuplicates||this.previousNotice!==t.message){this.id++,this.previousNotice=t.message;var e=this.getContainer(t,!0),n=s("div"),i=s("div"),a=s("div"),r=s("i.fa"),o=s("div.g-notifications-progress"),l=s('a.fa.fa-close[href="#"]');if(this.map.set(n,{container:e,interval:null,progressBar:{interval:null,hideETA:null,maxHideTime:null},response:{id:this.id,state:"visible",start:new Date,options:t},options:t}),t.title&&n.appendChild(i.html(t.title).addClass(t.titleClass)),t.message&&n.appendChild(a.html(t.message).addClass(t.messageClass)),t.closeButton&&l.top(n),t.progressBar&&o.top(n),t.type&&t.title&&t.types[t.type]&&(n.addClass("g-notifications-theme-"+t.type),r.top(i).addClass(t.types[t.type])),n.style({opacity:0}),n[t.newestOnTop?"top":"bottom"](e),n.animate({opacity:1},{duration:t.showDuration,equation:t.showEquation,callback:t.onShow}),t.timeOut>0){var c=this.map.get(n);c.interval=setTimeout(u(function(){this.hide(n)},this),t.timeOut),c.progressBar.maxHideTime=parseFloat(t.timeOut),c.progressBar.hideETA=(new Date).getTime()+c.progressBar.maxHideTime,t.progressBar&&(c.progressBar.interval=setInterval(u(function(){this.updateProgress(n,o)},this),10)),this.map.set(n,c)}var d=u(function(){this.stickAround(n)},this),h=u(function(){this.delayedHide(n)},this);n.on("mouseover",d),n.on("mouseout",h),!t.onClick&&t.tapToDismiss&&n.on("click",u(function(){n.off("mouseover",d),n.off("mouseout",h),this.hide(n)},this)),t.closeButton&&l&&l.on("click",u(function(t){t.stopPropagation(),t.preventDefault(),n.off("mouseover",d),n.off("mouseout",h),this.hide(n,!0)},this))}},stickAround:function(t){var e=this.map.get(t);clearTimeout(e.interval),e.progressBar.hideETA=0,t.animate({opacity:1},{duration:e.options.showDuration,equation:e.options.showEquation,callback:e.options.onShow}),this.map.set(t,e)},hide:function(t,e){if(!t.find(":focus")||e){var n=this.map.get(t);return clearTimeout(n.progressBar.interval),this.map.set(t,n),t.animate({opacity:0},{duration:n.options.hideDuration,equation:n.options.hideEquation,callback:u(function(){this.remove(t),n.options.onHidden&&"hidden"!==n.response.state&&n.options.onHidden(),n.response.state="hidden",n.response.endTime=new Date,this.map.set(t,n)},this)})}},delayedHide:function(t,e){var n=this.map.get(t);(n.options.timeOut>0||n.options.extendedTimeout>0)&&(n.interval=setTimeout(u(function(){this.hide(t)},this),n.options.extendedTimeout),n.progressBar.maxHideTime=parseFloat(n.options.extendedTimeout),n.progressBar.hideETA=(new Date).getTime()+n.progressBar.maxHideTime),this.map.set(t,n)},updateProgress:function(t,e){var n=this.map.get(t),i=(n.progressBar.hideETA-(new Date).getTime())/n.progressBar.maxHideTime*100;this.map.set(t,n),e.style({width:i+"%"})},getContainer:function(t,e){t=this.mergeOptions(t);var n=l("#"+t.containerID);return n?n:(e&&(n=this.createContainer(t)),n)},createContainer:function(t){return t=this.mergeOptions(t),s("div#"+t.containerID+"."+t.location)[t.targetLocation](t.target).attribute("aria-live","polite").attribute("role","alert")},remove:function(t){if(t){var e=this.map.get(t);e.container||(e.container=this.getContainer(e.options)),t.remove(),e.container.children()||(e.container.remove(),this.previousNotice=null),this.map.set(t,e)}}}),p=new h;e.exports=p},{"../utils/elements.utils.js":64,"elements/zen":135,"mout/function/bind":190,"mout/object/merge":235,prime:299,"prime-util/prime/bound":295,"prime-util/prime/options":296,"prime/emitter":298,"prime/map":300}],59:[function(t,e,n){"use strict";var i,a=t("elements/domready"),r=t("elements"),o=t("./modal"),s=t("./toastr"),l=t("agent"),c=t("../utils/get-ajax-suffix"),u=t("../utils/get-ajax-url").parse,d=t("../utils/get-ajax-url").global,h=function(t,e){return(t.type.match(/^touch/)||"click"==t.type)&&t.preventDefault(),"click"!=t.type&&(e=r(e),!(i=e.find("~~ [type=hidden]"))||(i.value("0"==i.value()?"1":"0"),e.parent(".enabler").attribute("aria-checked","1"==i.value()?"true":"false"),i.emit("change"),r("body").emit("change",{target:i}),!1))};a(function(){var t=r("body");t.delegate("keydown",".enabler",function(t,e){if(e=r(e),!e.disabled()&&!e.find("[disabled]")){var n=t.which?t.which:t.keyCode;32!=n&&13!=n||(t.preventDefault(),h(t,e.find(".toggle")))}}),["touchend","mouseup","click"].forEach(function(e){t.delegate(e,".enabler .toggle",h)});var e=u(d("devprod")+c());t.delegate("change",'[data-g-devprod] input[type="hidden"]',function(t,n){var i=n.value(),a=n.parent("[data-g-devprod]"),r=JSON.parse(a.data("g-devprod"));a.showIndicator(),l("post",e,{mode:i},function(t,e){e.body.success?(a.find(".devprod-mode").text(r[e.body.mode]||"Unknown"),s.success(e.body.html,e.body.title)):(o.open({content:e.body.html||e.body,afterOpen:function(t){e.body.html||t.style({width:"90%"})}}),n.value(!i)),a.hideIndicator()})})}),e.exports={}},{"../utils/get-ajax-suffix":68,"../utils/get-ajax-url":69,"./modal":54,"./toastr":58,agent:78,elements:111,"elements/domready":109}],60:[function(t,e,n){"use strict";var i=t("elements/domready"),a=t("ext/tooltips");a.defaults={baseClass:"g-tips",typeClass:null,effectClass:"g-fade",inClass:"g-tip-in",place:"top",spacing:10,offset:-3,auto:1};var r=null;i(function(){r=new a(document,{tooltip:a.defaults,key:"tip",showOn:"mouseenter",hideOn:"mouseleave",observe:1}),window.G5.tips=r}),e.exports=r},{"elements/domready":109,"ext/tooltips":"ext/tooltips"}],61:[function(t,e,n){"use strict";var i=(t("prime"),t("../utils/elements.utils")),a=(t("elements/zen"),t("elements/domready")),r=t("prime/map")(),o=t("../ui").modal,s=t("mout/collection/size"),l=t("mout/array/indexOf"),c=t("mout/object/merge"),u=t("mout/object/keys"),d=t("mout/random/guid"),h=t("mout/queryString/encode"),p=t("mout/string/contains"),f=t("mout/queryString/getParam"),m=t("mout/queryString/setParam"),g=t("agent")(),v=t("./history"),b=t("./flags-state"),y=t("./get-ajax-url").parse,w=t("./get-ajax-suffix"),x=(t("../lm"),t("../menu")),k=t("../assignments");t("../ui/popover");var S=!1,C=!1,T=-1;v.Adapter.bind(window,"statechange",function(){if(g.running())return!1;var t=i("body"),e=v.getState(),n=e.url,a=e.data,l=i("#navbar"),c=i("#main-header"),u="";if(a.doNothing)return!0;if(s(a)&&a.parsed!==!1&&r.get(a.uuid)&&(a=r.get(a.uuid)),a.element){var d=a.element.parent("#main-header")||a.element.matches(".menu-select-wrap");t.emit("statechangeBefore",{target:a.element,Data:a})}else{var f=n.replace(window.location.origin,"");a.element=i('[href="'+f+'"]')}n=y(n+w());var m;if(l&&a.element){l.search("li.active");m=l.search("li"),m.removeClass("active"),a.element.parent("#navbar")&&a.element.parent("li").addClass("active")}c&&a.element&&!a.element.matches("a.menu-item")&&!a.element.matches("select.menu-select-wrap")&&(m=c.search(".float-right li"),m.removeClass("active"),a.element.parent("#main-header")&&a.element.parent("li").addClass("active")),a.params&&(u=h(JSON.parse(a.params)),p(n,"?")&&(u=u.replace(/^\?/,"&"))),S||o.closeAll(),g.url(n+u).data(a.extras||{}).method(a.extras?"post":"get").send(function(e,n){if(!n.body.success)return S?S=!1:(S=!0,o.open({content:n.body.html||n.body,afterOpen:function(t){n.body.html||t.style({width:"90%"})}}),v.back()),a.element&&a.element.hideIndicator(),!1;var r=a.parent?a.element.parent(a.parent):i(a.target),s=r||i("[data-g5-content]")||t;if(n.body&&n.body.html){var l;s.html(n.body.html),(l=s.matches("[data-g5-content]")?s:s.find("[data-g5-content]"))&&(l.style({opacity:0}),d&&i(navbar).attribute("tabindex","-1").attribute("aria-hidden","true"),i("#navbar")[d?"slideUp":"slideDown"](),l.animate({opacity:1}))}else s.html(n.body);t.getPopover().hideAll(!0).destroy(),a.element&&t.emit("statechangeAfter",{target:a.element,Data:a});var c=a.event&&a.event.activeSpinner||a.element;c&&c.hideIndicator();var u=i("[data-selectize]");u&&u.selectize(),E(),k.chromeFix(),t.emit("statechangeEnd")})});var E=function(){var t=i("[data-selectize-ajaxify]");t&&t.forEach(function(t){t=i(t);var e=t.selectize().selectizeInstance;e&&!e.HasChangeEvent&&(e.on("change",function(){if(C)return C=!1,!1;var n=e.getValue(),a=e.Options,r=function(){b.off("update:pending",r),o.close(),e.input.data("g5-ajaxify","").data("g5-ajaxify-target",t.data("g5-ajaxify-target")||"[data-g5-content-wrapper]").data("g5-ajaxify-target-parent",t.data("g5-ajaxify-target-parent")||null).data("g5-ajaxify-href",a[n].url).data("g5-ajaxify-params",a[n].params?JSON.stringify(a[n].params):null);var s=i("#navbar li.active")||i("#main-header li.active")||i("#navbar li:nth-child(2)");s&&s.showIndicator(),i("body").emit("click",{target:e.input,activeSpinner:s})};if(a[n])return b.get("pending")?void b.warning({callback:function(t,e){var n=e.find("[data-g-unsaved-save]"),a=e.find("[data-g-unsaved-discard]");n&&(n.on("click",function(t){return t.preventDefault(),!this.attribute("disabled")&&(i([n,a]).attribute("disabled"),b.on("update:pending",r),void i("body").emit("click",{target:i(".button-save")}))}),a.on("click",function(t){return t.preventDefault(),!this.attribute("disabled")&&(i([n,a]).attribute("disabled"),b.set("pending",!1),void r())}))},afterclose:function(){C=!0,e.setValue(e.getPreviousValue())}}):void r()}),e.HasChangeEvent=!0)})};a(function(){var t=i("body");if(GANTRY_AJAX_NONCE){var e,n,a=v.getPageUrl();switch(GANTRY_PLATFORM){case"wordpress":e=f(a,"_wpnonce"),n=f(a,"view"),n||(a=m(a,"view","configurations/default/styles"),v.replaceState({uuid:d(),doNothing:!0},window.document.title,a)),e!==GANTRY_AJAX_NONCE&&(a=m(a,"_wpnonce",GANTRY_AJAX_NONCE),v.replaceState({uuid:d(),doNothing:!0},window.document.title,a));break;case"grav":e=f(a,"nonce"),n=p(a,"configurations/default/styles"),n||(a+="configurations/default/styles",v.replaceState({uuid:d(),doNothing:!0},window.document.title,a)),e!==GANTRY_AJAX_NONCE&&(a=m(a,"nonce",GANTRY_AJAX_NONCE),v.replaceState({uuid:d(),doNothing:!0},window.document.title,a))}}t.delegate("click",".button-back-to-conf",function(e,n){e.preventDefault();var a=i("#configuration-selector"),r=t.outlineDeleted,s=a.value();T=T==-1?1:T;var l=i("#navbar"),c=l.find("li:nth-child("+(T+1)+") [data-g5-ajaxify]");if(b.get("pending"))return void b.warning({callback:function(e,n){var a=n.find("[data-g-unsaved-save]"),r=n.find("[data-g-unsaved-discard]"),s=function(){b.off("update:pending",s),o.close(),t.emit("click",{target:c}),l.attribute("tabindex",null).attribute("aria-hidden","false"),l.slideDown()};a&&(a.on("click",function(e){return e.preventDefault(),!this.attribute("disabled")&&(i([a,r]).attribute("disabled"),b.on("update:pending",s),void t.emit("click",{target:i(".button-save")}))}),r.on("click",function(t){return t.preventDefault(),!this.attribute("disabled")&&(i([a,r]).attribute("disabled"),b.set("pending",!1),void s())}))}});if(n.showIndicator(),r==s){var d=u(a.selectizeInstance.Options),h=d.shift();t.outlineDeleted=null,c.href(c.href().replace("/"+r+"/","/"+h+"/").replace("style="+r,"style="+h))}t.emit("click",{target:c}),l.attribute("tabindex",null),l.slideDown()}),t.delegate("click","#navbar a[data-g5-ajaxify]",function(t,e){var n=i("#navbar"),a=n.search("li a[data-g5-ajaxify]");T=l(a,e[0])+1}),t.delegate("click","[data-g5-ajaxify]",function(e,n){if(e&&e.preventDefault){if(2===e.which||e.metaKey||e.ctrlKey||e.altKey||e.shiftKey)return!0;e.preventDefault()}if(b.get("pending")&&!n.matches("a.menu-item")&&!n.parent("[data-menu-items]"))return void b.warning({callback:function(n,a){var r=a.find("[data-g-unsaved-save]"),s=a.find("[data-g-unsaved-discard]"),l=function(){b.off("update:pending",l),o.close(),t.emit("click",e)};r&&(r.on("click",function(e){return e.preventDefault(),!this.attribute("disabled")&&(i([r,s]).attribute("disabled"),b.on("update:pending",l),void t.emit("click",{target:i(".button-save")}))}),s.on("click",function(t){return t.preventDefault(),!this.attribute("disabled")&&(i([r,s]).attribute("disabled"),b.set("pending",!1),void l())}))}});n.showIndicator();var a=n.data("g5-ajaxify"),s=n.data("g5-ajaxify-target"),l=n.data("g5-ajaxify-target-parent"),u=n.attribute("href")||n.data("g5-ajaxify-href"),h=n.data("g5-ajaxify-params")||!1,p=n.attribute("title")||window.document.title;if(a=a?JSON.parse(a):{parsed:!1}){var f,m=d();(n.data("mm-id")||n.parent("[data-mm-id]"))&&(f={},f.menutype=i("select.menu-select-wrap").value(),f.settings=JSON.stringify(x.menumanager.settings),f.ordering=JSON.stringify(x.menumanager.ordering),f.items=JSON.stringify(x.menumanager.items)),r.set(m,c({},a,{target:s,parent:l,element:n,params:h,extras:f,event:e})),a={uuid:m}}v.pushState(a,p,u);var g,y,w=i("#navbar .active, #main-header .active");(g=n.parent("#navbar, #main-header"))&&(w&&w.removeClass("active"),y=g.search(".active"),y&&y.removeClass("active"),n.parent("li").addClass("active"))}),E()}),e.exports={}},{"../assignments":2,"../lm":27,"../menu":34,"../ui":53,"../ui/popover":55,"../utils/elements.utils":64,"./flags-state":67,"./get-ajax-suffix":68,"./get-ajax-url":69,"./history":73,agent:78,"elements/domready":109,"elements/zen":135,"mout/array/indexOf":173,"mout/collection/size":189,"mout/object/keys":234,"mout/object/merge":235,"mout/queryString/encode":244,"mout/queryString/getParam":245,"mout/queryString/setParam":247,"mout/random/guid":249,"mout/string/contains":255,prime:299,"prime/map":300}],62:[function(t,e,n){"use strict";var i=function(t,e,n){t=t||[];var i=-1,a=t.length>>>0;!function r(o){var s,l=o===!1;do++i;while(!(i in t)&&i!==a);return l||i===a?void(n&&n(!l,t)):(o=e.call({async:function(){return s=!0,r}},t[i],i,t),void(s||r(o)))}()};e.exports=i},{}],63:[function(t,e,n){"use strict";var i=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}(),a=function(t,e,n){var a,r=!1;t=t[0]||t;var o=function(t){a=t,s()},s=function(){r||(i(l),r=!0)},l=function(){n.call(t,a),r=!1};try{t.addEventListener(e,o,!1)}catch(t){}return o};e.exports=a},{}],64:[function(t,e,n){"use strict";var i=t("elements"),a=t("moofx"),r=t("mout/array/map"),o=t("mout/function/series"),s=t("slick"),l=t("elements/zen"),c=t("../ui/progresser"),u=function(t,e){return function(n){var i=s.parse(n||"*");return n=r(i,function(e){return t+" "+e}).join(", "),this[e](n)}};i.implement({style:function(){var t=a(this);return t.style.apply(t,arguments),this},animate:function(){var t=a(this);return t.animate.apply(t,arguments),this},hide:function(){return this.style("display","none")},show:function(t){return this.style("display",t||"inherit")},progresser:function(t){var e;this.forEach(function(n){return e=n.ProgresserInstance,e?e.constructor(n,t):e=new c(n,t),n.ProgresserInstance=e,e})},compute:function(){var t=a(this);return t.compute.apply(t,arguments)},showIndicator:function(t,e){this.forEach(function(n){n=i(n),"boolean"==typeof t&&(e=t,t=null);var a=!e&&n.find("i");n.gHadIcon=!!a,a||(n.find("span")||n.children()||l("span").text(n.text()).top(n.empty()),a=l("i"),a.top(n)),n.gIndicator||(n.gIndicator=a.attribute("class")||!0),a.attribute("class",t||"fa fa-fw fa-spin-fast fa-spinner")})},hideIndicator:function(){this.forEach(function(t){if(t=i(t),t.gIndicator){var e=t.find("i");e&&(t.gHadIcon?e.attribute("class",t.gIndicator):e.remove(),t.gIndicator=null)}})},slideDown:function(t,e){var n=this,i=this.getRealSize(),a=function(){n.gSlideCollapsed=!1},r=function(){n.attribute("style",n.gSlideStyle)};return e="function"==typeof t?t:e||function(){},this.gSlideCollapsed===!1?e():(e=o(a,e,r),t="string"==typeof t?t:{duration:"250ms",callback:e},this.style("visibility","visible").attribute("aria-hidden",!1),void this.animate({height:i.height},t))},slideUp:function(t,e){"undefined"==typeof this.gSlideCollapsed&&(this.gSlideStyle=this.attribute("style"));var n=this,i=function(){n.gSlideCollapsed=!0},a=function(){n.style("visibility","hidden").attribute("aria-hidden",!0)};return e="function"==typeof t?t:e||function(){},this.gSlideCollapsed===!0?e():(e=o(i,e,a),t="string"==typeof t?t:{duration:"250ms",callback:e},void this.style({overflow:"hidden"}).animate({height:0},t))},slideToggle:function(t,e){var n=this.getRealSize();return this[n.height&&!this.gSlideCollapsed?"slideUp":"slideDown"](t,e)},getRealSize:function(){var t,e=this.attribute("style");return this.style({position:"relative",overflow:"inherit",top:-5e4,height:"auto",width:"auto"}),t={width:parseInt(this.compute("width"),10),height:parseInt(this.compute("height"),10)},this.attribute("style",e),t},sibling:u("++","find"),siblings:u("~~","search")}),e.exports=i},{"../ui/progresser":56,elements:111,"elements/zen":135,moofx:136,"mout/array/map":178,"mout/function/series":195,slick:312}],65:[function(t,e,n){"use strict";var i=t("elements");i.implement({belowthefold:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var a=this.position().height+this[0].scrollTop;return n.filter(function(t){return a<=i(t)[0].offsetTop-e})},abovethetop:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var a=this[0].scrollTop;return n.filter(function(t){return a>=i(t)[0].offsetTop+i(t).position().height-e})},rightofscreen:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var a=this.position().width+this[0].scrollLeft;return n.filter(function(t){return a<=i(t)[0].offsetLeft-e})},leftofscreen:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var a=this[0].scrollLeft;return n.filter(function(t){return a>=i(t)[0].offsetLeft+i(t).position().width-e})},inviewport:function(t,e){var n=this.search(t);if(e=e||0,!n)return!1;var a=this.position();return n.filter(function(t){return t=i(t),t[0].offsetTop+e>=this[0].scrollTop&&t[0].offsetTop-e<=this[0].scrollTop+a.height},this)}}),e.exports=i},{elements:111}],66:[function(t,e,n){"use strict";var i=t("elements"),a=function(t){t=i(t);var e=t[0],n=t.tag(),a=t.type(),o=!0;return~["input","textarea","select"].indexOf(n)?("undefined"!=typeof e.willValidate?("input"!=n||e.type.toLowerCase()===a&&!t.hasClass("custom-validation-field")||e.setCustomValidity(r(t)?"":"The field value is invalid"),e.checkValidity()):(e.validity=e.validity||{},e.validity.valid=r(t)),o=e.validity.valid):o},r=function(t){t=i(t);var e=!0,n=t.value(),a=t.type(),r="checkbox"==a||"radio"==a,o=t.attribute("disabled"),s=t.attribute("required"),l=t.attribute("minlength"),c=t.attribute("maxlength"),u=t.attribute("min"),d=t.attribute("max"),h=t.attribute("pattern");return o?e:(e=e&&(!s||r&&t.checked()||!r&&n),e=e&&(r||(!l||n.length>=l)&&(!c||n.length<=c)),e&&h&&(h=new RegExp(h),e=h.test(n)),!e||null===u&&null===d||(null!==u&&(e=parseFloat(n)>=parseFloat(u)),null!==d&&(e=parseFloat(n)<=parseFloat(d))),
e)};e.exports=a},{elements:111}],67:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime/map"),r=t("prime/emitter"),o=t("../ui").modal,s=t("./get-ajax-url").global,l=t("./get-ajax-url").parse,c=t("./get-ajax-suffix"),u=new i({inherits:r,constructor:function(){this.flags=a()},set:function(t,e){return this.flags.set(t,e).get(t)},get:function(t,e){var n=this.flags.get(t);return n?n:this.set(t,e)},keys:function(){return this.flags.keys()},values:function(){return this.flags.values()},warning:function(t){var e=t.callback||function(){},n=t.afterclose||function(){},i=l(t.url||s("unsaved")+c());t.url||t.message||(t.url=!0),t.url?o.open({content:"Loading...",remote:i,data:t.data||!1,remoteLoaded:function(t,n){var i=n.elements.content;e&&e.call(this,t,i,n)},afterClose:n||function(){}}):o.open({content:t.message,afterOpen:function(t,n){var i=n.elements.content;e&&e.call(this,t,i,n)},afterClose:n||function(){}})}});e.exports=new u},{"../ui":53,"./get-ajax-suffix":68,"./get-ajax-url":69,prime:299,"prime/emitter":298,"prime/map":300}],68:[function(t,e,n){"use strict";var i=function(){var t=window.GANTRY_AJAX_SUFFIX||void 0;return"undefined"==typeof t?"":t};e.exports=i},{}],69:[function(t,e,n){"use strict";var i=t("mout/string/unescapeHtml"),a=t("./get-ajax-suffix"),r=t("mout/string/endsWith"),o=t("mout/queryString/getQuery"),s=t("mout/queryString/getParam"),l=(t("mout/queryString/setParam"),function(t,e){var n=window.GANTRY_AJAX_URL||"";e||(e="%ajax%");var a=new RegExp(e,"g"),r="undefined"==typeof n?"":n;return i(r.replace(a,t))}),c=function(t,e){var n=window.GANTRY_AJAX_CONF_URL||"";e||(e="%ajax%");var a=new RegExp(e,"g"),r="undefined"==typeof n?"":n;return i(r.replace(a,t))},u=function(t){var e=window.GANTRY_PLATFORM||"",n="undefined"==typeof e?"":e;switch(n){case"wordpress":t=t.replace(/themes\.php/gi,"admin-ajax.php");break;case"grav":var i=a();if(r(t,i)){var l=""+o(t),c=""+s(t,"nonce");t=t.replace(l,i)+l.replace(c,c.replace(i,""))}}return t};e.exports={global:l,config:c,parse:u}},{"./get-ajax-suffix":68,"mout/queryString/getParam":245,"mout/queryString/getQuery":246,"mout/queryString/setParam":247,"mout/string/endsWith":256,"mout/string/unescapeHtml":272}],70:[function(t,e,n){"use strict";var i=t("elements"),a=t("mout/string/trim"),r=function(t){return null==t?"":a(i("#configuration-selector").selectizeInstance.Options[t].text)},o=function(){return a(i("#configuration-selector").selectizeInstance.getValue())};e.exports={getOutlineNameById:r,getCurrentOutline:o}},{elements:111,"mout/string/trim":270}],71:[function(t,e,n){"use strict";var i=t("elements/zen"),a=null,r=function(){if(null!==a)return a;var t,e=i("div").bottom("#g5-container");return e.style({width:100,height:100,overflow:"scroll",position:"absolute",zIndex:-9999}),t=e[0].offsetWidth-e[0].clientWidth,e.remove(),a=t,t};e.exports=r},{"elements/zen":135}],72:[function(t,e,n){"use strict";var i=t("elements"),a=t("elements/domready"),r={};if("undefined"!=typeof r.Adapter)throw new Error("History.js Adapter has already been loaded...");r.Adapter={bind:function(t,e,n){i(t).on(e,n)},trigger:function(t,e,n){i(t).emit(e,n)},extractEventData:function(t,e){return e&&e.event&&e.event[t]||e&&e[t]||void 0},onDomLoad:function(t){a(t)}},"undefined"!=typeof r.init&&r.init(),e.exports=r},{elements:111,"elements/domready":109}],73:[function(t,e,n){"use strict";var i=window.console||void 0,a=window.document,r=window.navigator,o=!1,s=window.setTimeout,l=window.clearTimeout,c=window.setInterval,u=window.clearInterval,d=window.JSON,h=window.alert,p=window.History=t("./history-adapter")||{},f=window.history;try{o=window.sessionStorage,o.setItem("TEST","1"),o.removeItem("TEST")}catch(t){o=!1}d.stringify=d.stringify||d.encode,d.parse=d.parse||d.decode,"undefined"==typeof p.init&&(p.init=function(t){return"undefined"!=typeof p.Adapter&&("undefined"!=typeof p.initCore&&p.initCore(),"undefined"!=typeof p.initHtml4&&p.initHtml4(),!0)},p.initCore=function(t){if("undefined"!=typeof p.initCore.initialized)return!1;if(p.initCore.initialized=!0,p.options=p.options||{},p.options.hashChangeInterval=p.options.hashChangeInterval||100,p.options.safariPollInterval=p.options.safariPollInterval||500,p.options.doubleCheckInterval=p.options.doubleCheckInterval||500,p.options.disableSuid=p.options.disableSuid||!1,p.options.storeInterval=p.options.storeInterval||1e3,p.options.busyDelay=p.options.busyDelay||250,p.options.debug=p.options.debug||!1,p.options.initialTitle=p.options.initialTitle||a.title,p.options.html4Mode=p.options.html4Mode||!1,p.options.delayInit=p.options.delayInit||!1,p.intervalList=[],p.clearAllIntervals=function(){var t,e=p.intervalList;if("undefined"!=typeof e&&null!==e){for(t=0;t<e.length;t++)u(e[t]);p.intervalList=null}},p.debug=function(){p.options.debug&&p.log.apply(p,arguments)},p.log=function(){var t,e,n,r,o,s=!("undefined"==typeof i||"undefined"==typeof i.log||"undefined"==typeof i.log.apply),l=a.getElementById("log");for(s?(r=Array.prototype.slice.call(arguments),t=r.shift(),"undefined"!=typeof i.debug?i.debug.apply(i,[t,r]):i.log.apply(i,[t,r])):t="\n"+arguments[0]+"\n",e=1,n=arguments.length;e<n;++e){if(o=arguments[e],"object"==typeof o&&"undefined"!=typeof d)try{o=d.stringify(o)}catch(t){}t+="\n"+o+"\n"}return l?(l.value+=t+"\n-----\n",l.scrollTop=l.scrollHeight-l.clientHeight):s||h(t),!0},p.getInternetExplorerMajorVersion=function(){var t=p.getInternetExplorerMajorVersion.cached="undefined"!=typeof p.getInternetExplorerMajorVersion.cached?p.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=a.createElement("div"),n=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&n[0];);return t>4&&t}();return t},p.isInternetExplorer=function(){var t=p.isInternetExplorer.cached="undefined"!=typeof p.isInternetExplorer.cached?p.isInternetExplorer.cached:Boolean(p.getInternetExplorerMajorVersion());return t},p.options.html4Mode?p.emulated={pushState:!0,hashChange:!0}:p.emulated={pushState:!Boolean(window.history&&window.history.pushState&&window.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(r.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(r.userAgent))),hashChange:Boolean(!("onhashchange"in window||"onhashchange"in a)||p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8)},p.enabled=!p.emulated.pushState,p.bugs={setHash:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),safariPoll:Boolean(!p.emulated.pushState&&"Apple Computer, Inc."===r.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(r.userAgent)),ieDoubleCheck:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(p.isInternetExplorer()&&p.getInternetExplorerMajorVersion()<7)},p.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},p.cloneObject=function(t){var e,n;return t?(e=d.stringify(t),n=d.parse(e)):n={},n},p.getRootUrl=function(){var t=a.location.protocol+"//"+(a.location.hostname||a.location.host);return a.location.port&&(t+=":"+a.location.port),t+="/"},p.getBaseHref=function(){var t=a.getElementsByTagName("base"),e=null,n="";return 1===t.length&&(e=t[0],n=e.href.replace(/[^\/]+$/,"")),n=n.replace(/\/+$/,""),n&&(n+="/"),n},p.getBaseUrl=function(){var t=p.getBaseHref()||p.getBasePageUrl()||p.getRootUrl();return t},p.getPageUrl=function(){var t,e=p.getState(!1,!1),n=(e||{}).url||p.getLocationHref();return t=n.replace(/\/+$/,"").replace(/[^\/]+$/,function(t,e,n){return/\./.test(t)?t:t+"/"})},p.getBasePageUrl=function(){var t=p.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t,e,n){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/";return t},p.getFullUrl=function(t,e){var n=t,i=t.substring(0,1);return e="undefined"==typeof e||e,/[a-z]+\:\/\//.test(t)||(n="/"===i?p.getRootUrl()+t.replace(/^\/+/,""):"#"===i?p.getPageUrl().replace(/#.*/,"")+t:"?"===i?p.getPageUrl().replace(/[\?#].*/,"")+t:e?p.getBaseUrl()+t.replace(/^(\.\/)+/,""):p.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},p.getShortUrl=function(t){var e=t,n=p.getBaseUrl(),i=p.getRootUrl();return p.emulated.pushState&&(e=e.replace(n,"")),e=e.replace(i,"/"),p.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},p.getLocationHref=function(t){return t=t||a,t.URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:t.URL.indexOf("#")==-1&&t.location.href.indexOf("#")!=-1?t.location.href:t.URL||t.location.href},p.store={},p.idToState=p.idToState||{},p.stateToId=p.stateToId||{},p.urlToId=p.urlToId||{},p.storedStates=p.storedStates||[],p.savedStates=p.savedStates||[],p.normalizeStore=function(){p.store.idToState=p.store.idToState||{},p.store.urlToId=p.store.urlToId||{},p.store.stateToId=p.store.stateToId||{}},p.getState=function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0);var n=p.getLastSavedState();return!n&&e&&(n=p.createStateObject()),t&&(n=p.cloneObject(n),n.url=n.cleanUrl||n.url),n},p.getIdByState=function(t){var e,n=p.extractId(t.url);if(!n)if(e=p.getStateString(t),"undefined"!=typeof p.stateToId[e])n=p.stateToId[e];else if("undefined"!=typeof p.store.stateToId[e])n=p.store.stateToId[e];else{for(;;)if(n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"==typeof p.idToState[n]&&"undefined"==typeof p.store.idToState[n])break;p.stateToId[e]=n,p.idToState[n]=t}return n},p.normalizeState=function(t){var e,n;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),e={},e.normalized=!0,e.title=t.title||"",e.url=p.getFullUrl(t.url?t.url:p.getLocationHref()),e.hash=p.getShortUrl(e.url),e.data=p.cloneObject(t.data),e.id=p.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,n=!p.isEmptyObject(e.data),(e.title||n)&&p.options.disableSuid!==!0&&(e.hash=p.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=p.getFullUrl(e.hash),(p.emulated.pushState||p.bugs.safariPoll)&&p.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},p.createStateObject=function(t,e,n){var i={data:t,title:e,url:n};return i=p.normalizeState(i)},p.getStateById=function(t){t=String(t);var e=p.idToState[t]||p.store.idToState[t]||void 0;return e},p.getStateString=function(t){var e,n,i;return e=p.normalizeState(t),n={data:e.data,title:t.title,url:t.url},i=d.stringify(n)},p.getStateId=function(t){var e,n;return e=p.normalizeState(t),n=e.id},p.getHashByState=function(t){var e,n;return e=p.normalizeState(t),n=e.hash},p.extractId=function(t){var e,n,i,a;return a=t.indexOf("#")!=-1?t.split("#")[0]:t,n=/(.*)\&_suid=([0-9]+)$/.exec(a),i=n?n[1]||t:t,e=n?String(n[2]||""):"",e||!1},p.isTraditionalAnchor=function(t){var e=!/[\/\?\.]/.test(t);return e},p.extractState=function(t,e){var n,i,a=null;return e=e||!1,n=p.extractId(t),n&&(a=p.getStateById(n)),a||(i=p.getFullUrl(t),n=p.getIdByUrl(i)||!1,n&&(a=p.getStateById(n)),a||!e||p.isTraditionalAnchor(t)||(a=p.createStateObject(null,null,i))),a},p.getIdByUrl=function(t){var e=p.urlToId[t]||p.store.urlToId[t]||void 0;return e},p.getLastSavedState=function(){return p.savedStates[p.savedStates.length-1]||void 0},p.getLastStoredState=function(){return p.storedStates[p.storedStates.length-1]||void 0},p.hasUrlDuplicate=function(t){var e,n=!1;return e=p.extractState(t.url),n=e&&e.id!==t.id},p.storeState=function(t){return p.urlToId[t.url]=t.id,p.storedStates.push(p.cloneObject(t)),t},p.isLastSavedState=function(t){var e,n,i,a=!1;return p.savedStates.length&&(e=t.id,n=p.getLastSavedState(),i=n.id,a=e===i),a},p.saveState=function(t){return!p.isLastSavedState(t)&&(p.savedStates.push(p.cloneObject(t)),!0)},p.getStateByIndex=function(t){var e=null;return e="undefined"==typeof t?p.savedStates[p.savedStates.length-1]:t<0?p.savedStates[p.savedStates.length+t]:p.savedStates[t]},p.getCurrentIndex=function(){var t=null;return t=p.savedStates.length<1?0:p.savedStates.length-1},p.getHash=function(t){var e,n=p.getLocationHref(t);return e=p.getHashByUrl(n)},p.unescapeHash=function(t){var e=p.normalizeHash(t);return e=decodeURIComponent(e)},p.normalizeHash=function(t){var e=t.replace(/[^#]*#/,"").replace(/#.*/,"");return e},p.setHash=function(t,e){var n,i;return e!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.setHash,args:arguments,queue:e}),!1):(p.busy(!0),n=p.extractState(t,!0),n&&!p.emulated.pushState?p.pushState(n.data,n.title,n.url,!1):p.getHash()!==t&&(p.bugs.setHash?(i=p.getPageUrl(),p.pushState(null,null,i+"#"+t,!1)):a.location.hash=t),p)},p.escapeHash=function(t){var e=p.normalizeHash(t);return e=window.encodeURIComponent(e),p.bugs.hashEscape||(e=e.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),e},p.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=p.unescapeHash(e)},p.setTitle=function(t){var e,n=t.title;n||(e=p.getStateByIndex(0),e&&e.url===t.url&&(n=e.title||p.options.initialTitle));try{a.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(t){}return a.title=n,p},p.queues=[],p.busy=function(t){if("undefined"!=typeof t?p.busy.flag=t:"undefined"==typeof p.busy.flag&&(p.busy.flag=!1),!p.busy.flag){l(p.busy.timeout);var e=function(){var t,n,i;if(!p.busy.flag)for(t=p.queues.length-1;t>=0;--t)n=p.queues[t],0!==n.length&&(i=n.shift(),p.fireQueueItem(i),p.busy.timeout=s(e,p.options.busyDelay))};p.busy.timeout=s(e,p.options.busyDelay)}return p.busy.flag},p.busy.flag=!1,p.fireQueueItem=function(t){return t.callback.apply(t.scope||p,t.args||[])},p.pushQueue=function(t){return p.queues[t.queue||0]=p.queues[t.queue||0]||[],p.queues[t.queue||0].push(t),p},p.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),"undefined"!=typeof e&&(t.queue=e),p.busy()?p.pushQueue(t):p.fireQueueItem(t),p},p.clearQueue=function(){return p.busy.flag=!1,p.queues=[],p},p.stateChanged=!1,p.doubleChecker=!1,p.doubleCheckComplete=function(){return p.stateChanged=!0,p.doubleCheckClear(),p},p.doubleCheckClear=function(){return p.doubleChecker&&(l(p.doubleChecker),p.doubleChecker=!1),p},p.doubleCheck=function(t){return p.stateChanged=!1,p.doubleCheckClear(),p.bugs.ieDoubleCheck&&(p.doubleChecker=s(function(){return p.doubleCheckClear(),p.stateChanged||t(),!0},p.options.doubleCheckInterval)),p},p.safariStatePoll=function(){var t,e=p.extractState(p.getLocationHref());if(!p.isLastSavedState(e))return t=e,t||(t=p.createStateObject()),p.Adapter.trigger(window,"popstate"),p},p.back=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.back,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.back(!1)}),f.go(-1),!0)},p.forward=function(t){return t!==!1&&p.busy()?(p.pushQueue({scope:p,callback:p.forward,args:arguments,queue:t}),!1):(p.busy(!0),p.doubleCheck(function(){p.forward(!1)}),f.go(1),!0)},p.go=function(t,e){var n;if(t>0)for(n=1;n<=t;++n)p.forward(e);else{if(!(t<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;n>=t;--n)p.back(e)}return p},p.emulated.pushState){var e=function(){};p.pushState=p.pushState||e,p.replaceState=p.replaceState||e}else p.onPopState=function(t,e){var n,i,a=!1,r=!1;return p.doubleCheckComplete(),(n=p.getHash())?(i=p.extractState(n||p.getLocationHref(),!0),i?p.replaceState(i.data,i.title,i.url,!1):(p.Adapter.trigger(window,"anchorchange"),p.busy(!1)),p.expectedStateId=!1,!1):(a=p.Adapter.extractEventData("state",t,e)||!1,r=a?p.getStateById(a):p.expectedStateId?p.getStateById(p.expectedStateId):p.extractState(p.getLocationHref()),r||(r=p.createStateObject(null,null,p.getLocationHref())),p.expectedStateId=!1,p.isLastSavedState(r)?(p.busy(!1),!1):(p.storeState(r),p.saveState(r),p.setTitle(r),p.Adapter.trigger(window,"statechange"),p.busy(!1),!0))},p.Adapter.bind(window,"popstate",p.onPopState),p.pushState=function(t,e,n,i){if(p.getHashByUrl(n)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.pushState,args:arguments,queue:i}),!1;p.busy(!0);var a=p.createStateObject(t,e,n);return p.isLastSavedState(a)?p.busy(!1):(p.storeState(a),p.expectedStateId=a.id,f.pushState(a.id,a.title,a.url),p.Adapter.trigger(window,"popstate")),!0},p.replaceState=function(t,e,n,i){if(p.getHashByUrl(n)&&p.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(i!==!1&&p.busy())return p.pushQueue({scope:p,callback:p.replaceState,args:arguments,queue:i}),!1;p.busy(!0);var a=p.createStateObject(t,e,n);return p.isLastSavedState(a)?p.busy(!1):(p.storeState(a),p.expectedStateId=a.id,f.replaceState(a.id,a.title,a.url),p.Adapter.trigger(window,"popstate")),!0};if(o){try{p.store=d.parse(o.getItem("History.store"))||{}}catch(t){p.store={}}p.normalizeStore()}else p.store={},p.normalizeStore();p.Adapter.bind(window,"unload",p.clearAllIntervals),p.saveState(p.storeState(p.extractState(p.getLocationHref(),!0))),o&&(p.onUnload=function(){var t,e,n;try{t=d.parse(o.getItem("History.store"))||{}}catch(e){t={}}t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{};for(e in p.idToState)p.idToState.hasOwnProperty(e)&&(t.idToState[e]=p.idToState[e]);for(e in p.urlToId)p.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=p.urlToId[e]);for(e in p.stateToId)p.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=p.stateToId[e]);p.store=t,p.normalizeStore(),n=d.stringify(t);try{o.setItem("History.store",n)}catch(t){if(t.code!==DOMException.QUOTA_EXCEEDED_ERR)throw t;o.length&&(o.removeItem("History.store"),o.setItem("History.store",n))}},p.isInternetExplorer()&&p.intervalList.push(c(p.onUnload,p.options.storeInterval)),p.Adapter.bind(window,"beforeunload",p.onUnload),p.Adapter.bind(window,"unload",p.onUnload)),p.emulated.pushState||(p.bugs.safariPoll&&p.intervalList.push(c(p.safariStatePoll,p.options.safariPollInterval)),"Apple Computer, Inc."!==r.vendor&&"Mozilla"!==(r.appCodeName||"")||(p.Adapter.bind(window,"hashchange",function(){p.Adapter.trigger(window,"popstate")}),p.getHash()&&p.Adapter.onDomLoad(function(){p.Adapter.trigger(window,"hashchange")})))},p.options&&p.options.delayInit||p.init()),e.exports=p},{"./history-adapter":72}],74:[function(t,e,n){!function(){for(var t=0,e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(e,n){var i=(new Date).getTime(),a=Math.max(0,16-(i-t)),r=window.setTimeout(function(){e(i+a)},a);return t=i+a,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)})}(),e.exports={}},{}],75:[function(t,e,n){var i=t("prime"),a=t("mout/lang/deepClone"),r=new i({constructor:function(t){t=a(t),this.setSession(t)},setSession:function(t){return t=t?{time:+new Date,data:a(t)}:{},this.session=t,this.session},getTime:function(){return this.session.time},getData:function(){return this.session.data},getSession:function(){return this.session},getDiff:function(t){return t}});e.exports=r},{"mout/lang/deepClone":198,prime:299}],76:[function(t,e,n){(function(n){"use strict";var i=t("mout/string/replace");e.exports=function(t,e){var a=n.G5T||function(t){return t};return i(a(t),"%s",e||"")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"mout/string/replace":265}],77:[function(t,e,n){var i=t("elements");e.exports=function(t){if(!t)return!1;if(i("body").hasClass("wp-customizer")&&jQuery){var e=t.parent(".widget-content"),n=t.siblings(".g-instancepicker-title");if(e){var a=jQuery.Event("change");a.target=t[0],jQuery(e[0]).trigger(a)}n&&setTimeout(function(){n.hideIndicator()},5)}}},{elements:111}],78:[function(t,e,n){"use strict";var i=t("prime"),a=t("prime/emitter"),r=t("mout/lang/isObject"),o=t("mout/lang/isString"),s=t("mout/lang/isArray"),l=t("mout/lang/isFunction"),c=t("mout/string/trim"),u=t("mout/string/upperCase"),d=t("mout/object/forIn"),h=t("mout/object/mixIn"),p=t("mout/array/remove"),f=t("mout/array/forEach"),m=function(t){return t.replace(/\b[a-z]/g,u)},g=function(){var t=function(){return new XMLHttpRequest},e=function(){return new ActiveXObject("MSXML2.XMLHTTP")},n=function(){return new ActiveXObject("Microsoft.XMLHTTP")};try{return t(),t}catch(t){}try{return e(),e}catch(t){}try{return n(),n}catch(t){}return null}(),v=function(t){return null==t?"":t.toJSON?t.toJSON():JSON.stringify(t)},b=function(t,e){if(null==t)return"";if(t.toQueryString)return t.toQueryString();var n=[];return d(t,function(t,i){e&&(i=e+"["+i+"]");var a;if(null!=t){if(s(t)){for(var o={},l=0;l<t.length;l++)o[l]=t[l];a=b(o,i)}else a=r(t)?b(t,i):i+"="+encodeURIComponent(t);n.push(a)}}),n.join("&")},y=JSON.parse,w=function(t){for(var e=t.split("&"),n={},i=0;i<e.length;i++){var a=e[i].split("="),r=decodeURIComponent(a[0]),o=decodeURIComponent(a[1]),s=/\[\]$/.test(r),l=r.match(/^(.+)\[([^\]]+)\]$/);if(l){r=l[1];var c=l[2];n[r]=n[r]||{},n[r][c]=o}else s?(r=r.substring(0,r.length-2),n[r]=n[r]||[],n[r].push(o)):n[r]=o}return n},x={"application/json":v,"application/x-www-form-urlencoded":b},k={"application/json":y,"application/x-www-form-urlencoded":w},S=function(t){var e=t.split(/\r?\n/),n={};e.pop();for(var i=0,a=e.length;i<a;++i){var r=e[i],o=r.indexOf(":"),s=m(r.slice(0,o)),l=c(r.slice(o+1));n[s]=l}return n},C=0,T=[],E=i({constructor:function(){this._header={"Content-Type":"application/x-www-form-urlencoded"}},header:function(t,e){if(r(t))for(var n in t)this.header(n,t[n]);else{if(!arguments.length)return this._header;if(1===arguments.length)return this._header[m(t)];2===arguments.length&&(null==e?delete this._header[m(t)]:this._header[m(t)]=e)}return this},running:function(){return!!this._running},abort:function(){return this._queued&&(p(T,this._queued),delete this._queued),this._xhr&&(this._xhr.abort(),this._end()),this},method:function(t){return arguments.length?(this._method=t.toUpperCase(),this):this._method},data:function(t){return arguments.length?(this._data=t,this):this._data},url:function(t){return arguments.length?(this._url=t,this):this._url},user:function(t){return arguments.length?(this._user=t,this):this._user},password:function(t){return arguments.length?(this._password=t,this):this._password},_send:function(t,e,n,i,a,r,o){var s=this;if(C===A.MAX_REQUESTS)return T.unshift(this._queued=function(){delete s._queued,s._send(t,e,n,i,a,r,o)});C++;var l=this._xhr=A.getRequest();l.addEventListener&&f(["progress","load","error","abort","loadend"],function(t){l.addEventListener(t,function(e){s.emit(t,e)},!1)}),l.open(t,e,!0,a,r),null!=a&&"withCredentials"in l&&(l.withCredentials=!0),l.onreadystatechange=function(){if(4===l.readyState){var n=l.status,i=new O(l.responseText,n,S(l.getAllResponseHeaders())),a=i.error?new Error(t+" "+e+" "+n):null;s._end(),o(a,i)}};for(var c in i)l.setRequestHeader(c,i[c]);l.send(n||null)},_end:function(){this._xhr.onreadystatechange=function(){},delete this._xhr,delete this._running,C--;var t=T.pop();t&&t()},send:function(t){this._running&&this.abort(),this._running=!0,t||(t=function(){});var e=this._method||"POST",n=this._data||null,i=this._url,a=this._user||null,r=this._password||null;if(n&&!o(n)){var s=this._header["Content-Type"].split(/ *; */).shift(),l=x[s];l&&(n=l(n))}/GET|HEAD/.test(e)&&n&&(i+=(i.indexOf("?")>-1?"&":"?")+n);var c=h({},this._header);return this._send(e,i,n,c,a,r,t),this}});E.implement(new a);var O=i({constructor:function(t,e,n){this.text=t,this.status=e,this.header=n;var i=e/100|0;this.info=1===i,this.ok=2===i,this.clientError=4===i,this.serverError=5===i,this.error=4===i||5===i;var a=""+n["Content-Length"];this.accepted=202===e,this.noContent="0"===a||204===e||1223===e,this.badRequest=400===e,this.unauthorized=401===e,this.notAcceptable=406===e,this.notFound=404===e;var r,o=n["Content-Type"]?n["Content-Type"].split(/ *; */).shift():"";this.noContent||(r=k[o]),this.body=r?r(this.text):this.text}}),I="get|post|put|delete|head|patch|options",_=new RegExp("^("+I+")$","i"),A=function(t,e,n,i){var a=new E;return arguments.length?(_.test(t)||(i=n,n=e,e=t,t="post"),l(n)&&(i=n,n=null),a.method(t),e&&a.url(e),n&&a.data(n),i&&a.send(i),a):a};A.encoder=function(t,e){return 1===arguments.length?x[t]:(x[t]=e,A)},A.decoder=function(t,e){return 1===arguments.length?k[t]:(k[t]=e,A)},f(I.split("|"),function(t){A[t]=function(e,n,i){return A(t,e,n,i)}}),A.MAX_REQUESTS=1/0,A.getRequest=g,A.Request=E,A.Response=O,e.exports=A},{"mout/array/forEach":79,"mout/array/remove":81,"mout/lang/isArray":83,"mout/lang/isFunction":84,"mout/lang/isObject":86,"mout/lang/isString":87,"mout/object/forIn":90,"mout/object/mixIn":93,"mout/string/trim":97,"mout/string/upperCase":98,prime:102,"prime/emitter":101}],79:[function(t,e,n){function i(t,e,n){if(null!=t)for(var i=-1,a=t.length;++i<a&&e.call(n,t[i],i,t)!==!1;);}e.exports=i},{}],80:[function(t,e,n){function i(t,e,n){if(n=n||0,null==t)return-1;for(var i=t.length,a=n<0?i+n:n;a<i;){if(t[a]===e)return a;a++}return-1}e.exports=i},{}],81:[function(t,e,n){function i(t,e){var n=a(t,e);n!==-1&&t.splice(n,1)}var a=t("./indexOf");e.exports=i},{"./indexOf":80}],82:[function(t,e,n){function i(t,e){function n(){}return n.prototype=t,a(new n,e)}var a=t("../object/mixIn");e.exports=i},{"../object/mixIn":93}],83:[function(t,e,n){var i=t("./isKind"),a=Array.isArray||function(t){return i(t,"Array")};e.exports=a},{"./isKind":85}],84:[function(t,e,n){function i(t){return a(t,"Function")}var a=t("./isKind");e.exports=i},{"./isKind":85}],85:[function(t,e,n){function i(t,e){return a(t)===e}var a=t("./kindOf");e.exports=i},{"./kindOf":88}],86:[function(t,e,n){function i(t){return a(t,"Object")}var a=t("./isKind");e.exports=i},{"./isKind":85}],87:[function(t,e,n){function i(t){return a(t,"String")}var a=t("./isKind");e.exports=i},{"./isKind":85}],88:[function(t,e,n){function i(t){return null===t?"Null":t===a?"Undefined":r.exec(o.call(t))[1]}var a,r=/^\[object (.*)\]$/,o=Object.prototype.toString;e.exports=i},{}],89:[function(t,e,n){function i(t){return null==t?"":t.toString()}e.exports=i},{}],90:[function(t,e,n){function i(){s=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],o=!0;for(var t in{toString:null})o=!1}function a(t,e,n){var a,c=0;null==o&&i();for(a in t)if(r(e,t,a,n)===!1)break;if(o)for(var u=t.constructor,d=!!u&&t===u.prototype;(a=s[c++])&&("constructor"===a&&(d||!l(t,a))||t[a]===Object.prototype[a]||r(e,t,a,n)!==!1););}function r(t,e,n,i){return t.call(i,e[n],n,e)}var o,s,l=t("./hasOwn");e.exports=a},{"./hasOwn":92}],91:[function(t,e,n){function i(t,e,n){r(t,function(i,r){if(a(t,r))return e.call(n,t[r],r,t)})}var a=t("./hasOwn"),r=t("./forIn");e.exports=i},{"./forIn":90,"./hasOwn":92}],92:[function(t,e,n){function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=i},{}],93:[function(t,e,n){function i(t,e){for(var n,i=0,o=arguments.length;++i<o;)n=arguments[i],null!=n&&r(n,a,t);return t}function a(t,e){this[e]=t}var r=t("./forOwn");e.exports=i},{"./forOwn":91}],94:[function(t,e,n){e.exports=[" ","\n","\r","\t","\f","\v"," "," ","᠎"," "," "," "," "," "," "," "," "," "," "," ","\u2028","\u2029"," "," ","　"]},{}],95:[function(t,e,n){function i(t,e){t=a(t),e=e||r;for(var n,i,o=0,s=t.length,l=e.length,c=!0;c&&o<s;)for(c=!1,n=-1,i=t.charAt(o);++n<l;)if(i===e[n]){c=!0,o++;break}return o>=s?"":t.substr(o,s)}var a=t("../lang/toString"),r=t("./WHITE_SPACES");e.exports=i},{"../lang/toString":89,"./WHITE_SPACES":94}],96:[function(t,e,n){function i(t,e){t=a(t),e=e||r;for(var n,i,o=t.length-1,s=e.length,l=!0;l&&o>=0;)for(l=!1,n=-1,i=t.charAt(o);++n<s;)if(i===e[n]){l=!0,o--;break}return o>=0?t.substring(0,o+1):""}var a=t("../lang/toString"),r=t("./WHITE_SPACES");e.exports=i},{"../lang/toString":89,"./WHITE_SPACES":94}],97:[function(t,e,n){function i(t,e){return t=a(t),e=e||r,o(s(t,e),e)}var a=t("../lang/toString"),r=t("./WHITE_SPACES"),o=t("./ltrim"),s=t("./rtrim");e.exports=i},{"../lang/toString":89,"./WHITE_SPACES":94,"./ltrim":95,"./rtrim":96}],98:[function(t,e,n){function i(t){return t=a(t),t.toUpperCase()}var a=t("../lang/toString");e.exports=i},{"../lang/toString":89}],99:[function(t,e,n){function i(){return i.get()}i.get="function"==typeof Date.now?Date.now:function(){return+new Date},e.exports=i},{}],100:[function(t,e,n){(function(n,i){"use strict";var a=t("mout/lang/kindOf"),r=t("mout/time/now"),o=t("mout/array/forEach"),s=t("mout/array/indexOf"),l={timeout:{},frame:[],immediate:[]},c=function(t,e,n,i){var a=function(){u(t)};t.length||i(a);var r={callback:e,context:n};return t.push(r),function(){var e=s(t,r);e>-1&&t.splice(e,1)}},u=function(t){var e=r();o(t.splice(0),function(t){t.callback.call(t.context,e)})},d=function(t,e,n){return"Number"===a(e)?d.timeout(t,e,n):d.immediate(t,e)};i.process&&n.nextTick?d.immediate=function(t,e){return c(l.immediate,t,e,n.nextTick)}:i.setImmediate?d.immediate=function(t,e){return c(l.immediate,t,e,setImmediate)}:i.postMessage&&i.addEventListener?(addEventListener("message",function(t){t.source===i&&"@deferred"===t.data&&(t.stopPropagation(),u(l.immediate))},!0),d.immediate=function(t,e){return c(l.immediate,t,e,function(){postMessage("@deferred","*")})}):d.immediate=function(t,e){return c(l.immediate,t,e,function(t){setTimeout(t,0)})};var h=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};d.frame=function(t,e){return c(l.frame,t,e,h)};var p;d.timeout=function(t,e,n){var i=l.timeout;return p||(p=d.immediate(function(){p=null,l.timeout={}})),c(i[e]||(i[e]=[]),t,n,function(t){setTimeout(t,e)})},e.exports=d}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1,"mout/array/forEach":79,"mout/array/indexOf":80,"mout/lang/kindOf":88,"mout/time/now":99}],101:[function(t,e,n){"use strict";var i=t("mout/array/indexOf"),a=t("mout/array/forEach"),r=t("./index"),o=t("./defer"),s=Array.prototype.slice,l=r({on:function(t,e){var n=this._listeners||(this._listeners={}),a=n[t]||(n[t]=[]);return i(a,e)===-1&&a.push(e),this},off:function(t,e){var n,a=this._listeners;if(a&&(n=a[t])){var r=i(n,e);r>-1&&n.splice(r,1),n.length||delete a[t];for(var o in a)return this;delete this._listeners}return this},emit:function(t){var e=this,n=s.call(arguments,1),i=function(){var i,r=e._listeners;r&&(i=r[t])&&a(i.slice(0),function(t){return t.apply(e,n)})};return n[n.length-1]===l.EMIT_SYNC?(n.pop(),i()):o(i),this}});l.EMIT_SYNC={},e.exports=l},{"./defer":100,"./index":102,"mout/array/forEach":79,"mout/array/indexOf":80}],102:[function(t,e,n){"use strict";var i=t("mout/object/hasOwn"),a=t("mout/object/mixIn"),r=t("mout/lang/createObject"),o=t("mout/lang/kindOf"),s=!0;try{Object.defineProperty({},"~",{}),Object.getOwnPropertyDescriptor({},"~")}catch(t){s=!1}var l=!{valueOf:0}.propertyIsEnumerable("valueOf"),c=["toString","valueOf"],u=/^constructor|inherits|mixin$/,d=function(t){var e=this.prototype;for(var n in t)if(!n.match(u)){if(s){var i=Object.getOwnPropertyDescriptor(t,n);if(i){Object.defineProperty(e,n,i);continue}}e[n]=t[n]}if(l)for(var a=0;n=c[a];a++){var r=t[n];r!==Object.prototype[n]&&(e[n]=r)}return this},h=function(t){"Function"===o(t)&&(t={constructor:t});var e=t.inherits,n=i(t,"constructor")?t.constructor:e?function(){return e.apply(this,arguments)}:function(){};if(e){a(n,e);var s=e.prototype,l=n.prototype=r(s);n.parent=s,l.constructor=n}n.implement||(n.implement=d);var c=t.mixin;if(c){"Array"!==o(c)&&(c=[c]);for(var u=0;u<c.length;u++)n.implement(r(c[u].prototype));
}return n.implement(t)};e.exports=h},{"mout/lang/createObject":82,"mout/lang/kindOf":88,"mout/object/hasOwn":92,"mout/object/mixIn":93}],103:[function(t,e,n){e.exports=function(t,e,n,i,a){var r=function(e){var i=1-e;return 3*i*i*e*t+3*i*e*e*n+e*e*e},o=function(t){var n=1-t;return 3*n*n*t*e+3*n*t*t*i+t*t*t},s=function(e){var i=1-e;return 3*(2*(e-1)*e+i*i)*t+3*(-e*e*e+2*i*e)*n};return function(t){var e,n,i,l,c,u,d=t;for(i=d,u=0;u<8;u++){if(l=r(i)-d,Math.abs(l)<a)return o(i);if(c=s(i),Math.abs(c)<1e-6)break;i-=l/c}if(e=0,n=1,i=d,i<e)return o(e);if(i>n)return o(n);for(;e<n;){if(l=r(i),Math.abs(l-d)<a)return o(i);d>l?e=i:n=i,i=.5*(n-e)+e}return o(i)}}},{}],104:[function(t,e,n){(function(t){!function(t,i){"use strict";"function"==typeof define&&define.amd?define([],function(){return i()}):"object"==typeof n?e.exports=i():t.DeepDiff=i()}(this,function(e){"use strict";function n(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}function i(t,e){Object.defineProperty(this,"kind",{value:t,enumerable:!0}),e&&e.length&&Object.defineProperty(this,"path",{value:e,enumerable:!0})}function a(t,e,n){a.super_.call(this,"E",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0}),Object.defineProperty(this,"rhs",{value:n,enumerable:!0})}function r(t,e){r.super_.call(this,"N",t),Object.defineProperty(this,"rhs",{value:e,enumerable:!0})}function o(t,e){o.super_.call(this,"D",t),Object.defineProperty(this,"lhs",{value:e,enumerable:!0})}function s(t,e,n){s.super_.call(this,"A",t),Object.defineProperty(this,"index",{value:e,enumerable:!0}),Object.defineProperty(this,"item",{value:n,enumerable:!0})}function l(t,e,n){var i=t.slice((n||e)+1||t.length);return t.length=e<0?t.length+e:e,t.push.apply(t,i),t}function c(t){var e=typeof t;return"object"!==e?e:t===Math?"math":null===t?"null":Array.isArray(t)?"array":"[object Date]"===Object.prototype.toString.call(t)?"date":"undefined"!=typeof t.toString&&/^\/.*\//.test(t.toString())?"regexp":"object"}function u(t,n,i,d,h,p,f){h=h||[];var m=h.slice(0);if("undefined"!=typeof p){if(d){if("function"==typeof d&&d(m,p))return;if("object"==typeof d){if(d.prefilter&&d.prefilter(m,p))return;if(d.normalize){var g=d.normalize(m,p,t,n);g&&(t=g[0],n=g[1])}}}m.push(p)}"regexp"===c(t)&&"regexp"===c(n)&&(t=t.toString(),n=n.toString());var v=typeof t,b=typeof n;if("undefined"===v)"undefined"!==b&&i(new r(m,n));else if("undefined"===b)i(new o(m,t));else if(c(t)!==c(n))i(new a(m,t,n));else if("[object Date]"===Object.prototype.toString.call(t)&&"[object Date]"===Object.prototype.toString.call(n)&&t-n!==0)i(new a(m,t,n));else if("object"===v&&null!==t&&null!==n){if(f=f||[],f.indexOf(t)<0){if(f.push(t),Array.isArray(t)){var y;t.length;for(y=0;y<t.length;y++)y>=n.length?i(new s(m,y,new o(e,t[y]))):u(t[y],n[y],i,d,m,y,f);for(;y<n.length;)i(new s(m,y,new r(e,n[y++])))}else{var w=Object.keys(t),x=Object.keys(n);w.forEach(function(a,r){var o=x.indexOf(a);o>=0?(u(t[a],n[a],i,d,m,a,f),x=l(x,o)):u(t[a],e,i,d,m,a,f)}),x.forEach(function(t){u(e,n[t],i,d,m,t,f)})}f.length=f.length-1}}else t!==n&&("number"===v&&isNaN(t)&&isNaN(n)||i(new a(m,t,n)))}function d(t,n,i,a){return a=a||[],u(t,n,function(t){t&&a.push(t)},i),a.length?a:e}function h(t,e,n){if(n.path&&n.path.length){var i,a=t[e],r=n.path.length-1;for(i=0;i<r;i++)a=a[n.path[i]];switch(n.kind){case"A":h(a[n.path[i]],n.index,n.item);break;case"D":delete a[n.path[i]];break;case"E":case"N":a[n.path[i]]=n.rhs}}else switch(n.kind){case"A":h(t[e],n.index,n.item);break;case"D":t=l(t,e);break;case"E":case"N":t[e]=n.rhs}return t}function p(t,e,n){if(t&&e&&n&&n.kind){for(var i=t,a=-1,r=n.path?n.path.length-1:0;++a<r;)"undefined"==typeof i[n.path[a]]&&(i[n.path[a]]="number"==typeof n.path[a]?[]:{}),i=i[n.path[a]];switch(n.kind){case"A":h(n.path?i[n.path[a]]:i,n.index,n.item);break;case"D":delete i[n.path[a]];break;case"E":case"N":i[n.path[a]]=n.rhs}}}function f(t,e,n){if(n.path&&n.path.length){var i,a=t[e],r=n.path.length-1;for(i=0;i<r;i++)a=a[n.path[i]];switch(n.kind){case"A":f(a[n.path[i]],n.index,n.item);break;case"D":a[n.path[i]]=n.lhs;break;case"E":a[n.path[i]]=n.lhs;break;case"N":delete a[n.path[i]]}}else switch(n.kind){case"A":f(t[e],n.index,n.item);break;case"D":t[e]=n.lhs;break;case"E":t[e]=n.lhs;break;case"N":t=l(t,e)}return t}function m(t,e,n){if(t&&e&&n&&n.kind){var i,a,r=t;for(a=n.path.length-1,i=0;i<a;i++)"undefined"==typeof r[n.path[i]]&&(r[n.path[i]]={}),r=r[n.path[i]];switch(n.kind){case"A":f(r[n.path[i]],n.index,n.item);break;case"D":r[n.path[i]]=n.lhs;break;case"E":r[n.path[i]]=n.lhs;break;case"N":delete r[n.path[i]]}}}function g(t,e,n){if(t&&e){var i=function(i){n&&!n(t,e,i)||p(t,e,i)};u(t,e,i)}}var v,b,y=[];return v="object"==typeof t&&t?t:"undefined"!=typeof window?window:{},b=v.DeepDiff,b&&y.push(function(){"undefined"!=typeof b&&v.DeepDiff===d&&(v.DeepDiff=b,b=e)}),n(a,i),n(r,i),n(o,i),n(s,i),Object.defineProperties(d,{diff:{value:d,enumerable:!0},observableDiff:{value:u,enumerable:!0},applyDiff:{value:g,enumerable:!0},applyChange:{value:p,enumerable:!0},revertChange:{value:m,enumerable:!0},isConflict:{value:function(){return"undefined"!=typeof b},enumerable:!0},noConflict:{value:function(){return y&&(y.forEach(function(t){t()}),y=null),d},enumerable:!0}}),d})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],105:[function(t,e,n){(function(){var t,n,i,a,r,o,s,l,c=[].slice,u={}.hasOwnProperty,d=function(t,e){function n(){this.constructor=t}for(var i in e)u.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};s=function(){},n=function(){function t(){}return t.prototype.addEventListener=t.prototype.on,t.prototype.on=function(t,e){return this._callbacks=this._callbacks||{},this._callbacks[t]||(this._callbacks[t]=[]),this._callbacks[t].push(e),this},t.prototype.emit=function(){var t,e,n,i,a,r;if(i=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],this._callbacks=this._callbacks||{},n=this._callbacks[i])for(a=0,r=n.length;a<r;a++)e=n[a],e.apply(this,t);return this},t.prototype.removeListener=t.prototype.off,t.prototype.removeAllListeners=t.prototype.off,t.prototype.removeEventListener=t.prototype.off,t.prototype.off=function(t,e){var n,i,a,r,o;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(i=this._callbacks[t],!i)return this;if(1===arguments.length)return delete this._callbacks[t],this;for(a=r=0,o=i.length;r<o;a=++r)if(n=i[a],n===e){i.splice(a,1);break}return this},t}(),t=function(t){function e(t,n){var a,r,o;if(this.element=t,this.version=e.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(e.instances.push(this),this.element.dropzone=this,a=null!=(o=e.optionsForElement(this.element))?o:{},this.options=i({},this.defaultOptions,a,null!=n?n:{}),this.options.forceFallback||!e.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(r=this.getExistingFallback())&&r.parentNode&&r.parentNode.removeChild(r),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=e.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=e.getElements(this.options.clickable,"clickable")),this.init()}var i,a;return d(e,t),e.prototype.Emitter=n,e.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","addedfiles","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],e.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,hiddenInputContainer:"body",capture:null,renameFilename:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(t,e){return e()},init:function(){return s},forceFallback:!1,fallback:function(){var t,n,i,a,r,o;for(this.element.className=""+this.element.className+" dz-browser-not-supported",o=this.element.getElementsByTagName("div"),a=0,r=o.length;a<r;a++)t=o[a],/(^| )dz-message($| )/.test(t.className)&&(n=t,t.className="dz-message");return n||(n=e.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(n)),i=n.getElementsByTagName("span")[0],i&&(null!=i.textContent?i.textContent=this.options.dictFallbackMessage:null!=i.innerText&&(i.innerText=this.options.dictFallbackMessage)),this.element.appendChild(this.getFallbackForm())},resize:function(t){var e,n,i;return e={srcX:0,srcY:0,srcWidth:t.width,srcHeight:t.height},n=t.width/t.height,e.optWidth=this.options.thumbnailWidth,e.optHeight=this.options.thumbnailHeight,null==e.optWidth&&null==e.optHeight?(e.optWidth=e.srcWidth,e.optHeight=e.srcHeight):null==e.optWidth?e.optWidth=n*e.optHeight:null==e.optHeight&&(e.optHeight=1/n*e.optWidth),i=e.optWidth/e.optHeight,t.height<e.optHeight||t.width<e.optWidth?(e.trgHeight=e.srcHeight,e.trgWidth=e.srcWidth):n>i?(e.srcHeight=t.height,e.srcWidth=e.srcHeight*i):(e.srcWidth=t.width,e.srcHeight=e.srcWidth/i),e.srcX=(t.width-e.srcWidth)/2,e.srcY=(t.height-e.srcHeight)/2,e},drop:function(t){return this.element.classList.remove("dz-drag-hover")},dragstart:s,dragend:function(t){return this.element.classList.remove("dz-drag-hover")},dragenter:function(t){return this.element.classList.add("dz-drag-hover")},dragover:function(t){return this.element.classList.add("dz-drag-hover")},dragleave:function(t){return this.element.classList.remove("dz-drag-hover")},paste:s,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(t){var n,i,a,r,o,s,l,c,u,d,h,p,f;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(t.previewElement=e.createElement(this.options.previewTemplate.trim()),t.previewTemplate=t.previewElement,this.previewsContainer.appendChild(t.previewElement),d=t.previewElement.querySelectorAll("[data-dz-name]"),r=0,l=d.length;r<l;r++)n=d[r],n.textContent=this._renameFilename(t.name);for(h=t.previewElement.querySelectorAll("[data-dz-size]"),o=0,c=h.length;o<c;o++)n=h[o],n.innerHTML=this.filesize(t.size);for(this.options.addRemoveLinks&&(t._removeLink=e.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),t.previewElement.appendChild(t._removeLink)),i=function(n){return function(i){return i.preventDefault(),i.stopPropagation(),t.status===e.UPLOADING?e.confirm(n.options.dictCancelUploadConfirmation,function(){return n.removeFile(t)}):n.options.dictRemoveFileConfirmation?e.confirm(n.options.dictRemoveFileConfirmation,function(){return n.removeFile(t)}):n.removeFile(t)}}(this),p=t.previewElement.querySelectorAll("[data-dz-remove]"),f=[],s=0,u=p.length;s<u;s++)a=p[s],f.push(a.addEventListener("click",i));return f}},removedfile:function(t){var e;return t.previewElement&&null!=(e=t.previewElement)&&e.parentNode.removeChild(t.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(t,e){var n,i,a,r;if(t.previewElement){for(t.previewElement.classList.remove("dz-file-preview"),r=t.previewElement.querySelectorAll("[data-dz-thumbnail]"),i=0,a=r.length;i<a;i++)n=r[i],n.alt=t.name,n.src=e;return setTimeout(function(e){return function(){return t.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(t,e){var n,i,a,r,o;if(t.previewElement){for(t.previewElement.classList.add("dz-error"),"String"!=typeof e&&e.error&&(e=e.error),r=t.previewElement.querySelectorAll("[data-dz-errormessage]"),o=[],i=0,a=r.length;i<a;i++)n=r[i],o.push(n.textContent=e);return o}},errormultiple:s,processing:function(t){if(t.previewElement&&(t.previewElement.classList.add("dz-processing"),t._removeLink))return t._removeLink.textContent=this.options.dictCancelUpload},processingmultiple:s,uploadprogress:function(t,e,n){var i,a,r,o,s;if(t.previewElement){for(o=t.previewElement.querySelectorAll("[data-dz-uploadprogress]"),s=[],a=0,r=o.length;a<r;a++)i=o[a],"PROGRESS"===i.nodeName?s.push(i.value=e):s.push(i.style.width=""+e+"%");return s}},totaluploadprogress:s,sending:s,sendingmultiple:s,success:function(t){if(t.previewElement)return t.previewElement.classList.add("dz-success")},successmultiple:s,canceled:function(t){return this.emit("error",t,"Upload canceled.")},canceledmultiple:s,complete:function(t){if(t._removeLink&&(t._removeLink.textContent=this.options.dictRemoveFile),t.previewElement)return t.previewElement.classList.add("dz-complete")},completemultiple:s,maxfilesexceeded:s,maxfilesreached:s,queuecomplete:s,addedfiles:s,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},i=function(){var t,e,n,i,a,r,o;for(i=arguments[0],n=2<=arguments.length?c.call(arguments,1):[],r=0,o=n.length;r<o;r++){e=n[r];for(t in e)a=e[t],i[t]=a}return i},e.prototype.getAcceptedFiles=function(){var t,e,n,i,a;for(i=this.files,a=[],e=0,n=i.length;e<n;e++)t=i[e],t.accepted&&a.push(t);return a},e.prototype.getRejectedFiles=function(){var t,e,n,i,a;for(i=this.files,a=[],e=0,n=i.length;e<n;e++)t=i[e],t.accepted||a.push(t);return a},e.prototype.getFilesWithStatus=function(t){var e,n,i,a,r;for(a=this.files,r=[],n=0,i=a.length;n<i;n++)e=a[n],e.status===t&&r.push(e);return r},e.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(e.QUEUED)},e.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(e.UPLOADING)},e.prototype.getAddedFiles=function(){return this.getFilesWithStatus(e.ADDED)},e.prototype.getActiveFiles=function(){var t,n,i,a,r;for(a=this.files,r=[],n=0,i=a.length;n<i;n++)t=a[n],t.status!==e.UPLOADING&&t.status!==e.QUEUED||r.push(t);return r},e.prototype.init=function(){var t,n,i,a,r,o,s;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(e.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(i=function(t){return function(){return t.hiddenFileInput&&t.hiddenFileInput.parentNode.removeChild(t.hiddenFileInput),t.hiddenFileInput=document.createElement("input"),t.hiddenFileInput.setAttribute("type","file"),(null==t.options.maxFiles||t.options.maxFiles>1)&&t.hiddenFileInput.setAttribute("multiple","multiple"),t.hiddenFileInput.className="dz-hidden-input",null!=t.options.acceptedFiles&&t.hiddenFileInput.setAttribute("accept",t.options.acceptedFiles),null!=t.options.capture&&t.hiddenFileInput.setAttribute("capture",t.options.capture),t.hiddenFileInput.style.visibility="hidden",t.hiddenFileInput.style.position="absolute",t.hiddenFileInput.style.top="0",t.hiddenFileInput.style.left="0",t.hiddenFileInput.style.height="0",t.hiddenFileInput.style.width="0",document.querySelector(t.options.hiddenInputContainer).appendChild(t.hiddenFileInput),t.hiddenFileInput.addEventListener("change",function(){var e,n,a,r;if(n=t.hiddenFileInput.files,n.length)for(a=0,r=n.length;a<r;a++)e=n[a],t.addFile(e);return t.emit("addedfiles",n),i()})}}(this))(),this.URL=null!=(o=window.URL)?o:window.webkitURL,s=this.events,a=0,r=s.length;a<r;a++)t=s[a],this.on(t,this.options[t]);return this.on("uploadprogress",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(t){return function(){return t.updateTotalUploadProgress()}}(this)),this.on("canceled",function(t){return function(e){return t.emit("complete",e)}}(this)),this.on("complete",function(t){return function(e){if(0===t.getAddedFiles().length&&0===t.getUploadingFiles().length&&0===t.getQueuedFiles().length)return setTimeout(function(){return t.emit("queuecomplete")},0)}}(this)),n=function(t){return t.stopPropagation(),t.preventDefault?t.preventDefault():t.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(t){return function(e){return t.emit("dragstart",e)}}(this),dragenter:function(t){return function(e){return n(e),t.emit("dragenter",e)}}(this),dragover:function(t){return function(e){var i;try{i=e.dataTransfer.effectAllowed}catch(t){}return e.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy",n(e),t.emit("dragover",e)}}(this),dragleave:function(t){return function(e){return t.emit("dragleave",e)}}(this),drop:function(t){return function(e){return n(e),t.drop(e)}}(this),dragend:function(t){return function(e){return t.emit("dragend",e)}}(this)}}],this.clickableElements.forEach(function(t){return function(n){return t.listeners.push({element:n,events:{click:function(i){return(n!==t.element||i.target===t.element||e.elementInside(i.target,t.element.querySelector(".dz-message")))&&t.hiddenFileInput.click(),!0}}})}}(this)),this.enable(),this.options.init.call(this)},e.prototype.destroy=function(){var t;return this.disable(),this.removeAllFiles(!0),(null!=(t=this.hiddenFileInput)?t.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,e.instances.splice(e.instances.indexOf(this),1)},e.prototype.updateTotalUploadProgress=function(){var t,e,n,i,a,r,o,s;if(i=0,n=0,t=this.getActiveFiles(),t.length){for(s=this.getActiveFiles(),r=0,o=s.length;r<o;r++)e=s[r],i+=e.upload.bytesSent,n+=e.upload.total;a=100*i/n}else a=100;return this.emit("totaluploadprogress",a,n,i)},e.prototype._getParamName=function(t){return"function"==typeof this.options.paramName?this.options.paramName(t):""+this.options.paramName+(this.options.uploadMultiple?"["+t+"]":"")},e.prototype._renameFilename=function(t){return"function"!=typeof this.options.renameFilename?t:this.options.renameFilename(t)},e.prototype.getFallbackForm=function(){var t,n,i,a;return(t=this.getExistingFallback())?t:(i='<div class="dz-fallback">',this.options.dictFallbackText&&(i+="<p>"+this.options.dictFallbackText+"</p>"),i+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',n=e.createElement(i),"FORM"!==this.element.tagName?(a=e.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),a.appendChild(n)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=a?a:n)},e.prototype.getExistingFallback=function(){var t,e,n,i,a,r;for(e=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)if(e=t[n],/(^| )fallback($| )/.test(e.className))return e},r=["div","form"],i=0,a=r.length;i<a;i++)if(n=r[i],t=e(this.element.getElementsByTagName(n)))return t},e.prototype.setupEventListeners=function(){var t,e,n,i,a,r,o;for(r=this.listeners,o=[],i=0,a=r.length;i<a;i++)t=r[i],o.push(function(){var i,a;i=t.events,a=[];for(e in i)n=i[e],a.push(t.element.addEventListener(e,n,!1));return a}());return o},e.prototype.removeEventListeners=function(){var t,e,n,i,a,r,o;for(r=this.listeners,o=[],i=0,a=r.length;i<a;i++)t=r[i],o.push(function(){var i,a;i=t.events,a=[];for(e in i)n=i[e],a.push(t.element.removeEventListener(e,n,!1));return a}());return o},e.prototype.disable=function(){var t,e,n,i,a;for(this.clickableElements.forEach(function(t){return t.classList.remove("dz-clickable")}),this.removeEventListeners(),i=this.files,a=[],e=0,n=i.length;e<n;e++)t=i[e],a.push(this.cancelUpload(t));return a},e.prototype.enable=function(){return this.clickableElements.forEach(function(t){return t.classList.add("dz-clickable")}),this.setupEventListeners()},e.prototype.filesize=function(t){var e,n,i,a,r,o,s,l;if(i=0,a="b",t>0){for(o=["TB","GB","MB","KB","b"],n=s=0,l=o.length;s<l;n=++s)if(r=o[n],e=Math.pow(this.options.filesizeBase,4-n)/10,t>=e){i=t/Math.pow(this.options.filesizeBase,4-n),a=r;break}i=Math.round(10*i)/10}return"<strong>"+i+"</strong> "+a},e.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},e.prototype.drop=function(t){var e,n;t.dataTransfer&&(this.emit("drop",t),e=t.dataTransfer.files,this.emit("addedfiles",e),e.length&&(n=t.dataTransfer.items,n&&n.length&&null!=n[0].webkitGetAsEntry?this._addFilesFromItems(n):this.handleFiles(e)))},e.prototype.paste=function(t){var e,n;if(null!=(null!=t&&null!=(n=t.clipboardData)?n.items:void 0))return this.emit("paste",t),e=t.clipboardData.items,e.length?this._addFilesFromItems(e):void 0},e.prototype.handleFiles=function(t){var e,n,i,a;for(a=[],n=0,i=t.length;n<i;n++)e=t[n],a.push(this.addFile(e));return a},e.prototype._addFilesFromItems=function(t){var e,n,i,a,r;for(r=[],i=0,a=t.length;i<a;i++)n=t[i],null!=n.webkitGetAsEntry&&(e=n.webkitGetAsEntry())?e.isFile?r.push(this.addFile(n.getAsFile())):e.isDirectory?r.push(this._addFilesFromDirectory(e,e.name)):r.push(void 0):null!=n.getAsFile&&(null==n.kind||"file"===n.kind)?r.push(this.addFile(n.getAsFile())):r.push(void 0);return r},e.prototype._addFilesFromDirectory=function(t,e){var n,i,a;return n=t.createReader(),i=function(t){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(t):void 0},(a=function(t){return function(){return n.readEntries(function(n){var i,r,o;if(n.length>0){for(r=0,o=n.length;r<o;r++)i=n[r],i.isFile?i.file(function(n){if(!t.options.ignoreHiddenFiles||"."!==n.name.substring(0,1))return n.fullPath=""+e+"/"+n.name,t.addFile(n)}):i.isDirectory&&t._addFilesFromDirectory(i,""+e+"/"+i.name);a()}return null},i)}}(this))()},e.prototype.accept=function(t,n){return t.size>1024*this.options.maxFilesize*1024?n(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(t.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):e.isValidFile(t,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(n(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",t)):this.options.accept.call(this,t,n):n(this.options.dictInvalidFileType)},e.prototype.addFile=function(t){return t.upload={progress:0,total:t.size,bytesSent:0},this.files.push(t),t.status=e.ADDED,this.emit("addedfile",t),this._enqueueThumbnail(t),this.accept(t,function(e){return function(n){return n?(t.accepted=!1,e._errorProcessing([t],n)):(t.accepted=!0,e.options.autoQueue&&e.enqueueFile(t)),e._updateMaxFilesReachedClass()}}(this))},e.prototype.enqueueFiles=function(t){var e,n,i;for(n=0,i=t.length;n<i;n++)e=t[n],this.enqueueFile(e);return null},e.prototype.enqueueFile=function(t){if(t.status!==e.ADDED||t.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");if(t.status=e.QUEUED,this.options.autoProcessQueue)return setTimeout(function(t){return function(){return t.processQueue()}}(this),0)},e.prototype._thumbnailQueue=[],e.prototype._processingThumbnail=!1,e.prototype._enqueueThumbnail=function(t){if(this.options.createImageThumbnails&&t.type.match(/image.*/)&&t.size<=1024*this.options.maxThumbnailFilesize*1024)return this._thumbnailQueue.push(t),setTimeout(function(t){return function(){return t._processThumbnailQueue()}}(this),0)},e.prototype._processThumbnailQueue=function(){if(!this._processingThumbnail&&0!==this._thumbnailQueue.length)return this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(t){return function(){return t._processingThumbnail=!1,t._processThumbnailQueue()}}(this))},e.prototype.removeFile=function(t){if(t.status===e.UPLOADING&&this.cancelUpload(t),this.files=l(this.files,t),this.emit("removedfile",t),0===this.files.length)return this.emit("reset")},e.prototype.removeAllFiles=function(t){var n,i,a,r;for(null==t&&(t=!1),r=this.files.slice(),i=0,a=r.length;i<a;i++)n=r[i],(n.status!==e.UPLOADING||t)&&this.removeFile(n);return null},e.prototype.createThumbnail=function(t,e){var n;return n=new FileReader,n.onload=function(i){return function(){return"image/svg+xml"===t.type?(i.emit("thumbnail",t,n.result),void(null!=e&&e())):i.createThumbnailFromUrl(t,n.result,e)}}(this),n.readAsDataURL(t)},e.prototype.createThumbnailFromUrl=function(t,e,n,i){var a;return a=document.createElement("img"),i&&(a.crossOrigin=i),a.onload=function(e){return function(){var i,r,s,l,c,u,d,h;if(t.width=a.width,t.height=a.height,s=e.options.resize.call(e,t),null==s.trgWidth&&(s.trgWidth=s.optWidth),null==s.trgHeight&&(s.trgHeight=s.optHeight),i=document.createElement("canvas"),r=i.getContext("2d"),i.width=s.trgWidth,i.height=s.trgHeight,o(r,a,null!=(c=s.srcX)?c:0,null!=(u=s.srcY)?u:0,s.srcWidth,s.srcHeight,null!=(d=s.trgX)?d:0,null!=(h=s.trgY)?h:0,s.trgWidth,s.trgHeight),l=i.toDataURL("image/png"),e.emit("thumbnail",t,l),null!=n)return n()}}(this),null!=n&&(a.onerror=n),a.src=e},e.prototype.processQueue=function(){var t,e,n,i;if(e=this.options.parallelUploads,n=this.getUploadingFiles().length,t=n,!(n>=e)&&(i=this.getQueuedFiles(),i.length>0)){if(this.options.uploadMultiple)return this.processFiles(i.slice(0,e-n));for(;t<e;){if(!i.length)return;this.processFile(i.shift()),t++}}},e.prototype.processFile=function(t){return this.processFiles([t])},e.prototype.processFiles=function(t){var n,i,a;for(i=0,a=t.length;i<a;i++)n=t[i],n.processing=!0,n.status=e.UPLOADING,this.emit("processing",n);return this.options.uploadMultiple&&this.emit("processingmultiple",t),this.uploadFiles(t)},e.prototype._getFilesWithXhr=function(t){var e,n;return n=function(){var n,i,a,r;for(a=this.files,r=[],n=0,i=a.length;n<i;n++)e=a[n],e.xhr===t&&r.push(e);return r}.call(this)},e.prototype.cancelUpload=function(t){var n,i,a,r,o,s,l;if(t.status===e.UPLOADING){for(i=this._getFilesWithXhr(t.xhr),a=0,o=i.length;a<o;a++)n=i[a],n.status=e.CANCELED;for(t.xhr.abort(),r=0,s=i.length;r<s;r++)n=i[r],this.emit("canceled",n);this.options.uploadMultiple&&this.emit("canceledmultiple",i)}else(l=t.status)!==e.ADDED&&l!==e.QUEUED||(t.status=e.CANCELED,this.emit("canceled",t),this.options.uploadMultiple&&this.emit("canceledmultiple",[t]));if(this.options.autoProcessQueue)return this.processQueue()},a=function(){var t,e;return e=arguments[0],t=2<=arguments.length?c.call(arguments,1):[],"function"==typeof e?e.apply(this,t):e},e.prototype.uploadFile=function(t){return this.uploadFiles([t])},e.prototype.uploadFiles=function(t){var n,r,o,s,l,c,u,d,h,p,f,m,g,v,b,y,w,x,k,S,C,T,E,O,I,_,A,N,j,D,F,z,R,L;for(k=new XMLHttpRequest,S=0,O=t.length;S<O;S++)n=t[S],n.xhr=k;m=a(this.options.method,t),w=a(this.options.url,t),k.open(m,w,!0),k.withCredentials=!!this.options.withCredentials,b=null,o=function(e){return function(){var i,a,r;for(r=[],i=0,a=t.length;i<a;i++)n=t[i],r.push(e._errorProcessing(t,b||e.options.dictResponseError.replace("{{statusCode}}",k.status),k));
return r}}(this),y=function(e){return function(i){var a,r,o,s,l,c,u,d,h;if(null!=i)for(r=100*i.loaded/i.total,o=0,c=t.length;o<c;o++)n=t[o],n.upload={progress:r,total:i.total,bytesSent:i.loaded};else{for(a=!0,r=100,s=0,u=t.length;s<u;s++)n=t[s],100===n.upload.progress&&n.upload.bytesSent===n.upload.total||(a=!1),n.upload.progress=r,n.upload.bytesSent=n.upload.total;if(a)return}for(h=[],l=0,d=t.length;l<d;l++)n=t[l],h.push(e.emit("uploadprogress",n,r,n.upload.bytesSent));return h}}(this),k.onload=function(n){return function(i){var a;if(t[0].status!==e.CANCELED&&4===k.readyState){if(b=k.responseText,k.getResponseHeader("content-type")&&~k.getResponseHeader("content-type").indexOf("application/json"))try{b=JSON.parse(b)}catch(t){i=t,b="Invalid JSON response from server."}return y(),200<=(a=k.status)&&a<300?n._finished(t,b,i):o()}}}(this),k.onerror=function(n){return function(){if(t[0].status!==e.CANCELED)return o()}}(this),v=null!=(j=k.upload)?j:k,v.onprogress=y,c={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&i(c,this.options.headers);for(s in c)l=c[s],l&&k.setRequestHeader(s,l);if(r=new FormData,this.options.params){D=this.options.params;for(f in D)x=D[f],r.append(f,x)}for(C=0,I=t.length;C<I;C++)n=t[C],this.emit("sending",n,k,r);if(this.options.uploadMultiple&&this.emit("sendingmultiple",t,k,r),"FORM"===this.element.tagName)for(F=this.element.querySelectorAll("input, textarea, select, button"),T=0,_=F.length;T<_;T++)if(d=F[T],h=d.getAttribute("name"),p=d.getAttribute("type"),"SELECT"===d.tagName&&d.hasAttribute("multiple"))for(z=d.options,E=0,A=z.length;E<A;E++)g=z[E],g.selected&&r.append(h,g.value);else(!p||"checkbox"!==(R=p.toLowerCase())&&"radio"!==R||d.checked)&&r.append(h,d.value);for(u=N=0,L=t.length-1;0<=L?N<=L:N>=L;u=0<=L?++N:--N)r.append(this._getParamName(u),t[u],this._renameFilename(t[u].name));return this.submitRequest(k,r,t)},e.prototype.submitRequest=function(t,e,n){return t.send(e)},e.prototype._finished=function(t,n,i){var a,r,o;for(r=0,o=t.length;r<o;r++)a=t[r],a.status=e.SUCCESS,this.emit("success",a,n,i),this.emit("complete",a);if(this.options.uploadMultiple&&(this.emit("successmultiple",t,n,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},e.prototype._errorProcessing=function(t,n,i){var a,r,o;for(r=0,o=t.length;r<o;r++)a=t[r],a.status=e.ERROR,this.emit("error",a,n,i),this.emit("complete",a);if(this.options.uploadMultiple&&(this.emit("errormultiple",t,n,i),this.emit("completemultiple",t)),this.options.autoProcessQueue)return this.processQueue()},e}(n),t.version="4.3.0",t.options={},t.optionsForElement=function(e){return e.getAttribute("id")?t.options[i(e.getAttribute("id"))]:void 0},t.instances=[],t.forElement=function(t){if("string"==typeof t&&(t=document.querySelector(t)),null==(null!=t?t.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return t.dropzone},t.autoDiscover=!0,t.discover=function(){var e,n,i,a,r,o;for(document.querySelectorAll?i=document.querySelectorAll(".dropzone"):(i=[],e=function(t){var e,n,a,r;for(r=[],n=0,a=t.length;n<a;n++)e=t[n],/(^| )dropzone($| )/.test(e.className)?r.push(i.push(e)):r.push(void 0);return r},e(document.getElementsByTagName("div")),e(document.getElementsByTagName("form"))),o=[],a=0,r=i.length;a<r;a++)n=i[a],t.optionsForElement(n)!==!1?o.push(new t(n)):o.push(void 0);return o},t.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],t.isBrowserSupported=function(){var e,n,i,a,r;if(e=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(r=t.blacklistedBrowsers,i=0,a=r.length;i<a;i++)n=r[i],n.test(navigator.userAgent)&&(e=!1);else e=!1;else e=!1;return e},l=function(t,e){var n,i,a,r;for(r=[],i=0,a=t.length;i<a;i++)n=t[i],n!==e&&r.push(n);return r},i=function(t){return t.replace(/[\-_](\w)/g,function(t){return t.charAt(1).toUpperCase()})},t.createElement=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,e.childNodes[0]},t.elementInside=function(t,e){if(t===e)return!0;for(;t=t.parentNode;)if(t===e)return!0;return!1},t.getElement=function(t,e){var n;if("string"==typeof t?n=document.querySelector(t):null!=t.nodeType&&(n=t),null==n)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector or a plain HTML element.");return n},t.getElements=function(t,e){var n,i,a,r,o,s,l,c;if(t instanceof Array){a=[];try{for(r=0,s=t.length;r<s;r++)i=t[r],a.push(this.getElement(i,e))}catch(t){n=t,a=null}}else if("string"==typeof t)for(a=[],c=document.querySelectorAll(t),o=0,l=c.length;o<l;o++)i=c[o],a.push(i);else null!=t.nodeType&&(a=[t]);if(null==a||!a.length)throw new Error("Invalid `"+e+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return a},t.confirm=function(t,e,n){return window.confirm(t)?e():null!=n?n():void 0},t.isValidFile=function(t,e){var n,i,a,r,o;if(!e)return!0;for(e=e.split(","),i=t.type,n=i.replace(/\/.*$/,""),r=0,o=e.length;r<o;r++)if(a=e[r],a=a.trim(),"."===a.charAt(0)){if(t.name.toLowerCase().indexOf(a.toLowerCase(),t.name.length-a.length)!==-1)return!0}else if(/\/\*$/.test(a)){if(n===a.replace(/\/.*$/,""))return!0}else if(i===a)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(e){return this.each(function(){return new t(this,e)})}),"undefined"!=typeof e&&null!==e?e.exports=t:window.Dropzone=t,t.ADDED="added",t.QUEUED="queued",t.ACCEPTED=t.QUEUED,t.UPLOADING="uploading",t.PROCESSING=t.UPLOADING,t.CANCELED="canceled",t.ERROR="error",t.SUCCESS="success",r=function(t){var e,n,i,a,r,o,s,l,c,u;for(s=t.naturalWidth,o=t.naturalHeight,n=document.createElement("canvas"),n.width=1,n.height=o,i=n.getContext("2d"),i.drawImage(t,0,0),a=i.getImageData(0,0,1,o).data,u=0,r=o,l=o;l>u;)e=a[4*(l-1)+3],0===e?r=l:u=l,l=r+u>>1;return c=l/o,0===c?1:c},o=function(t,e,n,i,a,o,s,l,c,u){var d;return d=r(e),t.drawImage(e,n,i,a,o,s,l,c,u/d)},a=function(t,e){var n,i,a,r,o,s,l,c,u;if(a=!1,u=!0,i=t.document,c=i.documentElement,n=i.addEventListener?"addEventListener":"attachEvent",l=i.addEventListener?"removeEventListener":"detachEvent",s=i.addEventListener?"":"on",r=function(n){if("readystatechange"!==n.type||"complete"===i.readyState)return("load"===n.type?t:i)[l](s+n.type,r,!1),!a&&(a=!0)?e.call(t,n.type||n):void 0},o=function(){var t;try{c.doScroll("left")}catch(e){return t=e,void setTimeout(o,50)}return r("poll")},"complete"!==i.readyState){if(i.createEventObject&&c.doScroll){try{u=!t.frameElement}catch(t){}u&&o()}return i[n](s+"DOMContentLoaded",r,!1),i[n](s+"readystatechange",r,!1),t[n](s+"load",r,!1)}},t._autoDiscoverFunction=function(){if(t.autoDiscover)return t.discover()},a(window,t._autoDiscoverFunction)}).call(this)},{}],106:[function(t,e,n){"use strict";var i=t("./base"),a=t("mout/string/trim"),r=t("mout/array/forEach"),o=t("mout/array/filter"),s=t("mout/array/indexOf");i.implement({setAttribute:function(t,e){return this.forEach(function(n){n.setAttribute(t,e)})},getAttribute:function(t){var e=this[0].getAttributeNode(t);return e&&e.specified?e.value:null},hasAttribute:function(t){var e=this[0];if(e.hasAttribute)return e.hasAttribute(t);var n=e.getAttributeNode(t);return!(!n||!n.specified)},removeAttribute:function(t){return this.forEach(function(e){var n=e.getAttributeNode(t);n&&e.removeAttributeNode(n)})}});var l={};r(["type","value","name","href","title","id"],function(t){l[t]=function(e){return void 0!==e?this.forEach(function(n){n[t]=e}):this[0][t]}}),r(["checked","disabled","selected"],function(t){l[t]=function(e){return void 0!==e?this.forEach(function(n){n[t]=!!e}):!!this[0][t]}});var c=function(t){var e=a(t).replace(/\s+/g," ").split(" "),n={};return o(e,function(t){if(""!==t&&!n[t])return n[t]=t}).sort()};l.className=function(t){return void 0!==t?this.forEach(function(e){e.className=c(t).join(" ")}):c(this[0].className).join(" ")},i.implement({attribute:function(t,e){var n=l[t];return n?n.call(this,e):null!=e?this.setAttribute(t,e):null===e?this.removeAttribute(t):void 0===e?this.getAttribute(t):void 0}}),i.implement(l),i.implement({check:function(){return this.checked(!0)},uncheck:function(){return this.checked(!1)},disable:function(){return this.disabled(!0)},enable:function(){return this.disabled(!1)},select:function(){return this.selected(!0)},deselect:function(){return this.selected(!1)}}),i.implement({classNames:function(){return c(this[0].className)},hasClass:function(t){return s(this.classNames(),t)>-1},addClass:function(t){return this.forEach(function(e){var n=e.className,i=c(n+" "+t).join(" ");n!==i&&(e.className=i)})},removeClass:function(t){return this.forEach(function(e){var n=c(e.className);r(c(t),function(t){var e=s(n,t);e>-1&&n.splice(e,1)}),e.className=n.join(" ")})},toggleClass:function(t,e){var n=void 0!==e?e:!this.hasClass(t);return n?this.addClass(t):this.removeClass(t),!!n}}),i.prototype.toString=function(){var t=this.tag(),e=this.id(),n=this.classNames(),i=t;return e&&(i+="#"+e),n.length&&(i+="."+n.join(".")),i};var u=null==document.createElement("div").textContent?"innerText":"textContent";i.implement({tag:function(){return this[0].tagName.toLowerCase()},html:function(t){return void 0!==t?this.forEach(function(e){e.innerHTML=t}):this[0].innerHTML},text:function(t){return void 0!==t?this.forEach(function(e){e[u]=t}):this[0][u]},data:function(t,e){switch(e){case void 0:return this.getAttribute("data-"+t);case null:return this.removeAttribute("data-"+t);default:return this.setAttribute("data-"+t,e)}}}),e.exports=i},{"./base":107,"mout/array/filter":114,"mout/array/forEach":115,"mout/array/indexOf":116,"mout/string/trim":133}],107:[function(t,e,n){"use strict";var i=t("prime"),a=t("mout/array/forEach"),r=t("mout/array/map"),o=t("mout/array/filter"),s=t("mout/array/every"),l=t("mout/array/some"),c=0,u=document.__counter,d=document.__counter=(u?parseInt(u,36)+1:0).toString(36),h="uid:"+d,p=function(t){return t===window?"window":t===document?"document":t===document.documentElement?"html":t[h]||(t[h]=(c++).toString(36))},f={},m=i({constructor:function t(e,n){if(null==e)return this&&this.constructor===t?new g:null;var i,a;if(e.constructor!==g){if(i=new g,"string"==typeof e)return i.search?(i[i.length++]=n||document,i.search(e)):null;if(e.nodeType||e===window)i[i.length++]=e;else if(e.length)for(var r={},o=0,s=e.length;o<s;o++){var l=t(e[o],n);if(l&&l.length)for(var c=0,u=l.length;c<u;c++){var d=l[c];a=p(d),r[a]||(i[i.length++]=d,r[a]=!0)}}}else i=e;return i.length?1===i.length?(a=p(i[0]),f[a]||(f[a]=i)):i:null}}),g=i({inherits:m,constructor:function(){this.length=0},unlink:function(){return this.map(function(t){return delete f[p(t)],t})},forEach:function(t,e){return a(this,t,e),this},map:function(t,e){return r(this,t,e)},filter:function(t,e){return o(this,t,e)},every:function(t,e){return s(this,t,e)},some:function(t,e){return l(this,t,e)}});e.exports=m},{"mout/array/every":113,"mout/array/filter":114,"mout/array/forEach":115,"mout/array/map":117,"mout/array/some":118,prime:299}],108:[function(t,e,n){"use strict";var i=t("prime/map"),a=t("./events");t("./traversal"),a.implement({delegate:function(t,e,n,r){return this.forEach(function(o){var s=a(o),l=s._delegation||(s._delegation={}),c=l[t]||(l[t]={}),u=c[e]||(c[e]=new i);if(!u.get(n)){var d=function(t){var i,r=a(t.target||t.srcElement),o=r.matches(e)?r:r.parent(e);return o&&(i=n.call(s,t,o)),i};u.set(n,d),s.on(t,d,r)}})},undelegate:function(t,e,n,i){return this.forEach(function(r){var o,s,l,c=a(r);if((o=c._delegation)&&(s=o[t])&&(l=s[e])){var u=l.get(n);if(u){c.off(t,u,i),l.remove(u),l.count()||delete s[e];var d,h=!0,p=!0;for(d in s){h=!1;break}h&&delete o[t];for(d in o){p=!1;break}p&&delete c._delegation}}})}}),e.exports=a},{"./events":110,"./traversal":134,"prime/map":300}],109:[function(t,e,n){"use strict";var i=t("./events"),a="onreadystatechange"in document,r=!1,o=!1,s=[],l=[],c=null,u=null,d=document.createElement("div"),h=i(document),p=i(window),f=function(){if(u&&(u=clearTimeout(u)),!o){a&&h.off("readystatechange",m),h.off("DOMContentLoaded",f),p.off("load",f),o=!0;for(var t=0;c=s[t++];)c()}return o},m=function(){for(var t=l.length;t--;)if(l[t]())return f();return!1},g=function(){clearTimeout(u),m()||(u=setTimeout(g,1e3/60))};if(document.readyState){var v=function(){return!!/loaded|complete/.test(document.readyState)};l.push(v),v()?f():a?h.on("readystatechange",m):r=!0}if(d.doScroll){var b=function(){try{return d.doScroll(),!0}catch(t){}return!1};b()||(l.push(b),r=!0)}r&&g(),h.on("DOMContentLoaded",f),p.on("load",f),e.exports=function(t){return o?t():s.push(t),null}},{"./events":110}],110:[function(t,e,n){"use strict";var i=t("prime/emitter"),a=t("./base"),r=document.documentElement,o=r.addEventListener?function(t,e,n,i){return t.addEventListener(e,n,i||!1),n}:function(t,e,n){return t.attachEvent("on"+e,n),n},s=r.removeEventListener?function(t,e,n,i){t.removeEventListener(e,n,i||!1)}:function(t,e,n){t.detachEvent("on"+e,n)};a.implement({on:function(t,e,n){return this.forEach(function(r){var s=a(r),l=t+(n?":capture":"");i.prototype.on.call(s,l,e);var c=s._domListeners||(s._domListeners={});c[l]||(c[l]=o(r,t,function(t){i.prototype.emit.call(s,l,t||window.event,i.EMIT_SYNC)},n))})},off:function(t,e,n){return this.forEach(function(r){var o,l,c=a(r),u=t+(n?":capture":""),d=c._domListeners,h=c._listeners;if(d&&(o=d[u])&&h&&(l=h[u])&&(i.prototype.off.call(c,u,e),!c._listeners||!c._listeners[t])){s(r,t,o),delete d[t];for(var p in d)return;delete c._domListeners}})},emit:function(){var t=arguments;return this.forEach(function(e){i.prototype.emit.apply(a(e),t)})}}),e.exports=a},{"./base":107,"prime/emitter":298}],111:[function(t,e,n){"use strict";var i=t("./base");t("./attributes"),t("./events"),t("./insertion"),t("./traversal"),t("./delegation"),e.exports=i},{"./attributes":106,"./base":107,"./delegation":108,"./events":110,"./insertion":112,"./traversal":134}],112:[function(t,e,n){"use strict";var i=t("./base");i.implement({appendChild:function(t){return this[0].appendChild(i(t)[0]),this},insertBefore:function(t,e){return this[0].insertBefore(i(t)[0],i(e)[0]),this},removeChild:function(t){return this[0].removeChild(i(t)[0]),this},replaceChild:function(t,e){return this[0].replaceChild(i(t)[0],i(e)[0]),this}}),i.implement({before:function(t){t=i(t)[0];var e=t.parentNode;return e&&this.forEach(function(n){e.insertBefore(n,t)}),this},after:function(t){t=i(t)[0];var e=t.parentNode;return e&&this.forEach(function(n){e.insertBefore(n,t.nextSibling)}),this},bottom:function(t){return t=i(t)[0],this.forEach(function(e){t.appendChild(e)})},top:function(t){return t=i(t)[0],this.forEach(function(e){t.insertBefore(e,t.firstChild)})}}),i.implement({insert:i.prototype.bottom,remove:function(){return this.forEach(function(t){var e=t.parentNode;e&&e.removeChild(t)})},replace:function(t){return t=i(t)[0],t.parentNode.replaceChild(this[0],t),this}}),e.exports=i},{"./base":107}],113:[function(t,e,n){function i(t,e,n){e=a(e,n);var i=!0;if(null==t)return i;for(var r=-1,o=t.length;++r<o;)if(!e(t[r],r,t)){i=!1;break}return i}var a=t("../function/makeIterator_");e.exports=i},{"../function/makeIterator_":120}],114:[function(t,e,n){function i(t,e,n){e=a(e,n);var i=[];if(null==t)return i;for(var r,o=-1,s=t.length;++o<s;)r=t[o],e(r,o,t)&&i.push(r);return i}var a=t("../function/makeIterator_");e.exports=i},{"../function/makeIterator_":120}],115:[function(t,e,n){arguments[4][79][0].apply(n,arguments)},{dup:79}],116:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],117:[function(t,e,n){function i(t,e,n){e=a(e,n);var i=[];if(null==t)return i;for(var r=-1,o=t.length;++r<o;)i[r]=e(t[r],r,t);return i}var a=t("../function/makeIterator_");e.exports=i},{"../function/makeIterator_":120}],118:[function(t,e,n){function i(t,e,n){e=a(e,n);var i=!1;if(null==t)return i;for(var r=-1,o=t.length;++r<o;)if(e(t[r],r,t)){i=!0;break}return i}var a=t("../function/makeIterator_");e.exports=i},{"../function/makeIterator_":120}],119:[function(t,e,n){function i(t){return t}e.exports=i},{}],120:[function(t,e,n){function i(t,e){if(null==t)return a;switch(typeof t){case"function":return"undefined"!=typeof e?function(n,i,a){return t.call(e,n,i,a)}:t;case"object":return function(e){return o(e,t)};case"string":case"number":return r(t)}}var a=t("./identity"),r=t("./prop"),o=t("../object/deepMatches");e.exports=i},{"../object/deepMatches":126,"./identity":119,"./prop":121}],121:[function(t,e,n){function i(t){return function(e){return e[t]}}e.exports=i},{}],122:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{"./isKind":123,dup:83}],123:[function(t,e,n){arguments[4][85][0].apply(n,arguments)},{"./kindOf":124,dup:85}],124:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88}],125:[function(t,e,n){arguments[4][89][0].apply(n,arguments)},{dup:89}],126:[function(t,e,n){function i(t,e){for(var n=-1,i=t.length;++n<i;)if(o(t[n],e))return!0;return!1}function a(t,e){for(var n=-1,a=e.length;++n<a;)if(!i(t,e[n]))return!1;return!0}function r(t,e){var n=!0;return s(e,function(e,i){if(!o(t[i],e))return n=!1}),n}function o(t,e){return t&&"object"==typeof t?l(t)&&l(e)?a(t,e):r(t,e):t===e}var s=t("./forOwn"),l=t("../lang/isArray");e.exports=o},{"../lang/isArray":122,"./forOwn":128}],127:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{"./hasOwn":129,dup:90}],128:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{"./forIn":127,"./hasOwn":129,dup:91}],129:[function(t,e,n){arguments[4][92][0].apply(n,arguments)},{dup:92}],130:[function(t,e,n){arguments[4][94][0].apply(n,arguments)},{dup:94}],131:[function(t,e,n){arguments[4][95][0].apply(n,arguments)},{"../lang/toString":125,"./WHITE_SPACES":130,dup:95}],132:[function(t,e,n){arguments[4][96][0].apply(n,arguments)},{"../lang/toString":125,"./WHITE_SPACES":130,dup:96}],133:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{"../lang/toString":125,"./WHITE_SPACES":130,"./ltrim":131,"./rtrim":132,dup:97}],134:[function(t,e,n){"use strict";var i=t("mout/array/map"),a=t("slick"),r=t("./base"),o=function(t,e){return i(a.parse(e||"*"),function(e){return t+" "+e}).join(", ")},s=Array.prototype.push;r.implement({search:function(t){if(1===this.length)return r(a.search(t,this[0],new r));for(var e,n=[],i=0;e=this[i];i++)s.apply(n,a.search(t,e));return n=r(n),n&&n.sort()},find:function(t){if(1===this.length)return r(a.find(t,this[0]));for(var e,n=0;e=this[n];n++){var i=a.find(t,e);if(i)return r(i)}return null},sort:function(){return a.sort(this)},matches:function(t){return a.matches(this[0],t)},contains:function(t){return a.contains(this[0],t)},nextSiblings:function(t){return this.search(o("~",t))},nextSibling:function(t){return this.find(o("+",t))},previousSiblings:function(t){return this.search(o("!~",t))},previousSibling:function(t){return this.find(o("!+",t))},children:function(t){return this.search(o(">",t))},firstChild:function(t){return this.find(o("^",t))},lastChild:function(t){return this.find(o("!^",t))},parent:function(t){var e=[];t:for(var n,i=0;n=this[i];i++)for(;(n=n.parentNode)&&n!==document;)if(!t||a.matches(n,t)){e.push(n);break t}return r(e)},parents:function(t){for(var e,n=[],i=0;e=this[i];i++)for(;(e=e.parentNode)&&e!==document;)t&&!a.matches(e,t)||n.push(e);return r(n)}}),e.exports=r},{"./base":107,"mout/array/map":117,slick:312}],135:[function(t,e,n){"use strict";var i=t("mout/array/forEach"),a=t("mout/array/map"),r=t("slick/parser"),o=t("./base");e.exports=function(t,e){return o(a(r(t),function(t){var n,a;return i(t,function(t,r){var s=(e||document).createElement(t.tag);if(t.id&&(s.id=t.id),t.classList&&(s.className=t.classList.join(" ")),t.attributes&&i(t.attributes,function(t){s.setAttribute(t.name,t.value||"")}),t.pseudos&&i(t.pseudos,function(t){var e=o(s),n=e[t.name];n&&n.call(e,t.value)}),0===r)a=s;else if(" "===t.combinator)n.appendChild(s);else if("+"===t.combinator){var l=n.parentNode;l&&l.appendChild(s)}n=s}),a}))}},{"./base":107,"mout/array/forEach":115,"mout/array/map":117,"slick/parser":313}],136:[function(t,e,n){"use strict";var i=t("./lib/color"),a=t("./lib/frame"),r=t("undefined"!=typeof document?"./lib/browser":"./lib/fx");r.requestFrame=function(t){return a.request(t),this},r.cancelFrame=function(t){return a.cancel(t),this},r.color=i,e.exports=r},{"./lib/browser":137,"./lib/color":138,"./lib/frame":139,"./lib/fx":140}],137:[function(t,e,n){(function(n){"use strict";var i=t("./color"),a=t("./frame"),r=(a.cancel,a.request),o=t("prime"),s=t("prime/string/camelize"),l=t("prime/string/clean"),c=t("prime/string/capitalize"),u=t("prime/string/hyphenate"),d=t("prime/array/map"),h=t("prime/array/forEach"),p=t("prime/array/indexOf"),f=t("elements"),m=t("./fx"),g=function(t,e){return String.prototype.match.call(t,e)},v={},b=function(t){return v[t]||(v[t]=u(t))},y=function(t){return Math.round(1e3*t)/1e3},w=n.getComputedStyle?function(t){var e=getComputedStyle(t,null);return function(t){return e?e.getPropertyValue(b(t)):""}}:function(t){var e=t.currentStyle;return function(t){return e?e[s(t)]:""}},x=document.createElement("div"),k="border:none;margin:none;padding:none;visibility:hidden;position:absolute;height:0;",S=function(t,e){var n=t.parentNode,i=1;return n&&(x.style.cssText=k+("width:100"+e+";"),n.appendChild(x),i=x.offsetWidth/100,n.removeChild(x)),i},C=function(t){var e=t.length;return 1===e?t.push(t[0],t[0],t[0]):2===e?t.push(t[0],t[1]):3===e&&t.push(t[1]),t},T="([-.\\d]+)(%|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vm)",E=T+"?",O="none|hidden|dotted|dashed|solid|double|groove|ridge|inset|outset|inherit",I=RegExp(T,"g"),_=RegExp(E),A=RegExp(E,"g"),N=RegExp(O),j=function(t){return null==t?"":t+""},D=function(t,e){return null==t||""===t?e?"1":"":isFinite(t=+t)?t<0?"0":t+"":"1"};try{x.style.color="rgba(0,0,0,0.5)"}catch(t){}var F=/^rgba/.test(x.style.color),z=function(t,e){var n,a="rgba(0,0,0,1)";if(!t||!(n=i(t,!0)))return e?a:"";if(e)return"rgba("+n+")";var r=n[3];return 0===r?"transparent":F&&1!==r?"rgba("+n+")":"rgb("+n.slice(0,3)+")"},R=function(t,e){if(null==t||""===t)return e?"0px":"";var n=g(t,_);return n?n[1]+(n[2]||"px"):t},L=function(t,e){if(null==t||""===t)return e?"none":"";var n=t.match(N);return n?t:e?"none":""},P=function(t,e){var n="0px none rgba(0,0,0,1)";if(null==t||""===t)return e?n:"";if(0===t||"none"===t)return e?n:t+"";var a;t=t.replace(i.x,function(t){return a=t,""});var r=t.match(N),o=t.match(A);return l([R(o?o[0]:"",e),L(r?r[0]:"",e),z(a,e)].join(" "))},M=function(t,e){return null==t||""===t?e?"0px 0px 0px 0px":"":l(C(d(l(t).split(" "),function(t){return R(t,e)})).join(" "))},B=function(t,e,n){var a="rgba(0,0,0,0)",r=3===n?a+" 0px 0px 0px":a+" 0px 0px 0px 0px";if(null==t||""===t)return e?r:"";if("none"===t)return e?r:t;var o=[],t=l(t).replace(i.x,function(t){return o.push(t),""});return d(t.split(","),function(t,i){var a=z(o[i],e),r=/inset/.test(t),s=t.match(A)||["0px"];for(s=d(s,function(t){return R(t,e)});s.length<n;)s.push("0px");var l=r?["inset",a]:[a];return l.concat(s).join(" ")}).join(", ")},$=function(t,e){return null==t||""===t?"":t.replace(i.x,function(t){return z(t,e)}).replace(I,function(t){return R(t,e)})},H={},q={},G={},U={},V=function(t){return H[t]||(H[t]=function(){var e=U[t]||t,n=G[t]||$;return function(){return n(w(this)(e),!0)}}())},Y=function(t){return q[t]||(q[t]=function(){var e=U[t]||t,n=G[t]||$;return function(t){this.style[e]=n(t,!1)}}())},J=["Top","Right","Bottom","Left"],W=["TopLeft","TopRight","BottomRight","BottomLeft"];h(J,function(t){var e="border"+t;h(["margin"+t,"padding"+t,e+"Width",t.toLowerCase()],function(t){G[t]=R}),G[e+"Color"]=z,G[e+"Style"]=L,G[e]=P,H[e]=function(){return[V(e+"Width").call(this),V(e+"Style").call(this),V(e+"Color").call(this)].join(" ")}}),h(W,function(t){G["border"+t+"Radius"]=R}),G.color=G.backgroundColor=z,G.width=G.height=G.minWidth=G.minHeight=G.maxWidth=G.maxHeight=G.fontSize=G.backgroundSize=R,h(["margin","padding"],function(t){G[t]=M,H[t]=function(){return d(J,function(e){return V(t+e).call(this)},this).join(" ")}}),G.borderWidth=M,G.borderStyle=function(t,e){return null==t||""===t?e?C(["none"]).join(" "):"":(t=l(t).split(" "),l(C(d(t,function(t){L(t,e)})).join(" ")))},G.borderColor=function(t,e){return t&&(t=g(t,i.x))?l(C(d(t,function(t){return z(t,e)})).join(" ")):e?C(["rgba(0,0,0,1)"]).join(" "):""},h(["Width","Style","Color"],function(t){H["border"+t]=function(){return d(J,function(e){return V("border"+e+t).call(this)},this).join(" ")}}),G.borderRadius=M,H.borderRadius=function(){return d(W,function(t){return V("border"+t+"Radius").call(this)},this).join(" ")},G.border=P,H.border=function(){for(var t,e=0;e<J.length;e++){var n=V("border"+J[e]).call(this);if(t&&n!==t)return null;t=n}return t},G.zIndex=j,G.opacity=D;var X=null!=x.style.MsFilter&&"MsFilter"||null!=x.style.filter&&"filter";if(X&&null==x.style.opacity){var K=/alpha\(opacity=([\d.]+)\)/i;q.opacity=function(t){t="1"===(t=D(t))?"":"alpha(opacity="+Math.round(100*t)+")";var e=w(this)(X);return this.style[X]=K.test(e)?e.replace(K,t):e+" "+t},H.opacity=function(){var t=w(this)(X).match(K);return(t?t[1]/100:1)+""}}var Q=G.boxShadow=function(t,e){return B(t,e,4)},Z=G.textShadow=function(t,e){return B(t,e,3)};h(["Webkit","Moz","ms","O",null],function(t){h(["transition","transform","transformOrigin","transformStyle","perspective","perspectiveOrigin","backfaceVisibility"],function(e){var n=t?t+c(e):e;"ms"===t&&(v[n]="-ms-"+b(e)),null!=x.style[n]&&(U[e]=n)})});var tt=U.transition,et=U.transform;"OTransition"===tt&&(tt=null);var nt,it;!tt&&et&&function(){var e=t("./unmatrix2d"),n="\\s*([-\\d\\w.]+)\\s*",i=RegExp("matrix\\("+[n,n,n,n,n,n]+"\\)"),a=function(t){var n=e.apply(null,t.match(i).slice(1))||[[0,0],0,0,[0,0]];return["translate("+d(n[0],function(t){return y(t)+"px"})+")","rotate("+y(180*n[1]/Math.PI)+"deg)","skewX("+y(180*n[2]/Math.PI)+"deg)","scale("+d(n[3],y)+")"].join(" ")},r=function(t){return t||"0px"},s=function(t){return t||"1"},c=function(t){return t||"0deg"},u={translate:function(t){t||(t="0px,0px");var e=t.split(",");return e[1]||(e[1]="0px"),d(e,l)+""},translateX:r,translateY:r,scale:function(t){t||(t="1,1");var e=t.split(",");return e[1]||(e[1]=e[0]),d(e,l)+""},scaleX:s,scaleY:s,rotate:c,skewX:c,skewY:c};it=o({constructor:function(t){var e=this.names=[],n=this.values=[];t.replace(/(\w+)\(([-.\d\s\w,]+)\)/g,function(t,i,a){e.push(i),n.push(a)})},identity:function(){var t=[];return h(this.names,function(e){var n=u[e];n&&t.push(e+"("+n()+")")}),t.join(" ")},sameType:function(t){return this.names.toString()===t.names.toString()},decompose:function(){var t=this.toString();x.style.cssText=k+b(et)+":"+t+";",document.body.appendChild(x);var e=w(x)(et);return e&&"none"!==e||(e="matrix(1, 0, 0, 1, 0, 0)"),document.body.removeChild(x),a(e)}}),it.prototype.toString=function(t){var e=this.values,n=[];return h(this.names,function(i,a){var r=u[i];if(r){var o=r(e[a]);t&&o===r()||n.push(i+"("+o+")")}}),n.length?n.join(" "):"none"},it.union=function(t,e){if(t!==e){var n,i;if("none"===t?(i=new it(e),e=i.toString(),t=i.identity(),n=new it(t)):"none"===e?(n=new it(t),t=n.toString(),e=n.identity(),i=new it(e)):(n=new it(t),t=n.toString(),i=new it(e),e=i.toString()),t!==e&&(n.sameType(i)||(t=n.decompose(),e=i.decompose()),t!==e))return[t,e]}},nt=G.transform=function(t){return t&&"none"!==t?new it(i.test(t)?a(t):t).toString(!0):"none"},H.transform=function(){var t=this.style;return t[et]||(t[et]=nt(w(this)(et)))}}();var at,rt=function(t,e,n){var i=G[e]||$,a=V(e).call(t),n=i(n,!0);if(a!==n){if(i===R||i===P||i===M){var r=n.match(I),o=0;r&&(a=a.replace(I,function(e,n,i){var a=r[o++],s=a.match(_),l=s[2];if(i!==l){var c="px"===i?n:S(t,i)*n;return y(c/S(t,l))+l}return e})),o>0&&Y(e).call(t,a)}else if(i===nt)return it.union(a,n);return a!==n?[a,n]:null}},ot=o({inherits:m,constructor:function t(e,n){var i=V(n),a=Y(n);this.get=function(){return i.call(e)},this.set=function(t){return a.call(e,t)},t.parent.constructor.call(this,this.set),this.node=e,this.property=n}});at=o({inherits:ot,constructor:function t(){return t.parent.constructor.apply(this,arguments)},start:function(t){if(this.stop(),0===this.duration)return this.cancel(t),this;var e=rt(this.node,this.property,t);if(!e)return this.cancel(t),this;if(at.parent.start.apply(this,e),!this.cancelStep)return this;var n=G[this.property]||$;return n!==Q&&n!==Z&&n!==$||this.templateFrom===this.templateTo||(this.cancelStep(),delete this.cancelStep,this.cancel(t)),this},parseEquation:function(t){if("string"==typeof t)return at.parent.parseEquation.call(this,t)}});var st=function(t,e,n,i){var a=p(e,t);a!==-1&&(e.splice(a,1),n.splice(a,1),i.splice(a,1))},lt=o({inherits:ot,constructor:function t(e,n){t.parent.constructor.call(this,e,n),this.hproperty=b(U[n]||n);var i=this;this.bSetTransitionCSS=function(t){i.setTransitionCSS(t)},this.bSetStyleCSS=function(t){i.setStyleCSS(t)},this.bComplete=function(){i.complete()}},start:function(t){if(this.stop(),0===this.duration)return this.cancel(t),this;var e=rt(this.node,this.property,t);return e?(this.to=e[1],this.cancelSetTransitionCSS=r(this.bSetTransitionCSS),this):(this.cancel(t),this)},setTransitionCSS:function(t){delete this.cancelSetTransitionCSS,this.resetCSS(!0),this.cancelSetStyleCSS=r(this.bSetStyleCSS)},setStyleCSS:function(t){delete this.cancelSetStyleCSS;var e=this.duration;this.cancelComplete=setTimeout(this.bComplete,e),this.endTime=t+e,this.set(this.to)},complete:function(){delete this.cancelComplete,this.resetCSS(),this.callback(this.endTime)},stop:function(t){return this.cancelExit?(this.cancelExit(),delete this.cancelExit):this.cancelSetTransitionCSS?(this.cancelSetTransitionCSS(),delete this.cancelSetTransitionCSS):this.cancelSetStyleCSS?(this.cancelSetStyleCSS(),delete this.cancelSetStyleCSS,t&&this.resetCSS()):this.cancelComplete&&(clearTimeout(this.cancelComplete),delete this.cancelComplete,t&&(this.resetCSS(),this.set(this.get()))),this},resetCSS:function(t){var e=w(this.node),n=(e(tt+"Property").replace(/\s+/g,"")||"all").split(","),i=(e(tt+"Duration").replace(/\s+/g,"")||"0s").split(","),a=(e(tt+"TimingFunction").replace(/\s+/g,"")||"ease").match(/cubic-bezier\([\d-.,]+\)|([a-z-]+)/g);st("all",n,i,a),st(this.hproperty,n,i,a),t&&(n.push(this.hproperty),i.push(this.duration+"ms"),a.push("cubic-bezier("+this.equation+")"));var r=this.node.style;r[tt+"Property"]=n,r[tt+"Duration"]=i,r[tt+"TimingFunction"]=a},parseEquation:function(t){if("string"==typeof t)return lt.parent.parseEquation.call(this,t,!0)}}),ct=tt?lt:at,ut=function(t,e){return"function"==typeof t?m(t):f(t,e)};f.implement({animate:function(t,e,n){var i=t,a=e;"string"==typeof t&&(i={},i[t]=e,a=n),null==a&&(a={});var r=typeof a;a="function"===r?{callback:a}:"string"===r||"number"===r?{duration:a}:a;var o=a.callback||function(){},l=0,c=0;a.callback=function(t){++l===c&&o(t)};for(var u in i){var d=i[u],u=s(u);this.forEach(function(t){c++;var e=f(t),n=e._animations||(e._animations={}),i=n[u]||(n[u]=new ct(t,u));i.setOptions(a).start(d)})}return this},style:function(t,e){var n=t;"string"==typeof t&&(n={},n[t]=e);for(var i in n){var a=n[i],r=Y(i=s(i));this.forEach(function(t){var e,n=f(t),o=n._animations;o&&(e=o[i])&&e.stop(!0),r.call(t,a)})}return this},compute:function(t){t=s(t);var e=this[0];if("transform"===t&&nt)return w(e)(et);var n=V(t).call(e);return null!=n?n.replace(I,function(t,n,i){return"px"===i?t:S(e,i)*n+"px"}):""}}),ut.parse=function(t,e,n){return(G[s(t)]||$)(e,n)},e.exports=ut}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./color":138,"./frame":139,"./fx":140,"./unmatrix2d":141,elements:142,prime:149,"prime/array/forEach":145,"prime/array/indexOf":146,"prime/array/map":147,"prime/string/camelize":156,"prime/string/capitalize":157,"prime/string/clean":158,
"prime/string/hyphenate":159}],138:[function(t,e,n){"use strict";var i={maroon:"#800000",red:"#ff0000",orange:"#ffA500",yellow:"#ffff00",olive:"#808000",purple:"#800080",fuchsia:"#ff00ff",white:"#ffffff",lime:"#00ff00",green:"#008000",navy:"#000080",blue:"#0000ff",aqua:"#00ffff",teal:"#008080",black:"#000000",silver:"#c0c0c0",gray:"#808080",transparent:"#0000"},a=function(t,e,n,i){return null!=i&&""!==i||(i=1),t=parseFloat(t),e=parseFloat(e),n=parseFloat(n),i=parseFloat(i),t<=255&&t>=0&&e<=255&&e>=0&&n<=255&&n>=0&&i<=1&&i>=0?[Math.round(t),Math.round(e),Math.round(n),i]:null},r=function(t){if(3===t.length&&(t+="f"),4===t.length){var e=t.charAt(0),n=t.charAt(1),i=t.charAt(2),a=t.charAt(3);t=e+e+n+n+i+i+a+a}6===t.length&&(t+="ff");for(var r=[],o=0,s=t.length;o<s;o+=2)r.push(parseInt(t.substr(o,2),16)/(6===o?255:1));return r},o=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},s=function(t,e,n,i){var a,r,s;if(null!=i&&""!==i||(i=1),t=parseFloat(t)/360,e=parseFloat(e)/100,n=parseFloat(n)/100,i=parseFloat(i)/1,t>1||t<0||e>1||e<0||n>1||n<0||i>1||i<0)return null;if(0===e)a=r=s=n;else{var l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;a=o(c,l,t+1/3),s=o(c,l,t),r=o(c,l,t-1/3)}return[255*a,255*s,255*r,i]},l=[];for(var c in i)l.push(c);var u="(?:#([a-f0-9]{3,8}))",d="\\s*([.\\d%]+)\\s*",h="(?:,\\s*([.\\d]+)\\s*)?",p="\\("+[d,d,d]+h+"\\)",f="(?:rgb)a?",m="(?:hsl)a?",g="("+l.join("|")+")",v=RegExp(u,"i"),b=RegExp(f+p,"i"),y=RegExp(m+p,"i"),w=function(t,e){if(null==t)return null;t=(t+"").replace(/\s+/,"");var n=i[t];if(n)return w(n,e);if(n=t.match(v))t=r(n[1]);else if(n=t.match(b))t=n.slice(1);else{if(!(n=t.match(y)))return null;t=s.apply(null,n.slice(1))}return t&&(t=a.apply(null,t))?e?t:(1===t[3]&&t.splice(3,1),"rgb"+(4===t.length?"a":"")+"("+t+")"):null};w.x=RegExp([g,u,f+p,m+p].join("|"),"gi"),e.exports=w},{}],139:[function(t,e,n){(function(e){"use strict";var i=t("prime/array/indexOf"),a=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t){return setTimeout(function(){t()},1e3/60)},r=[],o=function(t){for(var e=r.splice(0,r.length),n=0,i=e.length;n<i;n++)e[n](t||(t=+new Date))},s=function(t){var e=i(r,t);e>-1&&r.splice(e,1)},l=function(t){var e=r.push(t);return 1===e&&a(o),function(){s(t)}};n.request=l,n.cancel=s}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"prime/array/indexOf":146}],140:[function(t,e,n){"use strict";var i=t("prime"),a=t("./frame").request,r=t("cubic-bezier"),o=t("prime/array/map"),s="([\\d.]+)(s|ms)?",l="cubic-bezier\\(([-.\\d]+),([-.\\d]+),([-.\\d]+),([-.\\d]+)\\)",c=RegExp(s),u=RegExp(l),d=(RegExp(l,"g"),{default:"cubic-bezier(0.25, 0.1, 0.25, 1.0)",linear:"cubic-bezier(0, 0, 1, 1)","ease-in":"cubic-bezier(0.42, 0, 1.0, 1.0)","ease-out":"cubic-bezier(0, 0, 0.58, 1.0)","ease-in-out":"cubic-bezier(0.42, 0, 0.58, 1.0)"});d.ease=d.default;var h=function(t,e,n){return(e-t)*n+t},p=function(t){var e=[],n=(t+"").replace(/[-.\d]+/g,function(t){return e.push(+t),"@"});return[e,n]},f=i({constructor:function(t,e){this.setOptions(e),this.render=t||function(){};var n=this;this.bStep=function(t){return n.step(t)},this.bExit=function(t){n.exit(t)}},setOptions:function(t){if(null==t&&(t={}),!(this.duration=this.parseDuration(t.duration||"500ms")))throw new Error("invalid duration");if(!(this.equation=this.parseEquation(t.equation||"default")))throw new Error("invalid equation");return this.callback=t.callback||function(){},this},parseDuration:function(t){if(t=(t+"").match(c)){var e=+t[1],n=t[2]||"ms";if("s"===n)return 1e3*e;if("ms"===n)return e}},parseEquation:function(t,e){var n=typeof t;if("function"===n)return t;if("string"===n){t=d[t]||t;var i=t.replace(/\s+/g,"").match(u);if(i){if(t=o(i.slice(1),function(t){return+t}),e)return t;if("0,0,1,1"===t.toString())return function(t){return t};n="object"}}return"object"===n?r(t[0],t[1],t[2],t[3],1e3/60/this.duration/4):void 0},cancel:function(t){this.to=t,this.cancelExit=a(this.bExit)},exit:function(t){this.render(this.to),delete this.cancelExit,this.callback(t)},start:function(t,e){if(this.stop(),0===this.duration)return this.cancel(e),this;this.isArray=!1,this.isNumber=!1;var n=typeof t,i=typeof e;"object"===n&&"object"===i?this.isArray=!0:"number"===n&&"number"===i&&(this.isNumber=!0);var r=p(t),o=p(e);return this.from=r[0],this.to=o[0],this.templateFrom=r[1],this.templateTo=o[1],this.from.length!==this.to.length||this.from.toString()===this.to.toString()?(this.cancel(e),this):(delete this.time,this.length=this.from.length,this.cancelStep=a(this.bStep),this)},stop:function(){return this.cancelExit?(this.cancelExit(),delete this.cancelExit):this.cancelStep&&(this.cancelStep(),delete this.cancelStep),this},step:function(t){this.time||(this.time=t);var e=(t-this.time)/this.duration;e>1&&(e=1);for(var n=this.equation(e),i=this.from,r=this.to,o=this.templateTo,s=0,l=this.length;s<l;s++){var c=i[s],u=r[s];o=o.replace("@",u!==c?h(c,u,n):u)}this.render(this.isArray?o.split(","):this.isNumber?+o:o,e),1!==e?this.cancelStep=a(this.bStep):(delete this.cancelStep,this.callback(t))}}),m=function(t){var e=new f(t);return{start:function(t,n,i){var a=typeof i;return e.setOptions("function"===a?{callback:i}:"string"===a||"number"===a?{duration:i}:i).start(t,n),this},stop:function(){return e.stop(),this}}};m.prototype=f.prototype,e.exports=m},{"./frame":139,"cubic-bezier":103,prime:149,"prime/array/map":147}],141:[function(t,e,n){"use strict";var i=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},a=function(t){var e=i(t);return e?[t[0]/e,t[1]/e]:[0,0]},r=function(t,e){return t[0]*e[0]+t[1]*e[1]},o=Math.atan2,s=function(t,e,n,i){return[n*t[0]+i*e[0],n*t[1]+i*e[1]]};e.exports=function(t,e,n,l,c,u){if(t*l-e*n===0)return!1;var d=[c,u],h=[[t,e],[n,l]],p=[i(h[0])];h[0]=a(h[0]);var f=r(h[0],h[1]);h[1]=s(h[1],h[0],1,-f),p[1]=i(h[1]),f/=p[1];var m=o(h[0][1],h[0][0]);return[d,m,f,p]}},{}],142:[function(t,e,n){(function(n){"use strict";var i=t("prime"),a=t("prime/array/forEach"),r=t("prime/array/map"),o=t("prime/array/filter"),s=t("prime/array/every"),l=t("prime/array/some"),c=0,u=function(t){return t===n?"global":t.uniqueNumber||(t.uniqueNumber="n:"+(c++).toString(36))},d={},h=i({constructor:function t(e,i){if(null==e)return this&&this.constructor===t?new p:null;var a=e;if(e.constructor!==p){a=new p;var r;if("string"==typeof e)return a.search?(a[a.length++]=i||document,a.search(e)):null;if(e.nodeType||e===n)a[a.length++]=e;else if(e.length)for(var o={},s=0,l=e.length;s<l;s++){var c=t(e[s],i);if(c&&c.length)for(var h=0,f=c.length;h<f;h++){var m=c[h];r=u(m),o[r]||(a[a.length++]=m,o[r]=!0)}}}return a.length?1===a.length?(r=u(a[0]),d[r]||(d[r]=a)):a:null}}),p=i({inherits:h,constructor:function(){this.length=0},unlink:function(){return this.map(function(t,e){return delete d[u(t)],t})},forEach:function(t,e){return a(this,t,e)},map:function(t,e){return r(this,t,e)},filter:function(t,e){return o(this,t,e)},every:function(t,e){return s(this,t,e)},some:function(t,e){return l(this,t,e)}});e.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{prime:149,"prime/array/every":143,"prime/array/filter":144,"prime/array/forEach":145,"prime/array/map":147,"prime/array/some":148}],143:[function(t,e,n){"use strict";var i=function(t,e,n){for(var i=0,a=t.length>>>0;i<a;i++)if(!e.call(n,t[i],i,t))return!1;return!0};e.exports=i},{}],144:[function(t,e,n){"use strict";var i=function(t,e,n){for(var i=[],a=0,r=t.length>>>0;a<r;a++){var o=t[a];e.call(n,o,a,t)&&i.push(o)}return i};e.exports=i},{}],145:[function(t,e,n){"use strict";var i=function(t,e,n){for(var i=0,a=t.length>>>0;i<a&&e.call(n,t[i],i,t)!==!1;i++);return t};e.exports=i},{}],146:[function(t,e,n){"use strict";var i=function(t,e,n){for(var i=t.length>>>0,a=n<0?Math.max(0,i+n):n||0;a<i;a++)if(t[a]===e)return a;return-1};e.exports=i},{}],147:[function(t,e,n){"use strict";var i=function(t,e,n){for(var i=t.length>>>0,a=Array(i),r=0,o=i;r<o;r++)a[r]=e.call(n,t[r],r,t);return a};e.exports=i},{}],148:[function(t,e,n){"use strict";var i=function(t,e,n){for(var i=0,a=t.length>>>0;i<a;i++)if(e.call(n,t[i],i,t))return!0;return!1};e.exports=i},{}],149:[function(t,e,n){"use strict";var i=t("./object/hasOwn"),a=t("./object/forIn"),r=t("./object/mixIn"),o=t("./object/filter"),s=t("./object/create"),l=t("./type"),c=Object.defineProperty,u=Object.getOwnPropertyDescriptor;try{c({},"~",{}),u({},"~")}catch(t){c=null,u=null}var d=function(t,e,n){c(this,e,u(n,e)||{writable:!0,enumerable:!0,configurable:!0,value:t})},h=function(t,e){this[e]=t},p=function(t){return a(t,c?d:h,this.prototype),this},f=/^constructor|inherits|mixin$/,m=function(t){"function"===l(t)&&(t={constructor:t});var e=t.inherits,n=i(t,"constructor")?t.constructor:e?function(){return e.apply(this,arguments)}:function(){};if(e){r(n,e);var a=e.prototype,c=n.prototype=s(a);n.parent=a,c.constructor=n}n.implement||(n.implement=p);var u=t.mixin;if(u){"array"!==l(u)&&(u=[u]);for(var d=0;d<u.length;d++)n.implement(s(u[d].prototype))}return n.implement(o(t,function(t,e){return!e.match(f)}))};e.exports=m},{"./object/create":150,"./object/filter":151,"./object/forIn":152,"./object/hasOwn":154,"./object/mixIn":155,"./type":161}],150:[function(t,e,n){"use strict";var i=function(t){var e=function(){};return e.prototype=t,new e};e.exports=i},{}],151:[function(t,e,n){"use strict";var i=t("./forIn"),a=function(t,e,n){var a={};return i(t,function(i,r){e.call(n,i,r,t)&&(a[r]=i)}),a};e.exports=a},{"./forIn":152}],152:[function(t,e,n){"use strict";var i=t("./hasOwn"),a=function(t,e,n){for(var i in t)if(e.call(n,t[i],i,t)===!1)break;return t};if(!{valueOf:0}.propertyIsEnumerable("valueOf")){var r="constructor,toString,valueOf,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString".split(","),o=Object.prototype;a=function(t,e,n){for(var a in t)if(e.call(n,t[a],a,t)===!1)return t;for(var s=0;a=r[s];s++){var l=t[a];if((l!==o[a]||i(t,a))&&e.call(n,l,a,t)===!1)break}return t}}e.exports=a},{"./hasOwn":154}],153:[function(t,e,n){"use strict";var i=t("./forIn"),a=t("./hasOwn"),r=function(t,e,n){return i(t,function(i,r){if(a(t,r))return e.call(n,i,r,t)}),t};e.exports=r},{"./forIn":152,"./hasOwn":154}],154:[function(t,e,n){"use strict";var i=Object.hasOwnProperty,a=function(t,e){return i.call(t,e)};e.exports=a},{}],155:[function(t,e,n){"use strict";var i=t("./forOwn"),a=function(t,e){this[e]=t},r=function(t){for(var e=1,n=arguments.length;e<n;e++)i(arguments[e],a,t);return t};e.exports=r},{"./forOwn":153}],156:[function(t,e,n){"use strict";var i=function(t){return(t+"").replace(/-\D/g,function(t){return t.charAt(1).toUpperCase()})};e.exports=i},{}],157:[function(t,e,n){"use strict";var i=function(t){return(t+"").replace(/\b[a-z]/g,function(t){return t.toUpperCase()})};e.exports=i},{}],158:[function(t,e,n){"use strict";var i=t("./trim"),a=function(t){return i((t+"").replace(/\s+/g," "))};e.exports=a},{"./trim":160}],159:[function(t,e,n){"use strict";var i=function(t){return(t+"").replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()})};e.exports=i},{}],160:[function(t,e,n){"use strict";var i=function(t){return(t+"").replace(/^\s+|\s+$/g,"")};e.exports=i},{}],161:[function(t,e,n){"use strict";var i=Object.prototype.toString,a=/number|object|array|string|function|date|regexp|boolean/,r=function(t){if(null==t)return"null";var e=i.call(t).slice(8,-1).toLowerCase();return"number"===e&&isNaN(t)?"null":a.test(e)?e:"object"};e.exports=r},{}],162:[function(t,e,n){function i(t,e){if(null==e)return t;for(var n=t.length,i=-1,a=e.length;++i<a;)t[n+i]=e[i];return t}e.exports=i},{}],163:[function(t,e,n){function i(t,e){if(null==e)return t;for(var n=-1,i=e.length;++n<i;)a(t,e[n])===-1&&t.push(e[n]);return t}var a=t("./indexOf");e.exports=i},{"./indexOf":173}],164:[function(t,e,n){function i(t,e){return a(t,e)!==-1}var a=t("./indexOf");e.exports=i},{"./indexOf":173}],165:[function(t,e,n){function i(t){var e=l(arguments,1),n=r(a(t),function(t){return!o(e,function(e){return s(e,t)})});return n}var a=t("./unique"),r=t("./filter"),o=t("./some"),s=t("./contains"),l=t("./slice");e.exports=i},{"./contains":164,"./filter":168,"./slice":181,"./some":182,"./unique":184}],166:[function(t,e,n){function i(t,e,n){return n=n||r,o(t)&&o(e)?t.length===e.length&&s(t,a(n),e):n(t,e)}function a(t){return function(e,n){return n in this&&t(e,this[n])}}var r=t("../lang/is"),o=t("../lang/isArray"),s=t("./every");e.exports=i},{"../lang/is":200,"../lang/isArray":201,"./every":167}],167:[function(t,e,n){arguments[4][113][0].apply(n,arguments)},{"../function/makeIterator_":193,dup:113}],168:[function(t,e,n){arguments[4][114][0].apply(n,arguments)},{"../function/makeIterator_":193,dup:114}],169:[function(t,e,n){function i(t,e,n){var i=a(t,e,n);return i>=0?t[i]:void 0}var a=t("./findIndex");e.exports=i},{"./findIndex":170}],170:[function(t,e,n){function i(t,e,n){if(e=a(e,n),null==t)return-1;for(var i=-1,r=t.length;++i<r;)if(e(t[i],i,t))return i;return-1}var a=t("../function/makeIterator_");e.exports=i},{"../function/makeIterator_":193}],171:[function(t,e,n){function i(t,e,n){if(0===n)return o(e,t),e;for(var a,s=-1,l=t.length;++s<l;)a=t[s],r(a)?i(a,e,n-1):e.push(a);return e}function a(t,e){return null==t?[]:(e=null==e?-1:e,i(t,[],e))}var r=t("../lang/isArray"),o=t("./append");e.exports=a},{"../lang/isArray":201,"./append":162}],172:[function(t,e,n){arguments[4][79][0].apply(n,arguments)},{dup:79}],173:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],174:[function(t,e,n){function i(t,e){var n=a(r(arguments,1),t);return n.length&&Array.prototype.push.apply(t,n),t.length}var a=t("./difference"),r=t("./slice");e.exports=i},{"./difference":165,"./slice":181}],175:[function(t,e,n){function i(t){var e=l(arguments,1),n=r(a(t),function(t){return o(e,function(e){return s(e,t)})});return n}var a=t("./unique"),r=t("./filter"),o=t("./every"),s=t("./contains"),l=t("./slice");e.exports=i},{"./contains":164,"./every":167,"./filter":168,"./slice":181,"./unique":184}],176:[function(t,e,n){function i(t,e,n){if(null==t)return t;for(var i,r=a(arguments,2),o=-1,s=t.length;++o<s;)i=t[o],i[e].apply(i,r);return t}var a=t("./slice");e.exports=i},{"./slice":181}],177:[function(t,e,n){function i(t){if(!(null==t||t.length<1))return t[t.length-1]}e.exports=i},{}],178:[function(t,e,n){arguments[4][117][0].apply(n,arguments)},{"../function/makeIterator_":193,dup:117}],179:[function(t,e,n){arguments[4][81][0].apply(n,arguments)},{"./indexOf":173,dup:81}],180:[function(t,e,n){function i(t,e){for(var n=a(t,e);n!==-1;)t.splice(n,1),n=a(t,e,n)}var a=t("./indexOf");e.exports=i},{"./indexOf":173}],181:[function(t,e,n){function i(t,e,n){var i=t.length;e=null==e?0:e<0?Math.max(i+e,0):Math.min(e,i),n=null==n?i:n<0?Math.max(i+n,0):Math.min(n,i);for(var a=[];e<n;)a.push(t[e++]);return a}e.exports=i},{}],182:[function(t,e,n){arguments[4][118][0].apply(n,arguments)},{"../function/makeIterator_":193,dup:118}],183:[function(t,e,n){function i(t,e){e=e||2;var n=[];if(null==t)return n;for(var i,a=Math.floor(t.length/e),r=t.length%e,o=0,s=t.length,l=0;o<s;)i=a,l<r&&i++,n.push(t.slice(o,o+i)),l++,o+=i;return n}e.exports=i},{}],184:[function(t,e,n){function i(t,e){return e=e||a,r(t,function(t,n,i){for(var a=i.length;++n<a;)if(e(t,i[n]))return!1;return!0})}function a(t,e){return t===e}var r=t("./filter");e.exports=i},{"./filter":168}],185:[function(t,e,n){var i=t("./make_"),a=t("../array/contains"),r=t("../object/contains");e.exports=i(a,r)},{"../array/contains":164,"../object/contains":222,"./make_":188}],186:[function(t,e,n){var i=t("./make_"),a=t("../array/find"),r=t("../object/find");e.exports=i(a,r)},{"../array/find":169,"../object/find":228,"./make_":188}],187:[function(t,e,n){var i=t("./make_"),a=t("../array/forEach"),r=t("../object/forOwn");e.exports=i(a,r)},{"../array/forEach":172,"../object/forOwn":230,"./make_":188}],188:[function(t,e,n){function i(t,e,n){return function(){var i=a(arguments);return null==i[0]?n:"number"==typeof i[0].length?t.apply(null,i):e.apply(null,i)}}var a=t("../array/slice");e.exports=i},{"../array/slice":181}],189:[function(t,e,n){function i(t){return t?a(t)?t.length:r(t):0}var a=t("../lang/isArray"),r=t("../object/size");e.exports=i},{"../lang/isArray":201,"../object/size":240}],190:[function(t,e,n){function i(t,e,n){var i=a(arguments,2);return function(){return t.apply(e,i.concat(a(arguments)))}}var a=t("../array/slice");e.exports=i},{"../array/slice":181}],191:[function(t,e,n){function i(t,e,n){function i(){function i(){n||(r=t.apply(s,o)),a=null}var o=arguments,s=this;return a?clearTimeout(a):n&&(r=t.apply(s,o)),a=setTimeout(i,e),r}var a,r;return i.cancel=function(){clearTimeout(a)},i}e.exports=i},{}],192:[function(t,e,n){arguments[4][119][0].apply(n,arguments)},{dup:119}],193:[function(t,e,n){arguments[4][120][0].apply(n,arguments)},{"../object/deepMatches":224,"./identity":192,"./prop":194,dup:120}],194:[function(t,e,n){arguments[4][121][0].apply(n,arguments)},{dup:121}],195:[function(t,e,n){function i(){var t=arguments;return function(){for(var e=0,n=t.length;e<n;)t[e].apply(this,arguments),e+=1}}e.exports=i},{}],196:[function(t,e,n){e.exports=Function("return this")()},{}],197:[function(t,e,n){function i(t){switch(l(t)){case"Object":return a(t);case"Array":return s(t);case"RegExp":return r(t);case"Date":return o(t);default:return t}}function a(t){return c(t)?u({},t):t}function r(t){var e="";return e+=t.multiline?"m":"",e+=t.global?"g":"",e+=t.ignoreCase?"i":"",new RegExp(t.source,e)}function o(t){return new Date((+t))}function s(t){return t.slice()}var l=t("./kindOf"),c=t("./isPlainObject"),u=t("../object/mixIn");e.exports=i},{"../object/mixIn":236,"./isPlainObject":207,"./kindOf":210}],198:[function(t,e,n){function i(t,e){switch(l(t)){case"Object":return a(t,e);case"Array":return r(t,e);default:return o(t)}}function a(t,e){if(c(t)){var n={};return s(t,function(t,n){this[n]=i(t,e)},n),n}return e?e(t):t}function r(t,e){for(var n=[],a=-1,r=t.length;++a<r;)n[a]=i(t[a],e);return n}var o=t("./clone"),s=t("../object/forOwn"),l=t("./kindOf"),c=t("./isPlainObject");e.exports=i},{"../object/forOwn":230,"./clone":197,"./isPlainObject":207,"./kindOf":210}],199:[function(t,e,n){function i(t,e,n){function c(t,e){return i(t,e,n)}n=n||a;var u=r(t)&&r(e),d=!u&&o(t)&&o(e);if(!u&&!d)return n(t,e);var h=u?s:l;return h(t,e,c)}var a=t("./is"),r=t("./isObject"),o=t("./isArray"),s=t("../object/equals"),l=t("../array/equals");e.exports=i},{"../array/equals":166,"../object/equals":225,"./is":200,"./isArray":201,"./isObject":206}],200:[function(t,e,n){function i(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}e.exports=i},{}],201:[function(t,e,n){arguments[4][83][0].apply(n,arguments)},{"./isKind":204,dup:83}],202:[function(t,e,n){function i(t){return a(t,"Boolean")}var a=t("./isKind");e.exports=i},{"./isKind":204}],203:[function(t,e,n){arguments[4][84][0].apply(n,arguments)},{"./isKind":204,dup:84}],204:[function(t,e,n){arguments[4][85][0].apply(n,arguments)},{"./kindOf":210,dup:85}],205:[function(t,e,n){function i(t){return a(t,"Number")}var a=t("./isKind");e.exports=i},{"./isKind":204}],206:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{"./isKind":204,dup:86}],207:[function(t,e,n){function i(t){return!!t&&"object"==typeof t&&t.constructor===Object}e.exports=i},{}],208:[function(t,e,n){function i(t){switch(typeof t){case"string":case"number":case"boolean":return!0}return null==t}e.exports=i},{}],209:[function(t,e,n){arguments[4][87][0].apply(n,arguments)},{"./isKind":204,dup:87}],210:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88}],211:[function(t,e,n){function i(t){var e,n=[],i=a(t);if(null!=t)if(null==t.length||"String"===i||"Function"===i||"RegExp"===i||t===r)n[n.length]=t;else for(e=t.length;e--;)n[e]=t[e];return n}var a=t("./kindOf"),r=t("./GLOBAL");e.exports=i},{"./GLOBAL":196,"./kindOf":210}],212:[function(t,e,n){function i(t){return"number"==typeof t?t:t?"string"==typeof t?parseFloat(t):a(t)?NaN:Number(t):0}var a=t("./isArray");e.exports=i},{"./isArray":201}],213:[function(t,e,n){arguments[4][89][0].apply(n,arguments)},{dup:89}],214:[function(t,e,n){function i(t,e,n){return t<e?e:t>n?n:t}e.exports=i},{}],215:[function(t,e,n){function i(t,e,n){return e+(n-e)*t}e.exports=i},{}],216:[function(t,e,n){function i(t,e,n,i,o){return a(r(t,e,n),i,o)}var a=t("./lerp"),r=t("./norm");e.exports=i},{"./lerp":215,"./norm":217}],217:[function(t,e,n){function i(t,e,n){if(t<e||t>n)throw new RangeError("value ("+t+") must be between "+e+" and "+n);return t===n?1:(t-e)/(n-e)}e.exports=i},{}],218:[function(t,e,n){e.exports=2147483647},{}],219:[function(t,e,n){e.exports=-2147483648},{}],220:[function(t,e,n){function i(t,e){t=a(t);var n=Math.pow(10,e);return+(Math.round(t*n)/n).toFixed(e)}var a=t("../lang/toNumber");e.exports=i},{"../lang/toNumber":212}],221:[function(t,e,n){function i(t){return~~t}e.exports=i},{}],222:[function(t,e,n){function i(t,e){return a(t,function(t){return t===e})}var a=t("./some");e.exports=i},{"./some":241}],223:[function(t,e,n){function i(t,e){for(var n,o=0,s=arguments.length;++o<s;)n=arguments[o],n&&a(n,function(e,n){var a=t[n];null==a?t[n]=e:r(a)&&r(e)&&i(a,e)});return t}var a=t("./forOwn"),r=t("../lang/isPlainObject");e.exports=i},{"../lang/isPlainObject":207,"./forOwn":230}],224:[function(t,e,n){function i(t,e){for(var n=-1,i=t.length;++n<i;)if(o(t[n],e))return!0;return!1}function a(t,e){for(var n=-1,a=e.length;++n<a;)if(!i(t,e[n]))return!1;return!0}function r(t,e){var n=!0;return s(e,function(e,i){if(!o(t[i],e))return n=!1}),n}function o(t,e){return t&&"object"==typeof t&&e&&"object"==typeof e?l(t)&&l(e)?a(t,e):r(t,e):t===e}var s=t("./forOwn"),l=t("../lang/isArray");e.exports=o},{"../lang/isArray":201,"./forOwn":230}],225:[function(t,e,n){function i(t){return function(e,n){return o(this,n)&&t(e,this[n])}}function a(t,e){return o(this,e)}function r(t,e,n){return n=n||c,l(t)&&l(e)?s(t,i(n),e)&&s(e,a,t):n(t,e)}var o=t("./hasOwn"),s=t("./every"),l=t("../lang/isObject"),c=t("../lang/is");e.exports=r},{"../lang/is":200,"../lang/isObject":206,"./every":226,"./hasOwn":233}],226:[function(t,e,n){function i(t,e,n){e=r(e,n);var i=!0;return a(t,function(n,a){if(!e(n,a,t))return i=!1,!1}),i}var a=t("./forOwn"),r=t("../function/makeIterator_");e.exports=i},{"../function/makeIterator_":193,"./forOwn":230}],227:[function(t,e,n){function i(t,e,n){e=r(e,n);var i={};return a(t,function(t,n,a){e(t,n,a)&&(i[n]=t)}),i}var a=t("./forOwn"),r=t("../function/makeIterator_");e.exports=i},{"../function/makeIterator_":193,"./forOwn":230}],228:[function(t,e,n){function i(t,e,n){e=r(e,n);var i;return a(t,function(t,n,a){if(e(t,n,a))return i=t,!0}),i}var a=t("./some"),r=t("../function/makeIterator_");e.exports=i},{"../function/makeIterator_":193,"./some":241}],229:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{"./hasOwn":233,dup:90}],230:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{"./forIn":229,"./hasOwn":233,dup:91}],231:[function(t,e,n){function i(t,e){for(var n=e.split("."),i=n.pop();e=n.shift();)if(t=t[e],null==t)return;return t[i]}t("../lang/isPrimitive");e.exports=i},{"../lang/isPrimitive":208}],232:[function(t,e,n){function i(t,e){return r(t,e)!==a}var a,r=t("./get");e.exports=i},{"./get":231}],233:[function(t,e,n){arguments[4][92][0].apply(n,arguments)},{dup:92}],234:[function(t,e,n){var i=t("./forOwn"),a=Object.keys||function(t){var e=[];return i(t,function(t,n){e.push(n)}),e};e.exports=a},{"./forOwn":230}],235:[function(t,e,n){function i(){var t,e,n,s,l=1;for(s=r(arguments[0]);n=arguments[l++];)for(t in n)a(n,t)&&(e=n[t],o(e)&&o(s[t])?s[t]=i(s[t],e):s[t]=r(e));return s}var a=t("./hasOwn"),r=t("../lang/deepClone"),o=t("../lang/isObject");e.exports=i},{"../lang/deepClone":198,"../lang/isObject":206,"./hasOwn":233}],236:[function(t,e,n){arguments[4][93][0].apply(n,arguments)},{"./forOwn":230,dup:93}],237:[function(t,e,n){function i(t,e){return e?(a(e.split("."),function(e){t[e]||(t[e]={}),t=t[e]}),t):t}var a=t("../array/forEach");e.exports=i},{"../array/forEach":172}],238:[function(t,e,n){function i(t,e){var n="string"!=typeof arguments[1]?arguments[1]:a(arguments,1),i={};for(var o in t)t.hasOwnProperty(o)&&!r(n,o)&&(i[o]=t[o]);return i}var a=t("../array/slice"),r=t("../array/contains");e.exports=i},{"../array/contains":164,"../array/slice":181}],239:[function(t,e,n){function i(t,e,n){var i=/^(.+)\.(.+)$/.exec(e);i?a(t,i[1])[i[2]]=n:t[e]=n}var a=t("./namespace");e.exports=i},{"./namespace":237}],240:[function(t,e,n){function i(t){var e=0;return a(t,function(){e++}),e}var a=t("./forOwn");e.exports=i},{"./forOwn":230}],241:[function(t,e,n){function i(t,e,n){e=r(e,n);var i=!1;return a(t,function(n,a){if(e(n,a,t))return i=!0,!1}),i}var a=t("./forOwn"),r=t("../function/makeIterator_");e.exports=i},{"../function/makeIterator_":193,"./forOwn":230}],242:[function(t,e,n){function i(t,e){if(a(t,e)){for(var n=e.split("."),i=n.pop();e=n.shift();)t=t[e];return delete t[i]}return!0}var a=t("./has");e.exports=i},{"./has":232}],243:[function(t,e,n){function i(t){var e=[];return a(t,function(t,n){e.push(t)}),e}var a=t("./forOwn");e.exports=i},{"./forOwn":230}],244:[function(t,e,n){function i(t){var e,n,i=[];return a(t,function(t,a){r(t)?(e=a+"=",n=new RegExp("&"+a+"+=$"),o(t,function(t){e+=encodeURIComponent(t)+"&"+a+"="}),i.push(e.replace(n,""))):i.push(a+"="+encodeURIComponent(t))}),i.length?"?"+i.join("&"):""}var a=t("../object/forOwn"),r=t("../lang/isArray"),o=t("../array/forEach");e.exports=i},{"../array/forEach":172,"../lang/isArray":201,"../object/forOwn":230}],245:[function(t,e,n){function i(t,e,n){var i=new RegExp("(\\?|&)"+e+"=([^&]*)"),o=i.exec(r(t)),s=o&&o[2]?o[2]:null;return n===!1?s:a(s)}var a=t("../string/typecast"),r=t("./getQuery");e.exports=i},{"../string/typecast":271,"./getQuery":246}],246:[function(t,e,n){function i(t){var e=/\?[a-zA-Z0-9\=\&\%\$\-\_\.\+\!\*\'\(\)\,]+/.exec(t);return e?decodeURIComponent(e[0].replace(/\+/g," ")):""}e.exports=i},{}],247:[function(t,e,n){function i(t,e,n){t=t||"";var i=new RegExp("(\\?|&)"+e+"=[^&]*"),a=e+"="+encodeURIComponent(n);return i.test(t)?t.replace(i,"$1"+a):(t.indexOf("?")===-1&&(t+="?"),t.indexOf("=")!==-1&&(t+="&"),t+a)}e.exports=i},{}],248:[function(t,e,n){function i(t){var e=1===arguments.length&&r(t)?t:arguments;return e[a(0,e.length-1)]}var a=t("./randInt"),r=t("../lang/isArray");e.exports=i},{"../lang/isArray":201,"./randInt":252}],249:[function(t,e,n){function i(){return a(8)+"-"+a(4)+"-4"+a(3)+"-"+r(8,9,"a","b")+a(3)+"-"+a(12)}var a=t("./randHex"),r=t("./choice");e.exports=i},{"./choice":248,"./randHex":251}],250:[function(t,e,n){function i(t,e){return t=null==t?r:t,e=null==e?o:e,t+(e-t)*a()}var a=t("./random"),r=t("../number/MIN_INT"),o=t("../number/MAX_INT");e.exports=i},{"../number/MAX_INT":218,"../number/MIN_INT":219,"./random":253}],251:[function(t,e,n){function i(t){t=t&&t>0?t:6;for(var e="";t--;)e+=a(r);return e}var a=t("./choice"),r="0123456789abcdef".split("");e.exports=i},{"./choice":248}],252:[function(t,e,n){function i(t,e){return t=null==t?a:~~t,e=null==e?r:~~e,Math.round(o(t-.5,e+.499999999999))}var a=t("../number/MIN_INT"),r=t("../number/MAX_INT"),o=t("./rand");e.exports=i},{"../number/MAX_INT":218,"../number/MIN_INT":219,"./rand":250}],253:[function(t,e,n){function i(){return i.get()}i.get=Math.random,e.exports=i},{}],254:[function(t,e,n){arguments[4][94][0].apply(n,arguments)},{dup:94}],255:[function(t,e,n){function i(t,e,n){return t=a(t),e=a(e),t.indexOf(e,n)!==-1}var a=t("../lang/toString");e.exports=i},{"../lang/toString":213}],256:[function(t,e,n){function i(t,e){return t=a(t),e=a(e),t.indexOf(e,t.length-e.length)!==-1}var a=t("../lang/toString");e.exports=i},{"../lang/toString":213}],257:[function(t,e,n){function i(t){return t=a(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#39;").replace(/"/g,"&quot;")}var a=t("../lang/toString");e.exports=i},{"../lang/toString":213}],258:[function(t,e,n){function i(t,e){return t=a(t),t.replace(/[\s\S]/g,function(t){return!e&&/[\x20-\x7E]/.test(t)?t:"\\u"+("000"+t.charCodeAt(0).toString(16)).slice(-4)})}var a=t("../lang/toString");e.exports=i},{"../lang/toString":213}],259:[function(t,e,n){function i(t,e,n){t=a(t);var i=function(t,n){return a(r(e,n))};return t.replace(n||o,i)}var a=t("../lang/toString"),r=t("../object/get"),o=/\{\{([^\}]+)\}\}/g;e.exports=i},{"../lang/toString":213,"../object/get":231}],260:[function(t,e,n){function i(t){return t=a(t),t.toLowerCase()}var a=t("../lang/toString");e.exports=i},{"../lang/toString":213}],261:[function(t,e,n){arguments[4][95][0].apply(n,arguments)},{"../lang/toString":213,"./WHITE_SPACES":254,dup:95}],262:[function(t,e,n){function i(t){return t=a(t),r(t).replace(/^\w|\s\w/g,o)}var a=t("../lang/toString"),r=t("./lowerCase"),o=t("./upperCase");e.exports=i},{"../lang/toString":213,"./lowerCase":260,"./upperCase":274}],263:[function(t,e,n){function i(t){return t=a(t),t.replace(r,"")}var a=t("../lang/toString"),r=/[^\x20\x2D0-9A-Z\x5Fa-z\xC0-\xD6\xD8-\xF6\xF8-\xFF]/g;e.exports=i},{"../lang/toString":213}],264:[function(t,e,n){function i(t,e){var n="";if(t=a(t),e=r(e),e<1)return"";for(;e>0;)e%2&&(n+=t),e=Math.floor(e/2),t+=t;return n}var a=t("../lang/toString"),r=t("../number/toInt");e.exports=i},{"../lang/toString":213,"../number/toInt":221}],265:[function(t,e,n){function i(t,e,n){t=a(t),e=r(e),n=r(n);var i=e.length,o=n.length;if(1!==o&&i!==o)throw new Error("Unequal number of searches and replacements");for(var s=-1;++s<i;)t=t.replace(e[s],n[1===o?0:s]);return t}var a=t("../lang/toString"),r=t("../lang/toArray");e.exports=i},{"../lang/toArray":211,"../lang/toString":213}],266:[function(t,e,n){function i(t){return t=a(t),t.search(/[\xC0-\xFF]/g)>-1&&(t=t.replace(/[\xC0-\xC5]/g,"A").replace(/[\xC6]/g,"AE").replace(/[\xC7]/g,"C").replace(/[\xC8-\xCB]/g,"E").replace(/[\xCC-\xCF]/g,"I").replace(/[\xD0]/g,"D").replace(/[\xD1]/g,"N").replace(/[\xD2-\xD6\xD8]/g,"O").replace(/[\xD9-\xDC]/g,"U").replace(/[\xDD]/g,"Y").replace(/[\xDE]/g,"P").replace(/[\xE0-\xE5]/g,"a").replace(/[\xE6]/g,"ae").replace(/[\xE7]/g,"c").replace(/[\xE8-\xEB]/g,"e").replace(/[\xEC-\xEF]/g,"i").replace(/[\xF1]/g,"n").replace(/[\xF2-\xF6\xF8]/g,"o").replace(/[\xF9-\xFC]/g,"u").replace(/[\xFE]/g,"p").replace(/[\xFD\xFF]/g,"y")),t}var a=t("../lang/toString");e.exports=i},{"../lang/toString":213}],267:[function(t,e,n){function i(t,e,n){return t=a(t),n=n||" ",t.length<e?t+r(n,e-t.length):t}var a=t("../lang/toString"),r=t("./repeat");e.exports=i},{"../lang/toString":213,"./repeat":264}],268:[function(t,e,n){arguments[4][96][0].apply(n,arguments)},{"../lang/toString":213,"./WHITE_SPACES":254,dup:96}],269:[function(t,e,n){function i(t,e){return t=a(t),null==e&&(e="-"),t=r(t),t=o(t),t=s(t).replace(/ +/g,e).toLowerCase()}var a=t("../lang/toString"),r=t("./replaceAccents"),o=t("./removeNonWord"),s=t("./trim");e.exports=i},{"../lang/toString":213,"./removeNonWord":263,"./replaceAccents":266,"./trim":270}],270:[function(t,e,n){arguments[4][97][0].apply(n,arguments)},{"../lang/toString":213,"./WHITE_SPACES":254,"./ltrim":261,"./rtrim":268,dup:97}],271:[function(t,e,n){function i(t){var e;return e=null===t||"null"===t?null:"true"===t||"false"!==t&&(t===a||"undefined"===t?a:""===t||isNaN(t)?t:parseFloat(t))}var a;e.exports=i},{}],272:[function(t,e,n){function i(t){return t=a(t).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#0*39;/g,"'").replace(/&quot;/g,'"')}var a=t("../lang/toString");e.exports=i},{"../lang/toString":213}],273:[function(t,e,n){function i(t){return t=a(t),t.replace(/(\w)(-)(\w)/g,"$1 $3")}var a=t("../lang/toString");e.exports=i},{"../lang/toString":213}],274:[function(t,e,n){arguments[4][98][0].apply(n,arguments)},{"../lang/toString":213,dup:98}],275:[function(t,e,n){arguments[4][181][0].apply(n,arguments)},{dup:181}],276:[function(t,e,n){arguments[4][190][0].apply(n,arguments)},{
"../array/slice":275,dup:190}],277:[function(t,e,n){function i(t){switch(l(t)){case"Object":return a(t);case"Array":return s(t);case"RegExp":return r(t);case"Date":return o(t);default:return t}}function a(t){return c(t)?u({},t):t}function r(t){var e="";return e+=t.multiline?"m":"",e+=t.global?"g":"",e+=t.ignorecase?"i":"",new RegExp(t.source,e)}function o(t){return new Date((+t))}function s(t){return t.slice()}var l=t("./kindOf"),c=t("./isPlainObject"),u=t("../object/mixIn");e.exports=i},{"../object/mixIn":287,"./isPlainObject":281,"./kindOf":282}],278:[function(t,e,n){arguments[4][198][0].apply(n,arguments)},{"../object/forOwn":284,"./clone":277,"./isPlainObject":281,"./kindOf":282,dup:198}],279:[function(t,e,n){arguments[4][85][0].apply(n,arguments)},{"./kindOf":282,dup:85}],280:[function(t,e,n){arguments[4][86][0].apply(n,arguments)},{"./isKind":279,dup:86}],281:[function(t,e,n){arguments[4][207][0].apply(n,arguments)},{dup:207}],282:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88}],283:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{"./hasOwn":285,dup:90}],284:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{"./forIn":283,"./hasOwn":285,dup:91}],285:[function(t,e,n){arguments[4][92][0].apply(n,arguments)},{dup:92}],286:[function(t,e,n){arguments[4][235][0].apply(n,arguments)},{"../lang/deepClone":278,"../lang/isObject":280,"./hasOwn":285,dup:235}],287:[function(t,e,n){arguments[4][93][0].apply(n,arguments)},{"./forOwn":284,dup:93}],288:[function(t,e,n){arguments[4][102][0].apply(n,arguments)},{dup:102,"mout/lang/createObject":289,"mout/lang/kindOf":290,"mout/object/hasOwn":293,"mout/object/mixIn":294}],289:[function(t,e,n){arguments[4][82][0].apply(n,arguments)},{"../object/mixIn":294,dup:82}],290:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88}],291:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{"./hasOwn":293,dup:90}],292:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{"./forIn":291,"./hasOwn":293,dup:91}],293:[function(t,e,n){arguments[4][92][0].apply(n,arguments)},{dup:92}],294:[function(t,e,n){arguments[4][93][0].apply(n,arguments)},{"./forOwn":292,dup:93}],295:[function(t,e,n){"use strict";var i=t("prime"),a=t("mout/function/bind"),r=i({bound:function(t){var e=this._bound||(this._bound={});return e[t]||(e[t]=a(this[t],this))}});e.exports=r},{"mout/function/bind":276,prime:288}],296:[function(t,e,n){"use strict";var i=t("prime"),a=t("mout/object/merge"),r=i({setOptions:function(t){var e=[{},this.options];return e.push.apply(e,arguments),this.options=a.apply(null,e),this}});e.exports=r},{"mout/object/merge":286,prime:288}],297:[function(t,e,n){(function(n,i){"use strict";var a=t("mout/lang/kindOf"),r=t("mout/time/now"),o=t("mout/array/forEach"),s=t("mout/array/indexOf"),l={timeout:{},frame:[],immediate:[]},c=function(t,e,n,i){var a=function(){u(t)};t.length||i(a);var r={callback:e,context:n};return t.push(r),function(){var e=s(t,r);e>-1&&t.splice(e,1)}},u=function(t){var e=r();o(t.splice(0),function(t){t.callback.call(t.context,e)})},d=function(t,e,n){return"Number"===a(e)?d.timeout(t,e,n):d.immediate(t,e)};i.process&&n.nextTick?d.immediate=function(t,e){return c(l.immediate,t,e,n.nextTick)}:i.setImmediate?d.immediate=function(t,e){return c(l.immediate,t,e,setImmediate)}:i.postMessage&&i.addEventListener?(addEventListener("message",function(t){t.source===i&&"@deferred"===t.data&&(t.stopPropagation(),u(l.immediate))},!0),d.immediate=function(t,e){return c(l.immediate,t,e,function(){postMessage("@deferred","*")})}):d.immediate=function(t,e){return c(l.immediate,t,e,function(t){setTimeout(t,0)})};var h=i.requestAnimationFrame||i.webkitRequestAnimationFrame||i.mozRequestAnimationFrame||i.oRequestAnimationFrame||i.msRequestAnimationFrame||function(t){setTimeout(t,1e3/60)};d.frame=function(t,e){return c(l.frame,t,e,h)};var p;d.timeout=function(t,e,n){var i=l.timeout;return p||(p=d.immediate(function(){p=null,l.timeout={}})),c(i[e]||(i[e]=[]),t,n,function(t){setTimeout(t,e)})},e.exports=d}).call(this,t("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{_process:1,"mout/array/forEach":301,"mout/array/indexOf":302,"mout/lang/kindOf":304,"mout/time/now":309}],298:[function(t,e,n){"use strict";var i=t("mout/array/indexOf"),a=t("mout/array/forEach"),r=t("./index"),o=t("./defer"),s=Array.prototype.slice,l=r({constructor:function(t){this._stoppable=t},on:function(t,e){var n=this._listeners||(this._listeners={}),a=n[t]||(n[t]=[]);return i(a,e)===-1&&a.push(e),this},off:function(t,e){var n,a=this._listeners;if(a&&(n=a[t])){var r=i(n,e);r>-1&&n.splice(r,1),n.length||delete a[t];for(var o in a)return this;delete this._listeners}return this},emit:function(t){var e=this,n=s.call(arguments,1),i=function(){var i,r=e._listeners;r&&(i=r[t])&&a(i.slice(0),function(t){var i=t.apply(e,n);if(e._stoppable)return i})};return n[n.length-1]===l.EMIT_SYNC?(n.pop(),i()):o(i),this}});l.EMIT_SYNC={},e.exports=l},{"./defer":297,"./index":299,"mout/array/forEach":301,"mout/array/indexOf":302}],299:[function(t,e,n){"use strict";var i=t("mout/object/hasOwn"),a=t("mout/object/mixIn"),r=t("mout/lang/createObject"),o=t("mout/lang/kindOf"),s=!0;try{Object.defineProperty({},"~",{}),Object.getOwnPropertyDescriptor({},"~")}catch(t){s=!1}var l=!{valueOf:0}.propertyIsEnumerable("valueOf"),c=["toString","valueOf"],u=/^constructor|inherits|mixin$/,d=function(t){var e=this.prototype;for(var n in t)if(!n.match(u)){if(s){var i=Object.getOwnPropertyDescriptor(t,n);if(i){Object.defineProperty(e,n,i);continue}}e[n]=t[n]}if(l)for(var a=0;n=c[a];a++){var r=t[n];r!==Object.prototype[n]&&(e[n]=r)}return this},h=function(t){"Function"===o(t)&&(t={constructor:t});var e=t.inherits,n=i(t,"constructor")?t.constructor:e?function(){return e.apply(this,arguments)}:function(){};if(e){a(n,e);var s=e.prototype,l=n.prototype=r(s);n.parent=s,l.constructor=n}n.implement||(n.implement=d);var c=t.mixin;if(c){"Array"!==o(c)&&(c=[c]);for(var u=0;u<c.length;u++)n.implement(r(c[u].prototype))}return n.implement(t)};e.exports=h},{"mout/lang/createObject":303,"mout/lang/kindOf":304,"mout/object/hasOwn":307,"mout/object/mixIn":308}],300:[function(t,e,n){"use strict";var i=t("mout/array/indexOf"),a=t("./index"),r=a({constructor:function(){this.length=0,this._values=[],this._keys=[]},set:function(t,e){var n=i(this._keys,t);return n===-1?(this._keys.push(t),this._values.push(e),this.length++):this._values[n]=e,this},get:function(t){var e=i(this._keys,t);return e===-1?null:this._values[e]},count:function(){return this.length},forEach:function(t,e){for(var n=0,i=this.length;n<i&&t.call(e,this._values[n],this._keys[n],this)!==!1;n++);return this},map:function(t,e){var n=new r;return this.forEach(function(i,a){n.set(a,t.call(e,i,a,this))},this),n},filter:function(t,e){var n=new r;return this.forEach(function(i,a){t.call(e,i,a,this)&&n.set(a,i)},this),n},every:function(t,e){var n=!0;return this.forEach(function(i,a){if(!t.call(e,i,a,this))return n=!1},this),n},some:function(t,e){var n=!1;return this.forEach(function(i,a){if(t.call(e,i,a,this))return!(n=!0)},this),n},indexOf:function(t){var e=i(this._values,t);return e>-1?this._keys[e]:null},remove:function(t){var e=i(this._values,t);return e!==-1?(this._values.splice(e,1),this.length--,this._keys.splice(e,1)[0]):null},unset:function(t){var e=i(this._keys,t);return e!==-1?(this._keys.splice(e,1),this.length--,this._values.splice(e,1)[0]):null},keys:function(){return this._keys.slice()},values:function(){return this._values.slice()}}),o=function(){return new r};o.prototype=r.prototype,e.exports=o},{"./index":299,"mout/array/indexOf":302}],301:[function(t,e,n){arguments[4][79][0].apply(n,arguments)},{dup:79}],302:[function(t,e,n){arguments[4][80][0].apply(n,arguments)},{dup:80}],303:[function(t,e,n){arguments[4][82][0].apply(n,arguments)},{"../object/mixIn":308,dup:82}],304:[function(t,e,n){arguments[4][88][0].apply(n,arguments)},{dup:88}],305:[function(t,e,n){arguments[4][90][0].apply(n,arguments)},{"./hasOwn":307,dup:90}],306:[function(t,e,n){arguments[4][91][0].apply(n,arguments)},{"./forIn":305,"./hasOwn":307,dup:91}],307:[function(t,e,n){arguments[4][92][0].apply(n,arguments)},{dup:92}],308:[function(t,e,n){arguments[4][93][0].apply(n,arguments)},{"./forOwn":306,dup:93}],309:[function(t,e,n){arguments[4][99][0].apply(n,arguments)},{dup:99}],310:[function(t,e,n){!function(t,i){"function"==typeof define&&define.amd?define(i):"object"==typeof n?e.exports=i():t.Sifter=i()}(this,function(){var t=function(t,e){this.items=t,this.settings=e||{diacritics:!0}};t.prototype.tokenize=function(t){if(t=a(String(t||"").toLowerCase()),!t||!t.length)return[];var e,n,i,o,l=[],c=t.split(/ +/);for(e=0,n=c.length;e<n;e++){if(i=r(c[e]),this.settings.diacritics)for(o in s)s.hasOwnProperty(o)&&(i=i.replace(new RegExp(o,"g"),s[o]));l.push({string:c[e],regex:new RegExp(i,"i")})}return l},t.prototype.iterator=function(t,e){var n;n=o(t)?Array.prototype.forEach||function(t){for(var e=0,n=this.length;e<n;e++)t(this[e],e,this)}:function(t){for(var e in this)this.hasOwnProperty(e)&&t(this[e],e,this)},n.apply(t,[e])},t.prototype.getScoreFunction=function(t,e){var n,a,r,o,s;n=this,t=n.prepareSearch(t,e),r=t.tokens,a=t.options.fields,o=r.length,s=t.options.nesting;var l=function(t,e){var n,i;return t?(t=String(t||""),i=t.search(e.regex),i===-1?0:(n=e.string.length/t.length,0===i&&(n+=.5),n)):0},c=function(){var t=a.length;return t?1===t?function(t,e){return l(i(e,a[0],s),t)}:function(e,n){for(var r=0,o=0;r<t;r++)o+=l(i(n,a[r],s),e);return o/t}:function(){return 0}}();return o?1===o?function(t){return c(r[0],t)}:"and"===t.options.conjunction?function(t){for(var e,n=0,i=0;n<o;n++){if(e=c(r[n],t),e<=0)return 0;i+=e}return i/o}:function(t){for(var e=0,n=0;e<o;e++)n+=c(r[e],t);return n/o}:function(){return 0}},t.prototype.getSortFunction=function(t,n){var a,r,o,s,l,c,u,d,h,p,f;if(o=this,t=o.prepareSearch(t,n),f=!t.query&&n.sort_empty||n.sort,h=function(t,e){return"$score"===t?e.score:i(o.items[e.id],t,n.nesting)},l=[],f)for(a=0,r=f.length;a<r;a++)(t.query||"$score"!==f[a].field)&&l.push(f[a]);if(t.query){for(p=!0,a=0,r=l.length;a<r;a++)if("$score"===l[a].field){p=!1;break}p&&l.unshift({field:"$score",direction:"desc"})}else for(a=0,r=l.length;a<r;a++)if("$score"===l[a].field){l.splice(a,1);break}for(d=[],a=0,r=l.length;a<r;a++)d.push("desc"===l[a].direction?-1:1);return c=l.length,c?1===c?(s=l[0].field,u=d[0],function(t,n){return u*e(h(s,t),h(s,n))}):function(t,n){var i,a,r;for(i=0;i<c;i++)if(r=l[i].field,a=d[i]*e(h(r,t),h(r,n)))return a;return 0}:null},t.prototype.prepareSearch=function(t,e){if("object"==typeof t)return t;e=n({},e);var i=e.fields,a=e.sort,r=e.sort_empty;return i&&!o(i)&&(e.fields=[i]),a&&!o(a)&&(e.sort=[a]),r&&!o(r)&&(e.sort_empty=[r]),{options:e,query:String(t||"").toLowerCase(),tokens:this.tokenize(t),total:0,items:[]}},t.prototype.search=function(t,e){var n,i,a,r,o=this;return i=this.prepareSearch(t,e),e=i.options,t=i.query,r=e.score||o.getScoreFunction(i),t.length?o.iterator(o.items,function(t,a){n=r(t),(e.filter===!1||n>0)&&i.items.push({score:n,id:a})}):o.iterator(o.items,function(t,e){i.items.push({score:1,id:e})}),a=o.getSortFunction(i,e),a&&i.items.sort(a),i.total=i.items.length,"number"==typeof e.limit&&(i.items=i.items.slice(0,e.limit)),i};var e=function(t,e){return"number"==typeof t&&"number"==typeof e?t>e?1:t<e?-1:0:(t=l(String(t||"")),e=l(String(e||"")),t>e?1:e>t?-1:0)},n=function(t,e){var n,i,a,r;for(n=1,i=arguments.length;n<i;n++)if(r=arguments[n])for(a in r)r.hasOwnProperty(a)&&(t[a]=r[a]);return t},i=function(t,e,n){if(t&&e){if(!n)return t[e];for(var i=e.split(".");i.length&&(t=t[i.shift()]););return t}},a=function(t){return(t+"").replace(/^\s+|\s+$|/g,"")},r=function(t){return(t+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},o=Array.isArray||"undefined"!=typeof $&&$.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s={a:"[aḀḁĂăÂâǍǎȺⱥȦȧẠạÄäÀàÁáĀāÃãÅåąĄÃąĄ]",b:"[b␢βΒB฿𐌁ᛒ]",c:"[cĆćĈĉČčĊċC̄c̄ÇçḈḉȻȼƇƈɕᴄＣｃ]",d:"[dĎďḊḋḐḑḌḍḒḓḎḏĐđD̦d̦ƉɖƊɗƋƌᵭᶁᶑȡᴅＤｄð]",e:"[eÉéÈèÊêḘḙĚěĔĕẼẽḚḛẺẻĖėËëĒēȨȩĘęᶒɆɇȄȅẾếỀềỄễỂểḜḝḖḗḔḕȆȇẸẹỆệⱸᴇＥｅɘǝƏƐε]",f:"[fƑƒḞḟ]",g:"[gɢ₲ǤǥĜĝĞğĢģƓɠĠġ]",h:"[hĤĥĦħḨḩẖẖḤḥḢḣɦʰǶƕ]",i:"[iÍíÌìĬĭÎîǏǐÏïḮḯĨĩĮįĪīỈỉȈȉȊȋỊịḬḭƗɨɨ̆ᵻᶖİiIıɪＩｉ]",j:"[jȷĴĵɈɉʝɟʲ]",k:"[kƘƙꝀꝁḰḱǨǩḲḳḴḵκϰ₭]",l:"[lŁłĽľĻļĹĺḶḷḸḹḼḽḺḻĿŀȽƚⱠⱡⱢɫɬᶅɭȴʟＬｌ]",n:"[nŃńǸǹŇňÑñṄṅŅņṆṇṊṋṈṉN̈n̈ƝɲȠƞᵰᶇɳȵɴＮｎŊŋ]",o:"[oØøÖöÓóÒòÔôǑǒŐőŎŏȮȯỌọƟɵƠơỎỏŌōÕõǪǫȌȍՕօ]",p:"[pṔṕṖṗⱣᵽƤƥᵱ]",q:"[qꝖꝗʠɊɋꝘꝙq̃]",r:"[rŔŕɌɍŘřŖŗṘṙȐȑȒȓṚṛⱤɽ]",s:"[sŚśṠṡṢṣꞨꞩŜŝŠšŞşȘșS̈s̈]",t:"[tŤťṪṫŢţṬṭƮʈȚțṰṱṮṯƬƭ]",u:"[uŬŭɄʉỤụÜüÚúÙùÛûǓǔŰűŬŭƯưỦủŪūŨũŲųȔȕ∪]",v:"[vṼṽṾṿƲʋꝞꝟⱱʋ]",w:"[wẂẃẀẁŴŵẄẅẆẇẈẉ]",x:"[xẌẍẊẋχ]",y:"[yÝýỲỳŶŷŸÿỸỹẎẏỴỵɎɏƳƴ]",z:"[zŹźẐẑŽžŻżẒẓẔẕƵƶ]"},l=function(){var t,e,n,i,a="",r={};for(n in s)if(s.hasOwnProperty(n))for(i=s[n].substring(2,s[n].length-1),a+=i,t=0,e=i.length;t<e;t++)r[i.charAt(t)]=n;var o=new RegExp("["+a+"]","g");return function(t){return t.replace(o,function(t){return r[t]}).toLowerCase()}}();return t})},{}],311:[function(t,e,n){"use strict";var i=t("./parser"),a=0,r=document.__counter=(parseInt(document.__counter||-1,36)+1).toString(36),o="uid:"+r,s=function(t,e){if(t===window)return"window";if(t===document)return"document";if(t===document.documentElement)return"html";if(e){var n=t.getAttribute(o);return n||(n=(a++).toString(36),t.setAttribute(o,n)),n}return t[o]||(t[o]=(a++).toString(36))},l=function(t){return s(t,!0)},c=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},u=0,d={GET_ELEMENT_BY_ID:function(t,e){return e="slick_"+u++,t.innerHTML='<a id="'+e+'"></a>',!!this.getElementById(e)},QUERY_SELECTOR:function(t){return t.innerHTML="_<style>:nth-child(2){}</style>",t.innerHTML='<a class="MiX"></a>',1===t.querySelectorAll(".MiX").length},EXPANDOS:function(t,e){return e="slick_"+u++,t._custom_property_=e,t._custom_property_===e},MATCHES_SELECTOR:function(t){t.className="MiX";var e=t.matchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector;if(e)try{e.call(t,":slick")}catch(n){return!!e.call(t,".MiX")&&e}return!1},GET_ELEMENTS_BY_CLASS_NAME:function(t){return t.innerHTML='<a class="f"></a><a class="b"></a>',1===t.getElementsByClassName("b").length&&(t.firstChild.className="b",2===t.getElementsByClassName("b").length&&(t.innerHTML='<a class="a"></a><a class="f b a"></a>',2===t.getElementsByClassName("a").length))},GET_ATTRIBUTE:function(t){var e="fus ro dah";return t.innerHTML='<a class="'+e+'"></a>',t.firstChild.getAttribute("class")===e}},h=function(t){this.document=t;var e=this.root=t.documentElement;this.tested={},this.uniqueID=this.has("EXPANDOS")?s:l,this.getAttribute=this.has("GET_ATTRIBUTE")?function(t,e){return t.getAttribute(e)}:function(t,e){return t=t.getAttributeNode(e),t&&t.specified?t.value:null},this.hasAttribute=e.hasAttribute?function(t,e){return t.hasAttribute(e)}:function(t,e){return t=t.getAttributeNode(e),!(!t||!t.specified)},this.contains=t.contains&&e.contains?function(t,e){return t.contains(e)}:e.compareDocumentPosition?function(t,e){return t===e||!!(16&t.compareDocumentPosition(e))}:function(t,e){do if(e===t)return!0;while(e=e.parentNode);return!1},this.sorter=e.compareDocumentPosition?function(t,e){return t.compareDocumentPosition&&e.compareDocumentPosition?4&t.compareDocumentPosition(e)?-1:t===e?0:1:0}:"sourceIndex"in e?function(t,e){return t.sourceIndex&&e.sourceIndex?t.sourceIndex-e.sourceIndex:0}:t.createRange?function(t,e){if(!t.ownerDocument||!e.ownerDocument)return 0;var n=t.ownerDocument.createRange(),i=e.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,0),i.setStart(e,0),i.setEnd(e,0),n.compareBoundaryPoints(Range.START_TO_END,i)}:null,this.failed={};var n=this.has("MATCHES_SELECTOR");n&&(this.matchesSelector=function(t,e){if(this.failed[e])return null;try{return n.call(t,e)}catch(t){return v.debug&&console.warn("matchesSelector failed on "+e),this.failed[e]=!0,null}}),this.has("QUERY_SELECTOR")&&(this.querySelectorAll=function(t,e){if(this.failed[e])return!0;var n,i,a,r,o;if(t!==this.document&&(r=e[0].combinator,i=t.getAttribute("id"),a=e,i||(o=t,i="__slick__",o.setAttribute("id",i)),e="#"+i+" "+a,(r.indexOf("~")>-1||r.indexOf("+")>-1)&&(t=t.parentNode,t||(n=!0))),!n)try{n=t.querySelectorAll(e.toString())}catch(t){v.debug&&console.warn("querySelectorAll failed on "+(a||e)),n=this.failed[a||e]=!0}return o&&o.removeAttribute("id"),n})};h.prototype.has=function(t){var e=this.tested,n=e[t];if(null!=n)return n;var i=this.root,a=this.document,r=a.createElement("div");r.setAttribute("style","display: none;"),i.appendChild(r);var o=d[t],s=!1;if(o)try{s=o.call(a,r)}catch(t){}return v.debug&&!s&&console.warn("document has no "+t),i.removeChild(r),e[t]=s};var p={" ":function(t,e,n){var i,a,r=!e.id,o=!e.tag,s=!e.classes;if(e.id&&t.getElementById&&this.has("GET_ELEMENT_BY_ID")&&(i=t.getElementById(e.id),i&&i.getAttribute("id")===e.id&&(a=[i],r=!0,"*"===e.tag&&(o=!0))),!a&&(e.classes&&t.getElementsByClassName&&this.has("GET_ELEMENTS_BY_CLASS_NAME")?(a=t.getElementsByClassName(e.classList),s=!0,"*"===e.tag&&(o=!0)):(a=t.getElementsByTagName(e.tag),"*"!==e.tag&&(o=!0)),!a||!a.length))return!1;for(var l=0;i=a[l++];)(o&&r&&s&&!e.attributes&&!e.pseudos||this.match(i,e,o,r,s))&&n(i);return!0},">":function(t,e,n){if(t=t.firstChild)do 1==t.nodeType&&this.match(t,e)&&n(t);while(t=t.nextSibling)},"+":function(t,e,n){for(;t=t.nextSibling;)if(1==t.nodeType){this.match(t,e)&&n(t);break}},"^":function(t,e,n){t=t.firstChild,t&&(1===t.nodeType?this.match(t,e)&&n(t):p["+"].call(this,t,e,n))},"~":function(t,e,n){for(;t=t.nextSibling;)1===t.nodeType&&this.match(t,e)&&n(t)},"++":function(t,e,n){p["+"].call(this,t,e,n),p["!+"].call(this,t,e,n)},"~~":function(t,e,n){p["~"].call(this,t,e,n),p["!~"].call(this,t,e,n)},"!":function(t,e,n){for(;t=t.parentNode;)t!==this.document&&this.match(t,e)&&n(t)},"!>":function(t,e,n){t=t.parentNode,t!==this.document&&this.match(t,e)&&n(t)},"!+":function(t,e,n){for(;t=t.previousSibling;)if(1==t.nodeType){this.match(t,e)&&n(t);break}},"!^":function(t,e,n){t=t.lastChild,t&&(1==t.nodeType?this.match(t,e)&&n(t):p["!+"].call(this,t,e,n))},"!~":function(t,e,n){for(;t=t.previousSibling;)1===t.nodeType&&this.match(t,e)&&n(t)}};h.prototype.search=function(t,e,n){t?!t.nodeType&&t.document&&(t=t.document):t=this.document;var a=i(e);if(!a||!a.length)throw new Error("invalid expression");n||(n=[]);var r,o=c(n)?function(t){n[n.length]=t}:function(t){n[n.length++]=t};if(a.length>1){r={};var l=o;o=function(t){var e=s(t);r[e]||(r[e]=!0,l(t))}}var u,d,h;t:for(var f=0;e=a[f++];)if(v.noQSA||!this.querySelectorAll||(d=this.querySelectorAll(t,e),d===!0))if(1===e.length)h=e[0],p[h.combinator].call(this,t,h,o);else{for(var m,g,b,y=[t],w=function(t){var e=s(t);b[e]||(b[e]=!0,g[g.length]=t)},x=0;h=e[x++];){g=[],b={};for(var k=0;m=y[k++];)p[h.combinator].call(this,m,h,w);if(!g.length)continue t;y=g}if(0===f)n=g;else for(var S=0;S<g.length;S++)o(g[S])}else if(d&&d.length)for(var x=0;u=d[x++];)u.nodeName>"@"&&o(u);return r&&n&&n.length>1&&this.sort(n),n},h.prototype.sort=function(t){return this.sorter?Array.prototype.sort.call(t,this.sorter):t};var f={empty:function(){return!(this&&1===this.nodeType||(this.innerText||this.textContent||"").length)},not:function(t){return!v.matches(this,t)},contains:function(t){return(this.innerText||this.textContent||"").indexOf(t)>-1},"first-child":function(){for(var t=this;t=t.previousSibling;)if(1==t.nodeType)return!1;return!0},"last-child":function(){for(var t=this;t=t.nextSibling;)if(1==t.nodeType)return!1;return!0},"only-child":function(){for(var t=this;t=t.previousSibling;)if(1==t.nodeType)return!1;for(var e=this;e=e.nextSibling;)if(1==e.nodeType)return!1;return!0},"first-of-type":function(){for(var t=this,e=t.nodeName;t=t.previousSibling;)if(t.nodeName==e)return!1;return!0},"last-of-type":function(){for(var t=this,e=t.nodeName;t=t.nextSibling;)if(t.nodeName==e)return!1;return!0},"only-of-type":function(){for(var t=this,e=this.nodeName;t=t.previousSibling;)if(t.nodeName==e)return!1;for(var n=this;n=n.nextSibling;)if(n.nodeName==e)return!1;return!0},enabled:function(){return!this.disabled},disabled:function(){return this.disabled},checked:function(){return this.checked||this.selected},selected:function(){return this.selected},focus:function(){var t=this.ownerDocument;return t.activeElement===this&&(this.href||this.type||v.hasAttribute(this,"tabindex"))},root:function(){return this===this.ownerDocument.documentElement}};h.prototype.match=function(t,e,n,i,a){if(!v.noQSA&&this.matchesSelector){var r=this.matchesSelector(t,e);if(null!==r)return r}if(!n&&e.tag){var o=t.nodeName.toLowerCase();if("*"===e.tag){if(o<"@")return!1}else if(o!=e.tag)return!1}if(!i&&e.id&&t.getAttribute("id")!==e.id)return!1;var s,l;if(!a&&e.classes){var c=this.getAttribute(t,"class");if(!c)return!1;for(l in e.classes)if(!RegExp("(^|\\s)"+e.classes[l]+"(\\s|$)").test(c))return!1}var u,d;if(e.attributes)for(s=0;l=e.attributes[s++];){var h=l.operator,p=l.escapedValue;if(u=l.name,d=l.value,h){var m=this.getAttribute(t,u);if(null==m)return!1;switch(h){case"^=":if(!RegExp("^"+p).test(m))return!1;break;case"$=":if(!RegExp(p+"$").test(m))return!1;break;case"~=":if(!RegExp("(^|\\s)"+p+"(\\s|$)").test(m))return!1;break;case"|=":if(!RegExp("^"+p+"(-|$)").test(m))return!1;break;case"=":if(m!==d)return!1;break;case"*=":if(m.indexOf(d)===-1)return!1;break;default:return!1}}else if(!this.hasAttribute(t,u))return!1}if(e.pseudos)for(s=0;l=e.pseudos[s++];){if(u=l.name,d=l.value,f[u])return f[u].call(t,d);if(null!=d){if(this.getAttribute(t,u)!==d)return!1}else if(!this.hasAttribute(t,u))return!1}return!0},h.prototype.matches=function(t,e){var n=i(e);if(1===n.length&&1===n[0].length)return this.match(t,n[0][0]);if(!v.noQSA&&this.matchesSelector){var a=this.matchesSelector(t,n);if(null!==a)return a}for(var r,o=this.search(this.document,e,{length:0}),s=0;r=o[s++];)if(t===r)return!0;return!1};var m={},g=function(t){var e=t||document;if(e.ownerDocument?e=e.ownerDocument:e.document&&(e=e.document),9!==e.nodeType)throw new TypeError("invalid document");var n=s(e);return m[n]||(m[n]=new h(e))},v=function(t,e){return v.search(t,e)};v.search=function(t,e,n){return g(e).search(e,t,n)},v.find=function(t,e){return g(e).search(e,t)[0]||null},v.getAttribute=function(t,e){return g(t).getAttribute(t,e)},v.hasAttribute=function(t,e){return g(t).hasAttribute(t,e)},v.contains=function(t,e){return g(t).contains(t,e)},v.matches=function(t,e){return g(t).matches(t,e)},v.sort=function(t){return t&&t.length>1&&g(t[0]).sort(t),t},v.parse=i,e.exports=v},{"./parser":313}],312:[function(t,e,n){(function(n){"use strict";e.exports="document"in n?t("./finder"):{parse:t("./parser")}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./finder":311,"./parser":313}],313:[function(t,e,n){"use strict";var i=/([-.*+?^${}()|[\]\/\\])/g,a=/\\/g,r=function(t){return(t+"").replace(i,"\\$1")},o=function(t){return(t+"").replace(a,"")},s=RegExp("^(?:\\s*(,)\\s*|\\s*(<combinator>+)\\s*|(\\s+)|(<unicode>+|\\*)|\\#(<unicode>+)|\\.(<unicode>+)|\\[\\s*(<unicode1>+)(?:\\s*([*^$!~|]?=)(?:\\s*(?:([\"']?)(.*?)\\9)))?\\s*\\](?!\\])|(:+)(<unicode>+)(?:\\((?:(?:([\"'])([^\\13]*)\\13)|((?:\\([^)]+\\)|[^()]*)+))\\))?)".replace(/<combinator>/,"["+r(">+~`!@$%^&={}\\;</")+"]").replace(/<unicode>/g,"(?:[\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])").replace(/<unicode1>/g,"(?:[:\\w\\u00a1-\\uFFFF-]|\\\\[^\\s0-9a-f])")),l=function(t){this.combinator=t||" ",this.tag="*"};l.prototype.toString=function(){if(!this.raw){var t,e,n="";if(n+=this.tag||"*",this.id&&(n+="#"+this.id),this.classes&&(n+="."+this.classList.join(".")),this.attributes)for(t=0;e=this.attributes[t++];)n+="["+e.name+(e.operator?e.operator+'"'+e.value+'"':"")+"]";if(this.pseudos)for(t=0;e=this.pseudos[t++];)n+=":"+e.name,e.value&&(n+="("+e.value+")");this.raw=n}return this.raw};var c=function(){this.length=0};c.prototype.toString=function(){if(!this.raw){for(var t,e="",n=0;t=this[n++];)1!==n&&(e+=" ")," "!==t.combinator&&(e+=t.combinator+" "),e+=t;this.raw=e}return this.raw};var u=function(t,e,n,i,a,s,u,d,h,p,f,m,g,v,b,y){var w,x;if((e||!this.length)&&(w=this[this.length++]=new c,e))return"";if(w||(w=this[this.length-1]),(n||i||!w.length)&&(x=w[w.length++]=new l(n)),x||(x=w[w.length-1]),a)x.tag=o(a);else if(s)x.id=o(s);else if(u){var k=o(u),S=x.classes||(x.classes={});if(!S[k]){S[k]=r(u);var C=x.classList||(x.classList=[]);C.push(k),C.sort()}}else g?(y=y||b,(x.pseudos||(x.pseudos=[])).push({type:1==m.length?"class":"element",name:o(g),escapedName:r(g),value:y?o(y):null,escapedValue:y?r(y):null})):d&&(f=f?r(f):null,(x.attributes||(x.attributes=[])).push({operator:h,name:o(d),escapedName:r(d),value:f?o(f):null,escapedValue:f?r(f):null}));return""},d=function(t){this.length=0;for(var e,n=this,i=t;t;){if(e=t.replace(s,function(){return u.apply(n,arguments)}),e===t)throw new Error(i+" is an invalid expression");t=e}};d.prototype.toString=function(){if(!this.raw){for(var t,e=[],n=0;t=this[n++];)e.push(t);this.raw=e.join(", ")}return this.raw};var h={},p=function(t){return null==t?null:(t=(""+t).replace(/^\s+|\s+$/g,""),h[t]||(h[t]=new d(t)))};e.exports=p},{}],314:[function(t,e,n){!function(t){"use strict";"function"==typeof define&&define.amd?define(t):"undefined"!=typeof e&&"undefined"!=typeof e.exports?e.exports=t():"undefined"!=typeof Package?Sortable=t():window.Sortable=t()}(function(){"use strict";function t(t,e){if(!t||!t.nodeType||1!==t.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(t);this.el=t,this.options=e=b({},e),t[P]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(t.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(t,e){t.setData("Text",e.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in n)!(i in e)&&(e[i]=n[i]);J(e);for(var r in this)"_"===r.charAt(0)&&(this[r]=this[r].bind(this));this.nativeDraggable=!e.forceFallback&&H,a(t,"mousedown",this._onTapStart),a(t,"touchstart",this._onTapStart),this.nativeDraggable&&(a(t,"dragover",this),a(t,"dragenter",this)),V.push(this._onDragOver),e.store&&this.sort(e.store.get(this))}function e(t){k&&k.state!==t&&(s(k,"display",t?"none":""),!t&&k.state&&S.insertBefore(k,y),k.state=t)}function n(t,e,n){if(t){n=n||B;do if(">*"===e&&t.parentNode===n||g(t,e))return t;while(t!==n&&(t=t.parentNode))}return null}function i(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.preventDefault()}function a(t,e,n){t.addEventListener(e,n,!1)}function r(t,e,n){t.removeEventListener(e,n,!1)}function o(t,e,n){if(t)if(t.classList)t.classList[n?"add":"remove"](e);else{var i=(" "+t.className+" ").replace(L," ").replace(" "+e+" "," ");t.className=(i+(n?" "+e:"")).replace(L," ")}}function s(t,e,n){var i=t&&t.style;if(i){if(void 0===n)return B.defaultView&&B.defaultView.getComputedStyle?n=B.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),void 0===e?n:n[e];e in i||(e="-webkit-"+e),i[e]=n+("string"==typeof n?"":"px")}}function l(t,e,n){if(t){var i=t.getElementsByTagName(e),a=0,r=i.length;if(n)for(;a<r;a++)n(i[a],a);return i}return[]}function c(t,e,n,i,a,r,o){var s=B.createEvent("Event"),l=(t||e[P]).options,c="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=e,s.from=a||e,s.item=i||e,s.clone=k,s.oldIndex=r,s.newIndex=o,e.dispatchEvent(s),l[c]&&l[c].call(t,s)}function u(t,e,n,i,a,r){var o,s,l=t[P],c=l.options.onMove;return o=B.createEvent("Event"),o.initEvent("move",!0,!0),o.to=e,o.from=t,o.dragged=n,o.draggedRect=i,o.related=a||e,o.relatedRect=r||e.getBoundingClientRect(),t.dispatchEvent(o),c&&(s=c.call(l,o)),s}function d(t){t.draggable=!1}function h(){G=!1}function p(t,e){var n=t.lastElementChild,i=n.getBoundingClientRect();return(e.clientY-(i.top+i.height)>5||e.clientX-(i.right+i.width)>5)&&n}function f(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,i=0;n--;)i+=e.charCodeAt(n);return i.toString(36)}function m(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t&&(t=t.previousElementSibling);)"TEMPLATE"!==t.nodeName.toUpperCase()&&g(t,e)&&n++;return n}function g(t,e){if(t){e=e.split(".");var n=e.shift().toUpperCase(),i=new RegExp("\\s("+e.join("|")+")(?=\\s)","g");return!(""!==n&&t.nodeName.toUpperCase()!=n||e.length&&((" "+t.className+" ").match(i)||[]).length!=e.length)}return!1}function v(t,e){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?t.call(i,n[0]):t.apply(i,n),n=void 0},e))}}function b(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}if("undefined"==typeof window||"undefined"==typeof window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var y,w,x,k,S,C,T,E,O,I,_,A,N,j,D,F,z,R={},L=/\s+/g,P="Sortable"+(new Date).getTime(),M=window,B=M.document,$=M.parseInt,H=!!("draggable"in B.createElement("div")),q=function(t){return t=B.createElement("x"),t.style.cssText="pointer-events:auto","auto"===t.style.pointerEvents}(),G=!1,U=Math.abs,V=([].slice,[]),Y=v(function(t,e,n){if(n&&e.scroll){var i,a,r,o,s=e.scrollSensitivity,l=e.scrollSpeed,c=t.clientX,u=t.clientY,d=window.innerWidth,h=window.innerHeight;if(E!==n&&(T=e.scroll,E=n,T===!0)){T=n;do if(T.offsetWidth<T.scrollWidth||T.offsetHeight<T.scrollHeight)break;while(T=T.parentNode)}T&&(i=T,a=T.getBoundingClientRect(),r=(U(a.right-c)<=s)-(U(a.left-c)<=s),o=(U(a.bottom-u)<=s)-(U(a.top-u)<=s)),r||o||(r=(d-c<=s)-(c<=s),o=(h-u<=s)-(u<=s),(r||o)&&(i=M)),R.vx===r&&R.vy===o&&R.el===i||(R.el=i,R.vx=r,R.vy=o,clearInterval(R.pid),i&&(R.pid=setInterval(function(){i===M?M.scrollTo(M.pageXOffset+r*l,M.pageYOffset+o*l):(o&&(i.scrollTop+=o*l),r&&(i.scrollLeft+=r*l))},24)))}},30),J=function(t){var e=t.group;e&&"object"==typeof e||(e=t.group={name:e}),["pull","put"].forEach(function(t){t in e||(e[t]=!0)}),t.groups=" "+e.name+(e.put.join?" "+e.put.join(" "):"")+" "};return t.prototype={constructor:t,_onTapStart:function(t){var e=this,i=this.el,a=this.options,r=t.type,o=t.touches&&t.touches[0],s=(o||t).target,l=s,u=a.filter;if(!("mousedown"===r&&0!==t.button||a.disabled)&&(s=n(s,a.draggable,i))){if(A=m(s,a.draggable),"function"==typeof u){if(u.call(this,t,s,this))return c(e,l,"filter",s,i,A),void t.preventDefault()}else if(u&&(u=u.split(",").some(function(t){if(t=n(l,t.trim(),i))return c(e,t,"filter",s,i,A),!0})))return void t.preventDefault();a.handle&&!n(l,a.handle,i)||this._prepareDragStart(t,o,s)}},_prepareDragStart:function(t,e,n){var i,r=this,s=r.el,c=r.options,u=s.ownerDocument;n&&!y&&n.parentNode===s&&(D=t,S=s,y=n,w=y.parentNode,C=y.nextSibling,j=c.group,i=function(){r._disableDelayedDrag(),y.draggable=!0,o(y,r.options.chosenClass,!0),r._triggerDragStart(e)},c.ignore.split(",").forEach(function(t){l(y,t.trim(),d)}),a(u,"mouseup",r._onDrop),a(u,"touchend",r._onDrop),a(u,"touchcancel",r._onDrop),c.delay?(a(u,"mouseup",r._disableDelayedDrag),a(u,"touchend",r._disableDelayedDrag),a(u,"touchcancel",r._disableDelayedDrag),a(u,"mousemove",r._disableDelayedDrag),a(u,"touchmove",r._disableDelayedDrag),r._dragStartTimer=setTimeout(i,c.delay)):i())},_disableDelayedDrag:function(){var t=this.el.ownerDocument;clearTimeout(this._dragStartTimer),r(t,"mouseup",this._disableDelayedDrag),r(t,"touchend",this._disableDelayedDrag),r(t,"touchcancel",this._disableDelayedDrag),r(t,"mousemove",this._disableDelayedDrag),r(t,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(t){t?(D={target:y,clientX:t.clientX,clientY:t.clientY},this._onDragStart(D,"touch")):this.nativeDraggable?(a(y,"dragend",this),a(S,"dragstart",this._onDragStart)):this._onDragStart(D,!0);try{B.selection?B.selection.empty():window.getSelection().removeAllRanges()}catch(t){}},_dragStarted:function(){S&&y&&(o(y,this.options.ghostClass,!0),t.active=this,
c(this,S,"start",y,S,A))},_emulateDragOver:function(){if(F){if(this._lastX===F.clientX&&this._lastY===F.clientY)return;this._lastX=F.clientX,this._lastY=F.clientY,q||s(x,"display","none");var t=B.elementFromPoint(F.clientX,F.clientY),e=t,n=" "+this.options.group.name,i=V.length;if(e)do{if(e[P]&&e[P].options.groups.indexOf(n)>-1){for(;i--;)V[i]({clientX:F.clientX,clientY:F.clientY,target:t,rootEl:e});break}t=e}while(e=e.parentNode);q||s(x,"display","")}},_onTouchMove:function(e){if(D){t.active||this._dragStarted(),this._appendGhost();var n=e.touches?e.touches[0]:e,i=n.clientX-D.clientX,a=n.clientY-D.clientY,r=e.touches?"translate3d("+i+"px,"+a+"px,0)":"translate("+i+"px,"+a+"px)";z=!0,F=n,s(x,"webkitTransform",r),s(x,"mozTransform",r),s(x,"msTransform",r),s(x,"transform",r),e.preventDefault()}},_appendGhost:function(){if(!x){var t,e=y.getBoundingClientRect(),n=s(y),i=this.options;x=y.cloneNode(!0),o(x,i.ghostClass,!1),o(x,i.fallbackClass,!0),s(x,"top",e.top-$(n.marginTop,10)),s(x,"left",e.left-$(n.marginLeft,10)),s(x,"width",e.width),s(x,"height",e.height),s(x,"opacity","0.8"),s(x,"position","fixed"),s(x,"zIndex","100000"),s(x,"pointerEvents","none"),i.fallbackOnBody&&B.body.appendChild(x)||S.appendChild(x),t=x.getBoundingClientRect(),s(x,"width",2*e.width-t.width),s(x,"height",2*e.height-t.height)}},_onDragStart:function(t,e){var n=t.dataTransfer,i=this.options;this._offUpEvents(),"clone"==j.pull&&(k=y.cloneNode(!0),s(k,"display","none"),S.insertBefore(k,y)),e?("touch"===e?(a(B,"touchmove",this._onTouchMove),a(B,"touchend",this._onDrop),a(B,"touchcancel",this._onDrop)):(a(B,"mousemove",this._onTouchMove),a(B,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,y)),a(B,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(t){var i,a,r,o=this.el,l=this.options,d=l.group,f=d.put,m=j===d,g=l.sort;if(void 0!==t.preventDefault&&(t.preventDefault(),!l.dragoverBubble&&t.stopPropagation()),z=!0,c(this,S,"over",y,S,t,t.target),j&&!l.disabled&&(m?g||(r=!S.contains(y)):j.pull&&f&&(j.name===d.name||f.indexOf&&~f.indexOf(j.name)))&&(void 0===t.rootEl||t.rootEl===this.el)){if(Y(t,l,this.el),G)return;if(i=n(t.target,l.draggable,o),a=y.getBoundingClientRect(),r)return e(!0),void(k||C?S.insertBefore(y,k||C):g||S.appendChild(y));if(0===o.children.length||o.children[0]===x||o===t.target&&(i=p(o,t))){if(i){if(i.animated)return;b=i.getBoundingClientRect()}e(m),u(S,o,y,a,i,b)!==!1&&(y.contains(o)||(o.appendChild(y),w=o),this._animate(a,y),i&&this._animate(b,i))}else if(i&&!i.animated&&i!==y&&void 0!==i.parentNode[P]){O!==i&&(O=i,I=s(i),_=s(i.parentNode));var v,b=i.getBoundingClientRect(),T=b.right-b.left,E=b.bottom-b.top,A=/left|right|inline/.test(I.cssFloat+I.display)||"flex"==_.display&&0===_["flex-direction"].indexOf("row"),N=i.offsetWidth>y.offsetWidth,D=i.offsetHeight>y.offsetHeight,F=(A?(t.clientX-b.left)/T:(t.clientY-b.top)/E)>.5,R=i.nextElementSibling,L=u(S,o,y,a,i,b);if(L!==!1){if(G=!0,setTimeout(h,30),e(m),1===L||L===-1)v=1===L;else if(A){var M=y.offsetTop,B=i.offsetTop;v=M===B?i.previousElementSibling===y&&!N||F&&N:B>M}else v=R!==y&&!D||F&&D;y.contains(o)||(v&&!R?o.appendChild(y):i.parentNode.insertBefore(y,v?R:i)),w=y.parentNode,this._animate(a,y),this._animate(b,i)}}}},_animate:function(t,e){var n=this.options.animation;if(n){var i=e.getBoundingClientRect();s(e,"transition","none"),s(e,"transform","translate3d("+(t.left-i.left)+"px,"+(t.top-i.top)+"px,0)"),e.offsetWidth,s(e,"transition","all "+n+"ms"),s(e,"transform","translate3d(0,0,0)"),clearTimeout(e.animated),e.animated=setTimeout(function(){s(e,"transition",""),s(e,"transform",""),e.animated=!1},n)}},_offUpEvents:function(){var t=this.el.ownerDocument;r(B,"touchmove",this._onTouchMove),r(t,"mouseup",this._onDrop),r(t,"touchend",this._onDrop),r(t,"touchcancel",this._onDrop)},_onDrop:function(e){var n=this.el,i=this.options;clearInterval(this._loopId),clearInterval(R.pid),clearTimeout(this._dragStartTimer),r(B,"mousemove",this._onTouchMove),this.nativeDraggable&&(r(B,"drop",this),r(n,"dragstart",this._onDragStart)),this._offUpEvents(),e&&(z&&(e.preventDefault(),!i.dropBubble&&e.stopPropagation()),x&&x.parentNode.removeChild(x),y&&(this.nativeDraggable&&r(y,"dragend",this),d(y),o(y,this.options.ghostClass,!1),o(y,this.options.chosenClass,!1),S!==w?(N=m(y,i.draggable),N>=0&&(c(null,w,"sort",y,S,A,N),c(this,S,"sort",y,S,A,N),c(null,w,"add",y,S,A,N),c(this,S,"remove",y,S,A,N))):(k&&k.parentNode.removeChild(k),y.nextSibling!==C&&(N=m(y,i.draggable),N>=0&&(c(this,S,"update",y,S,A,N),c(this,S,"sort",y,S,A,N)))),t.active&&(null!==N&&N!==-1||(N=A),this.originalEvent=e,c(this,S,"end",y,S,A,N),this.save()))),this._nulling()},_nulling:function(){S=y=w=x=C=k=T=E=D=F=z=N=O=I=j=t.active=null},handleEvent:function(t){var e=t.type;"dragover"===e||"dragenter"===e?y&&(this._onDragOver(t),i(t)):"drop"!==e&&"dragend"!==e||this._onDrop(t)},toArray:function(){for(var t,e=[],i=this.el.children,a=0,r=i.length,o=this.options;a<r;a++)t=i[a],n(t,o.draggable,this.el)&&e.push(t.getAttribute(o.dataIdAttr)||f(t));return e},sort:function(t){var e={},i=this.el;this.toArray().forEach(function(t,a){var r=i.children[a];n(r,this.options.draggable,i)&&(e[t]=r)},this),t.forEach(function(t){e[t]&&(i.removeChild(e[t]),i.appendChild(e[t]))})},save:function(){var t=this.options.store;t&&t.set(this)},closest:function(t,e){return n(t,e||this.options.draggable,this.el)},option:function(t,e){var n=this.options;return void 0===e?n[t]:(n[t]=e,void("group"===t&&J(n)))},destroy:function(){var t=this.el;t[P]=null,r(t,"mousedown",this._onTapStart),r(t,"touchstart",this._onTapStart),this.nativeDraggable&&(r(t,"dragover",this),r(t,"dragenter",this)),Array.prototype.forEach.call(t.querySelectorAll("[draggable]"),function(t){t.removeAttribute("draggable")}),V.splice(V.indexOf(this._onDragOver),1),this._onDrop(),this.el=t=null}},t.utils={on:a,off:r,css:s,find:l,is:function(t,e){return!!n(t,e,t)},extend:b,throttle:v,closest:n,toggleClass:o,index:m},t.create=function(e,n){return new t(e,n)},t.version="1.4.2",t})},{}],315:[function(t,e,n){!function(){function t(t,e,n){return t.call.apply(t.bind,arguments)}function n(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function i(e,a,r){return i=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t:n,i.apply(null,arguments)}function a(t,e){this.a=t,this.m=e||t,this.c=this.m.document}function r(t,e,n,i){if(e=t.c.createElement(e),n)for(var a in n)n.hasOwnProperty(a)&&("style"==a?e.style.cssText=n[a]:e.setAttribute(a,n[a]));return i&&e.appendChild(t.c.createTextNode(i)),e}function o(t,e,n){t=t.c.getElementsByTagName(e)[0],t||(t=document.documentElement),t.insertBefore(n,t.lastChild)}function s(t){t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){e=e||[],n=n||[];for(var i=t.className.split(/\s+/),a=0;a<e.length;a+=1){for(var r=!1,o=0;o<i.length;o+=1)if(e[a]===i[o]){r=!0;break}r||i.push(e[a])}for(e=[],a=0;a<i.length;a+=1){for(r=!1,o=0;o<n.length;o+=1)if(i[a]===n[o]){r=!0;break}r||e.push(i[a])}t.className=e.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function c(t,e){for(var n=t.className.split(/\s+/),i=0,a=n.length;i<a;i++)if(n[i]==e)return!0;return!1}function u(t){if("string"==typeof t.f)return t.f;var e=t.m.location.protocol;return"about:"==e&&(e=t.a.location.protocol),"https:"==e?"https:":"http:"}function d(t){return t.m.location.hostname||t.a.location.hostname}function h(t,e,n){function i(){c&&a&&s&&(c(l),c=null)}e=r(t,"link",{rel:"stylesheet",href:e,media:"all"});var a=!1,s=!0,l=null,c=n||null;at?(e.onload=function(){a=!0,i()},e.onerror=function(){a=!0,l=Error("Stylesheet failed to load"),i()}):setTimeout(function(){a=!0,i()},0),o(t,"head",e)}function p(t,e,n,i){var a=t.c.getElementsByTagName("head")[0];if(a){var o=r(t,"script",{src:e}),s=!1;return o.onload=o.onreadystatechange=function(){s||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(s=!0,n&&n(null),o.onload=o.onreadystatechange=null,"HEAD"==o.parentNode.tagName&&a.removeChild(o))},a.appendChild(o),setTimeout(function(){s||(s=!0,n&&n(Error("Script load timeout")))},i||5e3),o}return null}function f(){this.a=0,this.c=null}function m(t){return t.a++,function(){t.a--,v(t)}}function g(t,e){t.c=e,v(t)}function v(t){0==t.a&&t.c&&(t.c(),t.c=null)}function b(t){this.a=t||"-"}function y(t,e){this.c=t,this.f=4,this.a="n";var n=(e||"n4").match(/^([nio])([1-9])$/i);n&&(this.a=n[1],this.f=parseInt(n[2],10))}function w(t){return S(t)+" "+(t.f+"00")+" 300px "+x(t.c)}function x(t){var e=[];t=t.split(/,\s*/);for(var n=0;n<t.length;n++){var i=t[n].replace(/['"]/g,"");-1!=i.indexOf(" ")||/^\d/.test(i)?e.push("'"+i+"'"):e.push(i)}return e.join(",")}function k(t){return t.a+t.f}function S(t){var e="normal";return"o"===t.a?e="oblique":"i"===t.a&&(e="italic"),e}function C(t){var e=4,n="n",i=null;return t&&((i=t.match(/(normal|oblique|italic)/i))&&i[1]&&(n=i[1].substr(0,1).toLowerCase()),(i=t.match(/([1-9]00|normal|bold)/i))&&i[1]&&(/bold/i.test(i[1])?e=7:/[1-9]00/.test(i[1])&&(e=parseInt(i[1].substr(0,1),10)))),n+e}function T(t,e){this.c=t,this.f=t.m.document.documentElement,this.h=e,this.a=new b("-"),this.j=!1!==e.events,this.g=!1!==e.classes}function E(t){t.g&&l(t.f,[t.a.c("wf","loading")]),I(t,"loading")}function O(t){if(t.g){var e=c(t.f,t.a.c("wf","active")),n=[],i=[t.a.c("wf","loading")];e||n.push(t.a.c("wf","inactive")),l(t.f,n,i)}I(t,"inactive")}function I(t,e,n){t.j&&t.h[e]&&(n?t.h[e](n.c,k(n)):t.h[e]())}function _(){this.c={}}function A(t,e,n){var i,a=[];for(i in e)if(e.hasOwnProperty(i)){var r=t.c[i];r&&a.push(r(e[i],n))}return a}function N(t,e){this.c=t,this.f=e,this.a=r(this.c,"span",{"aria-hidden":"true"},this.f)}function j(t){o(t.c,"body",t.a)}function D(t){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+x(t.c)+";"+("font-style:"+S(t)+";font-weight:"+(t.f+"00")+";")}function F(t,e,n,i,a,r){this.g=t,this.j=e,this.a=i,this.c=n,this.f=a||3e3,this.h=r||void 0}function z(t,e,n,i,a,r,o){this.v=t,this.B=e,this.c=n,this.a=i,this.s=o||"BESbswy",this.f={},this.w=a||3e3,this.u=r||null,this.o=this.j=this.h=this.g=null,this.g=new N(this.c,this.s),this.h=new N(this.c,this.s),this.j=new N(this.c,this.s),this.o=new N(this.c,this.s),t=new y(this.a.c+",serif",k(this.a)),t=D(t),this.g.a.style.cssText=t,t=new y(this.a.c+",sans-serif",k(this.a)),t=D(t),this.h.a.style.cssText=t,t=new y("serif",k(this.a)),t=D(t),this.j.a.style.cssText=t,t=new y("sans-serif",k(this.a)),t=D(t),this.o.a.style.cssText=t,j(this.g),j(this.h),j(this.j),j(this.o)}function R(){if(null===ot){var t=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);ot=!!t&&(536>parseInt(t[1],10)||536===parseInt(t[1],10)&&11>=parseInt(t[2],10))}return ot}function L(t,e,n){for(var i in rt)if(rt.hasOwnProperty(i)&&e===t.f[rt[i]]&&n===t.f[rt[i]])return!0;return!1}function P(t){var e,n=t.g.a.offsetWidth,i=t.h.a.offsetWidth;(e=n===t.f.serif&&i===t.f["sans-serif"])||(e=R()&&L(t,n,i)),e?it()-t.A>=t.w?R()&&L(t,n,i)&&(null===t.u||t.u.hasOwnProperty(t.a.c))?B(t,t.v):B(t,t.B):M(t):B(t,t.v)}function M(t){setTimeout(i(function(){P(this)},t),50)}function B(t,e){setTimeout(i(function(){s(this.g.a),s(this.h.a),s(this.j.a),s(this.o.a),e(this.a)},t),0)}function $(t,e,n){this.c=t,this.a=e,this.f=0,this.o=this.j=!1,this.s=n}function H(t){0==--t.f&&t.j&&(t.o?(t=t.a,t.g&&l(t.f,[t.a.c("wf","active")],[t.a.c("wf","loading"),t.a.c("wf","inactive")]),I(t,"active")):O(t.a))}function q(t){this.j=t,this.a=new _,this.h=0,this.f=this.g=!0}function G(t,e,n,a,r){var o=0==--t.h;(t.f||t.g)&&setTimeout(function(){var t=r||null,s=a||null||{};if(0===n.length&&o)O(e.a);else{e.f+=n.length,o&&(e.j=o);var c,u=[];for(c=0;c<n.length;c++){var d=n[c],h=s[d.c],p=e.a,f=d;p.g&&l(p.f,[p.a.c("wf",f.c,k(f).toString(),"loading")]),I(p,"fontloading",f),p=null,null===st&&(st=!!window.FontFace&&(!(f=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))||42<parseInt(f[1],10))),p=st?new F(i(e.g,e),i(e.h,e),e.c,d,e.s,h):new z(i(e.g,e),i(e.h,e),e.c,d,e.s,t,h),u.push(p)}for(c=0;c<u.length;c++)u[c].start()}},0)}function U(t,e,n){var i=[],a=n.timeout;E(e);var i=A(t.a,n,t.c),r=new $(t.c,e,a);for(t.h=i.length,e=0,n=i.length;e<n;e++)i[e].load(function(e,n,i){G(t,r,e,n,i)})}function V(t,e){this.c=t,this.a=e}function Y(t,e,n){var i=u(t.c);return t=(t.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,""),i+"//"+t+"/"+e+".js"+(n?"?v="+n:"")}function J(t,e){this.c=t,this.a=e}function W(t,e,n){t?this.c=t:this.c=e+lt,this.a=[],this.f=[],this.g=n||""}function X(t,e){for(var n=e.length,i=0;i<n;i++){var a=e[i].split(":");3==a.length&&t.f.push(a.pop());var r="";2==a.length&&""!=a[1]&&(r=":"),t.a.push(a.join(r))}}function K(t){if(0==t.a.length)throw Error("No fonts to load!");if(-1!=t.c.indexOf("kit="))return t.c;for(var e=t.a.length,n=[],i=0;i<e;i++)n.push(t.a[i].replace(/ /g,"+"));return e=t.c+"?family="+n.join("%7C"),0<t.f.length&&(e+="&subset="+t.f.join(",")),0<t.g.length&&(e+="&text="+encodeURIComponent(t.g)),e}function Q(t){this.f=t,this.a=[],this.c={}}function Z(t){for(var e=t.f.length,n=0;n<e;n++){var i=t.f[n].split(":"),a=i[0].replace(/\+/g," "),r=["n4"];if(2<=i.length){var o,s=i[1];if(o=[],s)for(var s=s.split(","),l=s.length,c=0;c<l;c++){var u;if(u=s[c],u.match(/^[\w-]+$/)){var d=ht.exec(u.toLowerCase());if(null==d)u="";else{if(u=d[2],u=null==u||""==u?"n":dt[u],d=d[1],null==d||""==d)d="4";else var h=ut[d],d=h?h:isNaN(d)?"4":d.substr(0,1);u=[u,d].join("")}}else u="";u&&o.push(u)}0<o.length&&(r=o),3==i.length&&(i=i[2],o=[],i=i?i.split(","):o,0<i.length&&(i=ct[i[0]])&&(t.c[a]=i))}for(t.c[a]||(i=ct[a])&&(t.c[a]=i),i=0;i<r.length;i+=1)t.a.push(new y(a,r[i]))}}function tt(t,e){this.c=t,this.a=e}function et(t,e){this.c=t,this.a=e}function nt(t,e){this.c=t,this.f=e,this.a=[]}var it=Date.now||function(){return+new Date},at=!!window.FontFace;b.prototype.c=function(t){for(var e=[],n=0;n<arguments.length;n++)e.push(arguments[n].replace(/[\W_]+/g,"").toLowerCase());return e.join(this.a)},F.prototype.start=function(){var t=this.c.m.document,e=this,n=it(),i=new Promise(function(i,a){function r(){it()-n>=e.f?a():t.fonts.load(w(e.a),e.h).then(function(t){1<=t.length?i():setTimeout(r,25)},function(){a()})}r()}),a=new Promise(function(t,n){setTimeout(n,e.f)});Promise.race([a,i]).then(function(){e.g(e.a)},function(){e.j(e.a)})};var rt={D:"serif",C:"sans-serif"},ot=null;z.prototype.start=function(){this.f.serif=this.j.a.offsetWidth,this.f["sans-serif"]=this.o.a.offsetWidth,this.A=it(),P(this)};var st=null;$.prototype.g=function(t){var e=this.a;e.g&&l(e.f,[e.a.c("wf",t.c,k(t).toString(),"active")],[e.a.c("wf",t.c,k(t).toString(),"loading"),e.a.c("wf",t.c,k(t).toString(),"inactive")]),I(e,"fontactive",t),this.o=!0,H(this)},$.prototype.h=function(t){var e=this.a;if(e.g){var n=c(e.f,e.a.c("wf",t.c,k(t).toString(),"active")),i=[],a=[e.a.c("wf",t.c,k(t).toString(),"loading")];n||i.push(e.a.c("wf",t.c,k(t).toString(),"inactive")),l(e.f,i,a)}I(e,"fontinactive",t),H(this)},q.prototype.load=function(t){this.c=new a(this.j,t.context||this.j),this.g=!1!==t.events,this.f=!1!==t.classes,U(this,new T(this.c,t),t)},V.prototype.load=function(t){function e(){if(r["__mti_fntLst"+i]){var n,a=r["__mti_fntLst"+i](),o=[];if(a)for(var s=0;s<a.length;s++){var l=a[s].fontfamily;void 0!=a[s].fontStyle&&void 0!=a[s].fontWeight?(n=a[s].fontStyle+a[s].fontWeight,o.push(new y(l,n))):o.push(new y(l))}t(o)}else setTimeout(function(){e()},50)}var n=this,i=n.a.projectId,a=n.a.version;if(i){var r=n.c.m;p(this.c,Y(n,i,a),function(a){a?t([]):(r["__MonotypeConfiguration__"+i]=function(){return n.a},e())}).id="__MonotypeAPIScript__"+i}else t([])},J.prototype.load=function(t){var e,n,i=this.a.urls||[],a=this.a.families||[],r=this.a.testStrings||{},o=new f;for(e=0,n=i.length;e<n;e++)h(this.c,i[e],m(o));var s=[];for(e=0,n=a.length;e<n;e++)if(i=a[e].split(":"),i[1])for(var l=i[1].split(","),c=0;c<l.length;c+=1)s.push(new y(i[0],l[c]));else s.push(new y(i[0]));g(o,function(){t(s,r)})};var lt="//fonts.googleapis.com/css",ct={latin:"BESbswy","latin-ext":"çöüğş",cyrillic:"йяЖ",greek:"αβΣ",khmer:"កខគ",Hanuman:"កខគ"},ut={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},dt={i:"i",italic:"i",n:"n",normal:"n"},ht=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/,pt={Arimo:!0,Cousine:!0,Tinos:!0};tt.prototype.load=function(t){var e=new f,n=this.c,i=new W(this.a.api,u(n),this.a.text),a=this.a.families;X(i,a);var r=new Q(a);Z(r),h(n,K(i),m(e)),g(e,function(){t(r.a,r.c,pt)})},et.prototype.load=function(t){var e=this.a.id,n=this.c.m;e?p(this.c,(this.a.api||"https://use.typekit.net")+"/"+e+".js",function(e){if(e)t([]);else if(n.Typekit&&n.Typekit.config&&n.Typekit.config.fn){e=n.Typekit.config.fn;for(var i=[],a=0;a<e.length;a+=2)for(var r=e[a],o=e[a+1],s=0;s<o.length;s++)i.push(new y(r,o[s]));try{n.Typekit.load({events:!1,classes:!1,async:!0})}catch(t){}t(i)}},2e3):t([])},nt.prototype.load=function(t){var e=this.f.id,n=this.c.m,i=this;e?(n.__webfontfontdeckmodule__||(n.__webfontfontdeckmodule__={}),n.__webfontfontdeckmodule__[e]=function(e,n){for(var a=0,r=n.fonts.length;a<r;++a){var o=n.fonts[a];i.a.push(new y(o.name,C("font-weight:"+o.weight+";font-style:"+o.style)))}t(i.a)},p(this.c,u(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+d(this.c)+"/"+e+".js",function(e){e&&t([])})):t([])};var ft=new q(window);ft.a.c.custom=function(t,e){return new J(e,t)},ft.a.c.fontdeck=function(t,e){return new nt(e,t)},ft.a.c.monotype=function(t,e){return new V(e,t)},ft.a.c.typekit=function(t,e){return new et(e,t)},ft.a.c.google=function(t,e){return new tt(e,t)};var mt={load:i(ft.load,ft)};"function"==typeof define&&define.amd?define(function(){return mt}):"undefined"!=typeof e&&e.exports?e.exports=mt:(window.WebFont=mt,window.WebFontConfig&&ft.load(window.WebFontConfig))}()},{}],"ext/tooltips":[function(t,e,n){!function(){function t(e,n,i){var a=t.resolve(e);if(null==a){i=i||e,n=n||"root";var r=new Error('Failed to fakeRequire "'+i+'" from "'+n+'"');throw r.path=i,r.parent=n,r.fakeRequire=!0,r}var o=t.modules[a];if(!o._resolving&&!o.exports){var s={};s.exports={},s.client=s.component=!0,o._resolving=!0,o.call(this,s.exports,t.relative(a),s),delete o._resolving,o.exports=s.exports}return o.exports}t.modules={},t.aliases={},t.resolve=function(e){"/"===e.charAt(0)&&(e=e.slice(1));for(var n=[e,e+".js",e+".json",e+"/index.js",e+"/index.json"],i=0;i<n.length;i++){var e=n[i];if(t.modules.hasOwnProperty(e))return e;if(t.aliases.hasOwnProperty(e))return t.aliases[e]}},t.normalize=function(t,e){var n=[];if("."!=e.charAt(0))return e;t=t.split("/"),e=e.split("/");for(var i=0;i<e.length;++i)".."==e[i]?t.pop():"."!=e[i]&&""!=e[i]&&n.push(e[i]);return t.concat(n).join("/")},t.register=function(e,n){t.modules[e]=n},t.alias=function(e,n){if(!t.modules.hasOwnProperty(e))throw new Error('Failed to alias "'+e+'", it does not exist');t.aliases[n]=e},t.relative=function(e){function n(t,e){for(var n=t.length;n--;)if(t[n]===e)return n;return-1}function i(n){var a=i.resolve(n);return t(a,e,n)}var a=t.normalize(e,"..");return i.resolve=function(i){var r=i.charAt(0);if("/"==r)return i.slice(1);if("."==r)return t.normalize(a,i);var o=e.split("/"),s=n(o,"deps")+1;return s||(s=0),i=o.slice(0,s+1).join("/")+"/deps/"+i},i.exists=function(e){return t.modules.hasOwnProperty(i.resolve(e))},i},t.register("darsain-position/index.js",Function("exports, fakeRequire, module","'use strict';\n        \n        /**\n         * Transport.\n         */\n        module.exports = position;\n        \n        /**\n         * Globals.\n         */\n        var win = window;\n        var doc = win.document;\n        var docEl = doc.documentElement;\n        \n        /**\n         * Poor man's shallow object extend.\n         *\n         * @param {Object} a\n         * @param {Object} b\n         *\n         * @return {Object}\n         */\n        function extend(a, b) {\n        \tfor (var key in b) {\n        \t\ta[key] = b[key];\n        \t}\n        \treturn a;\n        }\n        \n        /**\n         * Checks whether object is window.\n         *\n         * @param {Object} obj\n         *\n         * @return {Boolean}\n         */\n        function isWin(obj) {\n        \treturn obj && obj.setInterval != null;\n        }\n        \n        /**\n         * Returns element's object with `left`, `top`, `bottom`, `right`, `width`, and `height`\n         * properties indicating the position and dimensions of element on a page.\n         *\n         * @param {Element} element\n         *\n         * @return {Object}\n         */\n        function position(element) {\n        \tvar winTop = win.pageYOffset || docEl.scrollTop;\n        \tvar winLeft = win.pageXOffset || docEl.scrollLeft;\n        \tvar box = { left: 0, right: 0, top: 0, bottom: 0, width: 0, height: 0 };\n        \n        \tif (isWin(element)) {\n        \t\tbox.width = win.innerWidth || docEl.clientWidth;\n        \t\tbox.height = win.innerHeight || docEl.clientHeight;\n        \t} else if (docEl.contains(element) && element.getBoundingClientRect != null) {\n        \t\textend(box, element.getBoundingClientRect());\n        \t\t// width & height don't exist in <IE9\n        \t\tbox.width = box.right - box.left;\n        \t\tbox.height = box.bottom - box.top;\n        \t} else {\n        \t\treturn box;\n        \t}\n        \n        \tbox.top = box.top + winTop - docEl.clientTop;\n        \tbox.left = box.left + winLeft - docEl.clientLeft;\n        \tbox.right = box.left + box.width;\n        \tbox.bottom = box.top + box.height;\n        \n        \treturn box;\n        }//# sourceURL=darsain-position/index.js")),t.register("component-classes/index.js",Function("exports, fakeRequire, module","/**\n         * Module dependencies.\n         */\n        \n        var index = fakeRequire('indexof');\n        \n        /**\n         * Whitespace regexp.\n         */\n        \n        var re = /\\s+/;\n        \n        /**\n         * toString reference.\n         */\n        \n        var toString = Object.prototype.toString;\n        \n        /**\n         * Wrap `el` in a `ClassList`.\n         *\n         * @param {Element} el\n         * @return {ClassList}\n         * @api public\n         */\n        \n        module.exports = function(el){\n          return new ClassList(el);\n        };\n        \n        /**\n         * Initialize a new ClassList for `el`.\n         *\n         * @param {Element} el\n         * @api private\n         */\n        \n        function ClassList(el) {\n          if (!el) throw new Error('A DOM element reference is fakeRequired');\n          this.el = el;\n          this.list = el.classList;\n        }\n        \n        /**\n         * Add class `name` if not already present.\n         *\n         * @param {String} name\n         * @return {ClassList}\n         * @api public\n         */\n        \n        ClassList.prototype.add = function(name){\n          // classList\n          if (this.list) {\n            this.list.add(name);\n            return this;\n          }\n        \n          // fallback\n          var arr = this.array();\n          var i = index(arr, name);\n          if (!~i) arr.push(name);\n          this.el.className = arr.join(' ');\n          return this;\n        };\n        \n        /**\n         * Remove class `name` when present, or\n         * pass a regular expression to remove\n         * any which match.\n         *\n         * @param {String|RegExp} name\n         * @return {ClassList}\n         * @api public\n         */\n        \n        ClassList.prototype.remove = function(name){\n          if ('[object RegExp]' == toString.call(name)) {\n            return this.removeMatching(name);\n          }\n        \n          // classList\n          if (this.list) {\n            this.list.remove(name);\n            return this;\n          }\n        \n          // fallback\n          var arr = this.array();\n          var i = index(arr, name);\n          if (~i) arr.splice(i, 1);\n          this.el.className = arr.join(' ');\n          return this;\n        };\n        \n        /**\n         * Remove all classes matching `re`.\n         *\n         * @param {RegExp} re\n         * @return {ClassList}\n         * @api private\n         */\n        \n        ClassList.prototype.removeMatching = function(re){\n          var arr = this.array();\n          for (var i = 0; i < arr.length; i++) {\n            if (re.test(arr[i])) {\n              this.remove(arr[i]);\n            }\n          }\n          return this;\n        };\n        \n        /**\n         * Toggle class `name`.\n         *\n         * @param {String} name\n         * @return {ClassList}\n         * @api public\n         */\n        \n        ClassList.prototype.toggle = function(name){\n          // classList\n          if (this.list) {\n            this.list.toggle(name);\n            return this;\n          }\n        \n          // fallback\n          if (this.has(name)) {\n            this.remove(name);\n          } else {\n            this.add(name);\n          }\n          return this;\n        };\n        \n        /**\n         * Return an array of classes.\n         *\n         * @return {Array}\n         * @api public\n         */\n        \n        ClassList.prototype.array = function(){\n          var str = this.el.className.replace(/^\\s+|\\s+$/g, '');\n          var arr = str.split(re);\n          if ('' === arr[0]) arr.shift();\n          return arr;\n        };\n        \n        /**\n         * Check if class `name` is present.\n         *\n         * @param {String} name\n         * @return {ClassList}\n         * @api public\n         */\n        \n        ClassList.prototype.has =\n        ClassList.prototype.contains = function(name){\n          return this.list\n            ? this.list.contains(name)\n            : !! ~index(this.array(), name);\n        };\n        //# sourceURL=component-classes/index.js")),t.register("darsain-tooltip/index.js",Function("exports, fakeRequire, module","'use strict';\n        \n        /**\n         * Dependencies.\n         */\n        var evt = fakeRequire('event');\n        var classes = fakeRequire('classes');\n        var indexOf = fakeRequire('indexof');\n        var position = fakeRequire('position');\n        \n        /**\n         * Globals.\n         */\n        var win = window;\n        var doc = win.document;\n        var body = doc.body;\n        var verticalPlaces = ['top', 'bottom'];\n        \n        /**\n         * Transport.\n         */\n        module.exports = Tooltip;\n        \n        /**\n         * Prototypal inheritance.\n         *\n         * @param {Object} o\n         *\n         * @return {Object}\n         */\n        var objectCreate = Object.create || (function () {\n        \tfunction F() {}\n        \treturn function (o) {\n        \t\tF.prototype = o;\n        \t\treturn new F();\n        \t};\n        })();\n        \n        /**\n         * Poor man's shallow object extend.\n         *\n         * @param {Object} a\n         * @param {Object} b\n         *\n         * @return {Object}\n         */\n        function extend(a, b) {\n        \tfor (var key in b) {\n        \t\ta[key] = b[key];\n        \t}\n        \treturn a;\n        }\n        \n        /**\n         * Parse integer from strings like '-50px'.\n         *\n         * @param {Mixed} value\n         *\n         * @return {Integer}\n         */\n        function parsePx(value) {\n        \treturn 0 | Math.round(String(value).replace(/[^\\-0-9.]/g, ''));\n        }\n        \n        /**\n         * Get computed style of element.\n         *\n         * @param {Element} element\n         *\n         * @type {String}\n         */\n        var style = win.getComputedStyle ? function style(element, name) {\n        \treturn win.getComputedStyle(element, null)[name];\n        } : function style(element, name) {\n        \treturn element.currentStyle[name];\n        };\n        \n        /**\n         * Returns transition duration of element in ms.\n         *\n         * @param {Element} element\n         *\n         * @return {Int}\n         */\n        function transitionDuration(element) {\n        \tvar duration = String(style(element, transitionDuration.propName));\n        \tvar match = duration.match(/([0-9.]+)([ms]{1,2})/);\n        \tif (match) {\n        \t\tduration = Number(match[1]);\n        \t\tif (match[2] === 's') {\n        \t\t\tduration *= 1000;\n        \t\t}\n        \t}\n        \treturn 0|duration;\n        }\n        transitionDuration.propName = (function () {\n        \tvar element = doc.createElement('div');\n        \tvar names = ['transitionDuration', 'webkitTransitionDuration'];\n        \tvar value = '1s';\n        \tfor (var i = 0; i < names.length; i++) {\n        \t\telement.style[names[i]] = value;\n        \t\tif (element.style[names[i]] === value) {\n        \t\t\treturn names[i];\n        \t\t}\n        \t}\n        }());\n        \n        /**\n         * Tooltip construnctor.\n         *\n         * @param {String|Element} content\n         * @param {Object}         options\n         *\n         * @return {Tooltip}\n         */\n        function Tooltip(content, options) {\n        \tif (!(this instanceof Tooltip)) {\n        \t\treturn new Tooltip(content, options);\n        \t}\n        \tthis.hidden = 1;\n        \tthis.options = extend(objectCreate(Tooltip.defaults), options);\n        \tthis._createElement();\n        \tthis.content(content);\n        }\n        \n        /**\n         * Creates a tooltip element.\n         *\n         * @return {Void}\n         */\n        Tooltip.prototype._createElement = function () {\n        \tthis.element = doc.createElement('div');\n        \tthis.classes = classes(this.element);\n        \tthis.classes.add(this.options.baseClass);\n        \tvar propName;\n        \tfor (var i = 0; i < Tooltip.classTypes.length; i++) {\n        \t\tpropName = Tooltip.classTypes[i] + 'Class';\n        \t\tif (this.options[propName]) {\n        \t\t\tthis.classes.add(this.options[propName]);\n        \t\t}\n        \t}\n        };\n        \n        /**\n         * Changes tooltip's type class type.\n         *\n         * @param {String} name\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.type = function (name) {\n        \treturn this.changeClassType('type', name);\n        };\n        \n        /**\n         * Changes tooltip's effect class type.\n         *\n         * @param {String} name\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.effect = function (name) {\n        \treturn this.changeClassType('effect', name);\n        };\n        \n        /**\n         * Changes class type.\n         *\n         * @param {String} propName\n         * @param {String} newClass\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.changeClassType = function (propName, newClass) {\n        \tpropName += 'Class';\n        \tif (this.options[propName]) {\n        \t\tthis.classes.remove(this.options[propName]);\n        \t}\n        \tthis.options[propName] = newClass;\n        \tif (newClass) {\n        \t\tthis.classes.add(newClass);\n        \t}\n        \treturn this;\n        };\n        \n        /**\n         * Updates tooltip's dimensions.\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.updateSize = function () {\n        \tif (this.hidden) {\n        \t\tthis.element.style.visibility = 'hidden';\n        \t\twindow.document.body.appendChild(this.element);\n        \t}\n        \tthis.width = this.element.offsetWidth;\n        \tthis.height = this.element.offsetHeight;\n        \tif (this.spacing == null) {\n        \t\tthis.spacing = this.options.spacing != null ? this.options.spacing : parsePx(style(this.element, 'top'));\n        \t}\n        \tif (this.offset == null) {\n        \t\tthis.offset = this.options.offset != null ? this.options.offset : 0;\n    \t}\n        \tif (this.hidden) {\n        \t\twindow.document.body.removeChild(this.element);\n        \t\tthis.element.style.visibility = '';\n        \t} else {\n        \t\tthis.position();\n        \t}\n        \treturn this;\n        };\n        \n        /**\n         * Change tooltip content.\n         *\n         * When tooltip is visible, its size is automatically\n         * synced and tooltip correctly repositioned.\n         *\n         * @param {String|Element} content\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.content = function (content) {\n        \tif (typeof content === 'object') {\n        \t\tthis.element.innerHTML = '';\n        \t\tthis.element.appendChild(content);\n        \t} else {\n        \t\tthis.element.innerHTML = content;\n        \t}\n        \tthis.updateSize();\n        \treturn this;\n        };\n        \n        /**\n         * Pick new place tooltip should be displayed at.\n         *\n         * When the tooltip is visible, it is automatically positioned there.\n         *\n         * @param {String} place\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.place = function (place) {\n        \tthis.options.place = place;\n        \tif (!this.hidden) {\n        \t\tthis.position();\n        \t}\n        \treturn this;\n        };\n        \n        /**\n         * Attach tooltip to an element.\n         *\n         * @param {Element} element\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.attach = function (element) {\n        \tthis.attachedTo = element;\n        \tif (!this.hidden) {\n        \t\tthis.position();\n        \t}\n        \treturn this;\n        };\n        \n        /**\n         * Detach tooltip from element.\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.detach = function () {\n        \tthis.hide();\n        \tthis.attachedTo = null;\n        \treturn this;\n        };\n        \n        /**\n         * Pick the most reasonable place for target position.\n         *\n         * @param {Object} target\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype._pickPlace = function (target) {\n        \tif (!this.options.auto) {\n        \t\treturn this.options.place;\n        \t}\n        \tvar winPos = position(win);\n        \tvar place = this.options.place.split('-');\n        \tvar spacing = this.spacing;\n        \n        \tif (~indexOf(verticalPlaces, place[0])) {\n        \t\tif (target.top - this.height - spacing <= winPos.top) {\n        \t\t\tplace[0] = 'bottom';\n        \t\t} else if (target.bottom + this.height + spacing >= winPos.bottom) {\n        \t\t\tplace[0] = 'top';\n        \t\t}\n        \t\tswitch (place[1]) {\n        \t\t\tcase 'left':\n        \t\t\t\tif (target.right - this.width <= winPos.left) {\n        \t\t\t\t\tplace[1] = 'right';\n        \t\t\t\t}\n        \t\t\t\tbreak;\n        \t\t\tcase 'right':\n        \t\t\t\tif (target.left + this.width >= winPos.right) {\n        \t\t\t\t\tplace[1] = 'left';\n        \t\t\t\t}\n        \t\t\t\tbreak;\n        \t\t\tdefault:\n        \t\t\t\tif (target.left + target.width / 2 + this.width / 2 >= winPos.right) {\n        \t\t\t\t\tplace[1] = 'left';\n        \t\t\t\t} else if (target.right - target.width / 2 - this.width / 2 <= winPos.left) {\n        \t\t\t\t\tplace[1] = 'right';\n        \t\t\t\t}\n        \t\t}\n        \t} else {\n        \t\tif (target.left - this.width - spacing <= winPos.left) {\n        \t\t\tplace[0] = 'right';\n        \t\t} else if (target.right + this.width + spacing >= winPos.right) {\n        \t\t\tplace[0] = 'left';\n        \t\t}\n        \t\tswitch (place[1]) {\n        \t\t\tcase 'top':\n        \t\t\t\tif (target.bottom - this.height <= winPos.top) {\n        \t\t\t\t\tplace[1] = 'bottom';\n        \t\t\t\t}\n        \t\t\t\tbreak;\n        \t\t\tcase 'bottom':\n        \t\t\t\tif (target.top + this.height >= winPos.bottom) {\n        \t\t\t\t\tplace[1] = 'top';\n        \t\t\t\t}\n        \t\t\t\tbreak;\n        \t\t\tdefault:\n        \t\t\t\tif (target.top + target.height / 2 + this.height / 2 >= winPos.bottom) {\n        \t\t\t\t\tplace[1] = 'top';\n        \t\t\t\t} else if (target.bottom - target.height / 2 - this.height / 2 <= winPos.top) {\n        \t\t\t\t\tplace[1] = 'bottom';\n        \t\t\t\t}\n        \t\t}\n        \t}\n        \n        \treturn place.join('-');\n        };\n        \n        /**\n         * Position the element to an element or a specific coordinates.\n         *\n         * @param {Integer|Element} x\n         * @param {Integer}         y\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.position = function (x, y) {\n        \tif (this.attachedTo) {\n        \t\tx = this.attachedTo;\n        \t}\n        \tif (x == null && this._p) {\n        \t\tx = this._p[0];\n        \t\ty = this._p[1];\n        \t} else {\n        \t\tthis._p = arguments;\n        \t}\n        \tvar target = typeof x === 'number' ? {\n        \t\tleft: 0|x,\n        \t\tright: 0|x,\n        \t\ttop: 0|y,\n        \t\tbottom: 0|y,\n        \t\twidth: 0,\n        \t\theight: 0\n        \t} : position(x);\n        \tvar spacing = Number(this.spacing), offset = Number(this.offset);\n        \tvar newPlace = this._pickPlace(target);\n        \n        \t// Add/Change place class when necessary\n        \tif (newPlace !== this.curPlace) {\n        \t\tif (this.curPlace) {\n        \t\t\tthis.classes.remove(this.curPlace);\n        \t\t}\n        \t\tthis.classes.add(newPlace);\n        \t\tthis.curPlace = newPlace;\n        \t}\n        \n        \t// Position the tip\n        \tvar top, left;\n        \tswitch (this.curPlace) {\n        \t\tcase 'top':\n        \t\t\ttop = target.top - this.height - spacing;\n        \t\t\tleft = target.left + target.width / 2 - this.width / 2;\n        \t\t\tbreak;\n        \t\tcase 'top-left':\n        \t\t\ttop = target.top - this.height - spacing;\n        \t\t\tleft = target.right - this.width - offset;\n        \t\t\tbreak;\n        \t\tcase 'top-right':\n        \t\t\ttop = target.top - this.height - spacing;\n        \t\t\tleft = target.left + offset;\n        \t\t\tbreak;\n        \n        \t\tcase 'bottom':\n        \t\t\ttop = target.bottom + spacing;\n        \t\t\tleft = target.left + target.width / 2 - this.width / 2;\n        \t\t\tbreak;\n        \t\tcase 'bottom-left':\n        \t\t\ttop = target.bottom + spacing;\n        \t\t\tleft = target.right - this.width - offset;\n        \t\t\tbreak;\n        \t\tcase 'bottom-right':\n        \t\t\ttop = target.bottom + spacing;\n        \t\t\tleft = target.left + offset;\n        \t\t\tbreak;\n        \n        \t\tcase 'left':\n        \t\t\ttop = target.top + target.height / 2 - this.height / 2;\n        \t\t\tleft = target.left - this.width - spacing;\n        \t\t\tbreak;\n        \t\tcase 'left-top':\n        \t\t\ttop = target.bottom - this.height;\n        \t\t\tleft = target.left - this.width - spacing;\n        \t\t\tbreak;\n        \t\tcase 'left-bottom':\n        \t\t\ttop = target.top;\n        \t\t\tleft = target.left - this.width - spacing;\n        \t\t\tbreak;\n        \n        \t\tcase 'right':\n        \t\t\ttop = target.top + target.height / 2 - this.height / 2;\n        \t\t\tleft = target.right + spacing;\n        \t\t\tbreak;\n        \t\tcase 'right-top':\n        \t\t\ttop = target.bottom - this.height;\n        \t\t\tleft = target.right + spacing;\n        \t\t\tbreak;\n        \t\tcase 'right-bottom':\n        \t\t\ttop = target.top;\n        \t\t\tleft = target.right + spacing;\n        \t\t\tbreak;\n        \t}\n        \n        \t// Set tip position & class\n        \tthis.element.style.top = Math.round(top) + 'px';\n        \tthis.element.style.left = Math.round(left) + 'px';\n        \n        \treturn this;\n        };\n        \n        /**\n         * Show the tooltip.\n         *\n         * @param {Integer|Element} x\n         * @param {Integer}         y\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.show = function (x, y) {\n        \tx = this.attachedTo ? this.attachedTo : x;\n        \n        \t// Clear potential ongoing animation\n        \tclearTimeout(this.aIndex);\n        \n        \t// Position the element when requested\n        \tif (x != null) {\n        \t\tthis.position(x, y);\n        \t}\n        \n        \t// Stop here if tip is already visible\n        \tif (this.hidden) {\n        \t\tthis.hidden = 0;\n        \t\twindow.document.body.appendChild(this.element);\n        \t}\n        \n        \t// Make tooltip aware of window resize\n        \tif (this.attachedTo) {\n        \t\tthis._aware();\n        \t}\n        \n        \t// Trigger layout and kick in the transition\n        \tif (this.options.inClass) {\n        \t\tif (this.options.effectClass) {\n        \t\t\tvoid this.element.clientHeight;\n        \t\t}\n        \t\tthis.classes.add(this.options.inClass);\n        \t}\n        \n        \treturn this;\n        };\n        \n        /**\n         * Hide the tooltip.\n         *\n         * @return {Tooltip}\n         */\n        Tooltip.prototype.hide = function () {\n        \tif (this.hidden) {\n        \t\treturn;\n        \t}\n        \n        \tvar self = this;\n        \tvar duration = 0;\n        \n        \t// Remove .in class and calculate transition duration if any\n        \tif (this.options.inClass) {\n        \t\tthis.classes.remove(this.options.inClass);\n        \t\tif (this.options.effectClass) {\n        \t\t\tduration = transitionDuration(this.element);\n        \t\t}\n        \t}\n        \n        \t// Remove tip from window resize awareness\n        \tif (this.attachedTo) {\n        \t\tthis._unaware();\n        \t}\n        \n        \t// Remove the tip from the DOM when transition is done\n        \tclearTimeout(this.aIndex);\n        \tthis.aIndex = setTimeout(function () {\n        \t\tself.aIndex = 0;\n        \t\twindow.document.body.removeChild(self.element);\n        \t\tself.hidden = 1;\n        \t}, duration);\n        \n        \treturn this;\n        };\n        \n        Tooltip.prototype.toggle = function (x, y) {\n        \treturn this[this.hidden ? 'show' : 'hide'](x, y);\n        };\n        \n        Tooltip.prototype.destroy = function () {\n        \tclearTimeout(this.aIndex);\n        \tthis._unaware();\n        \tif (!this.hidden) {\n        \t\twindow.document.body.removeChild(this.element);\n        \t}\n        \tthis.element = this.options = null;\n        };\n        \n        /**\n         * Make the tip window resize aware.\n         *\n         * @return {Void}\n         */\n        Tooltip.prototype._aware = function () {\n        \tvar index = indexOf(Tooltip.winAware, this);\n        \tif (!~index) {\n        \t\tTooltip.winAware.push(this);\n        \t}\n        };\n        \n        /**\n         * Remove the window resize awareness.\n         *\n         * @return {Void}\n         */\n        Tooltip.prototype._unaware = function () {\n        \tvar index = indexOf(Tooltip.winAware, this);\n        \tif (~index) {\n        \t\tTooltip.winAware.splice(index, 1);\n        \t}\n        };\n        \n        /**\n         * Handles repositioning of tooltips on window resize.\n         *\n         * @return {Void}\n         */\n        Tooltip.reposition = (function () {\n        \tvar rAF = window.requestAnimationFrame || window.webkitRequestAnimationFrame || function (fn) {\n        \t\treturn setTimeout(fn, 17);\n        \t};\n        \tvar rIndex;\n        \n        \tfunction requestReposition() {\n        \t\tif (rIndex || !Tooltip.winAware.length) {\n        \t\t\treturn;\n        \t\t}\n        \t\trIndex = rAF(reposition, 17);\n        \t}\n        \n        \tfunction reposition() {\n        \t\trIndex = 0;\n        \t\tvar tip;\n        \t\tfor (var i = 0, l = Tooltip.winAware.length; i < l; i++) {\n        \t\t\ttip = Tooltip.winAware[i];\n        \t\t\ttip.position();\n        \t\t}\n        \t}\n        \n        \treturn requestReposition;\n        }());\n        Tooltip.winAware = [];\n        \n        // Bind winAware repositioning to window resize event\n        evt.bind(window, 'resize', Tooltip.reposition);\n        evt.bind(window, 'scroll', Tooltip.reposition);\n        \n        /**\n         * Array with dynamic class types.\n         *\n         * @type {Array}\n         */\n        Tooltip.classTypes = ['type', 'effect'];\n        \n        /**\n         * Default options for Tooltip constructor.\n         *\n         * @type {Object}\n         */\n        Tooltip.defaults = {\n        \tbaseClass:   'tooltip', // Base tooltip class name.\n        \ttypeClass:   null,      // Type tooltip class name.\n        \teffectClass: null,      // Effect tooltip class name.\n        \tinClass:     'in',      // Class used to transition stuff in.\n        \tplace:       'top',     // Default place.\n        \tspacing:     null,      // Gap between target and tooltip.\n        \toffset:      null,      // Horizontal offset to align arrow\n        \tauto:        0          // Whether to automatically adjust place to fit into window.\n        };//# sourceURL=darsain-tooltip/index.js")),
t.register("darsain-event/index.js",Function("exports, fakeRequire, module","'use strict';\n        \n        /**\n         * Bind `el` event `type` to `fn`.\n         *\n         * @param {Element}  el\n         * @param {String}   type\n         * @param {Function} fn\n         * @param {Boolean}  capture\n         *\n         * @return {Function}\n         */\n        exports.bind = window.addEventListener ? function (el, type, fn, capture) {\n        \tel.addEventListener(type, fn, capture || false);\n        \treturn fn;\n        } : function (el, type, fn) {\n        \tvar fnid = type + fn;\n        \tel[fnid] = el[fnid] || function () {\n        \t\tvar event = window.event;\n        \t\tevent.target = event.srcElement;\n        \t\tevent.preventDefault = function () {\n        \t\t\tevent.returnValue = false;\n        \t\t};\n        \t\tevent.stopPropagation = function () {\n        \t\t\tevent.cancelBubble = true;\n        \t\t};\n        \t\tfn.call(el, event);\n        \t};\n        \tel.attachEvent('on' + type, el[fnid]);\n        \treturn fn;\n        };\n        \n        /**\n         * Unbind `el` event `type`'s callback `fn`.\n         *\n         * @param {Element}  el\n         * @param {String}   type\n         * @param {Function} fn\n         * @param {Boolean}  capture\n         *\n         * @return {Function}\n         */\n        exports.unbind = window.removeEventListener ? function (el, type, fn, capture) {\n        \tel.removeEventListener(type, fn, capture || false);\n        \treturn fn;\n        } : function (el, type, fn) {\n        \tvar fnid = type + fn;\n        \tel.detachEvent('on' + type, el[fnid]);\n        \ttry {\n        \t\tdelete el[fnid];\n        \t} catch (err) {\n        \t\t// can't delete window object properties\n        \t\tel[fnid] = undefined;\n        \t}\n        \treturn fn;\n        };//# sourceURL=darsain-event/index.js")),t.register("component-indexof/index.js",Function("exports, fakeRequire, module","module.exports = function(arr, obj){\n          if (arr.indexOf) return arr.indexOf(obj);\n          for (var i = 0; i < arr.length; ++i) {\n            if (arr[i] === obj) return i;\n          }\n          return -1;\n        };//# sourceURL=component-indexof/index.js")),t.register("code42day-dataset/index.js",Function("exports, fakeRequire, module","module.exports=dataset;\n        \n        /*global document*/\n        \n        \n        // replace namesLikeThis with names-like-this\n        function toDashed(name) {\n          return name.replace(/([A-Z])/g, function(u) {\n            return \"-\" + u.toLowerCase();\n          });\n        }\n        \n        var fn;\n        \n        if (document.head.dataset) {\n          fn = {\n            set: function(node, attr, value) {\n               if (!node.dataset) return;               node.dataset[attr] = value;\n            },\n            get: function(node, attr) {\n              return node.dataset && node.dataset[attr];\n            }\n          };\n        } else {\n          fn = {\n            set: function(node, attr, value) {\n              node.setAttribute('data-' + toDashed(attr), value);\n            },\n            get: function(node, attr) {\n              return node.getAttribute('data-' + toDashed(attr));\n            }\n          };\n        }\n        \n        function dataset(node, attr, value) {\n          var self = {\n            set: set,\n            get: get\n          };\n        \n          function set(attr, value) {\n            fn.set(node, attr, value);\n            return self;\n          }\n        \n          function get(attr) {\n            return fn.get(node, attr);\n          }\n        \n          if (arguments.length === 3) {\n            return set(attr, value);\n          }\n          if (arguments.length == 2) {\n            return get(attr);\n          }\n        \n          return self;\n        }//# sourceURL=code42day-dataset/index.js")),t.register("tooltips/index.js",Function("exports, fakeRequire, module","'use strict';\n        \n        /**\n         * Dependencies.\n         */\n        var evt = fakeRequire('event');\n        var indexOf = fakeRequire('indexof');\n        var Tooltip = fakeRequire('tooltip');\n        var dataset = fakeRequire('dataset');\n        \n        /**\n         * Transport.\n         */\n        module.exports = Tooltips;\n        \n        /**\n         * Globals.\n         */\n        var MObserver = window.MutationObserver || window.WebkitMutationObserver;\n        \n        /**\n         * Prototypal inheritance.\n         *\n         * @param {Object} o\n         *\n         * @return {Object}\n         */\n        var objectCreate = Object.create || (function () {\n        \tfunction F() {}\n        \treturn function (o) {\n        \t\tF.prototype = o;\n        \t\treturn new F();\n        \t};\n        })();\n        \n        /**\n         * Poor man's shallow object extend.\n         *\n         * @param {Object} a\n         * @param {Object} b\n         *\n         * @return {Object}\n         */\n        function extend(a, b) {\n        \tfor (var key in b) {\n        \t\ta[key] = b[key];\n        \t}\n        \treturn a;\n        }\n        \n        /**\n         * Capitalize the first letter of a string.\n         *\n         * @param {String} string\n         *\n         * @return {String}\n         */\n        function ucFirst(string) {\n        \treturn string.charAt(0).toUpperCase() + string.slice(1);\n        }\n        \n        /**\n         * Tooltips constructor.\n         *\n         * @param {Element} container\n         * @param {Object}  options\n         *\n         * @return {Tooltips}\n         */\n        function Tooltips(container, options) {\n        \tif (!(this instanceof Tooltips)) {\n        \t\treturn new Tooltips(container, options);\n        \t}\n        \n        \tvar self = this;\n        \tvar observer, TID;\n        \n        \t/**\n        \t * Show tooltip attached to an element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.show = function (element) {\n        \t\treturn callTooltipMethod(element, 'show');\n        \t};\n        \n        \t/**\n        \t * Hide tooltip attached to an element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.hide = function (element) {\n        \t\treturn callTooltipMethod(element, 'hide');\n        \t};\n        \n        \t/**\n        \t * Toggle tooltip attached to an element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.toggle = function (element) {\n        \t\treturn callTooltipMethod(element, 'toggle');\n        \t};\n        \n        \t/**\n        \t * Retrieve tooltip attached to an element and call it's method.\n        \t *\n        \t * @param {Element} element\n        \t * @param {String}  method\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tfunction callTooltipMethod(element, method) {\n        \t\tvar tip = self.get(element);\n        \t\tif (tip) {\n        \t\t\ttip[method]();\n        \t\t}\n        \t\treturn self;\n        \t}\n        \n        \t/**\n        \t * Return a tooltip attached to an element. Tooltip is created if it doesn't exist yet.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltip}\n        \t */\n        \tself.get = function (element) {\n        \t\tvar tip = !!element && (element[TID] || createTip(element));\n        \t\tif (tip && !element[TID]) {\n        \t\t\telement[TID] = tip;\n        \t\t}\n        \t\treturn tip;\n        \t};\n        \n        \t/**\n        \t * Add element(s) to Tooltips instance.\n        \t *\n        \t * @param {[type]} element Can be element, or container containing elements to be added.\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.add = function (element) {\n        \t\tif (!element || element.nodeType !== 1) {\n        \t\t\treturn self;\n        \t\t}\n        \t\tif (dataset(element).get(options.key)) {\n        \t\t\tbindElement(element);\n        \t\t} else if (element.children) {\n        \t\t\tbindElements(element.querySelectorAll(self.selector));\n        \t\t}\n        \t\treturn self;\n        \t};\n        \n        \t/**\n        \t * Remove element(s) from Tooltips instance.\n        \t *\n        \t * @param {Element} element Can be element, or container containing elements to be removed.\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.remove = function (element) {\n        \t\tif (!element || element.nodeType !== 1) {\n        \t\t\treturn self;\n        \t\t}\n        \t\tif (dataset(element).get(options.key)) {\n        \t\t\tunbindElement(element);\n        \t\t} else if (element.children) {\n        \t\t\tunbindElements(element.querySelectorAll(self.selector));\n        \t\t}\n        \t\treturn self;\n        \t};\n        \n        \t/**\n        \t * Reload Tooltips instance.\n        \t *\n        \t * Unbinds current tooltipped elements, than selects the\n        \t * data-key elements from container and binds them again.\n        \t *\n        \t * @return {Tooltips}\n        \t */\n        \tself.reload = function () {\n        \t\t// Unbind old elements\n        \t\tunbindElements(self.elements);\n        \t\t// Bind new elements\n        \t\tbindElements(self.container.querySelectorAll(self.selector));\n        \t\treturn self;\n        \t};\n        \n        \t/**\n        \t * Destroy Tooltips instance.\n        \t *\n        \t * @return {Void}\n        \t */\n        \tself.destroy = function () {\n        \t\tunbindElements(this.elements);\n        \t\tif (observer) {\n        \t\t\tobserver.disconnect();\n        \t\t}\n        \t\tthis.container = this.elements = this.options = observer = null;\n        \t};\n        \n        \t/**\n        \t * Create a tip from element data attributes.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Tooltip}\n        \t */\n        \tfunction createTip(element) {\n        \t\tvar data = dataset(element);\n        \t\tvar content = data.get(options.key);\n        \t\tif (!content) {\n        \t\t\treturn false;\n        \t\t}\n        \t\tvar tipOptions = objectCreate(options.tooltip);\n        \t\tvar keyData;\n        \t\tfor (var key in Tooltip.defaults) {\n        \t\t\tkeyData = data.get(options.key + ucFirst(key.replace(/Class$/, '')));\n        \t\t\tif (!keyData) {\n        \t\t\t\tcontinue;\n        \t\t\t}\n        \t\t\ttipOptions[key] = keyData;\n        \t\t}\n        \t\treturn new Tooltip(content, tipOptions).attach(element);\n        \t}\n        \n        \t/**\n        \t * Bind Tooltips events to Array/NodeList of elements.\n        \t *\n        \t * @param {Array} elements\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction bindElements(elements) {\n        \t\tfor (var i = 0, l = elements.length; i < l; i++) {\n        \t\t\tbindElement(elements[i]);\n        \t\t}\n        \t}\n        \n        \t/**\n        \t * Bind Tooltips events to element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction bindElement(element) {\n        \t\tif (element[TID] || ~indexOf(self.elements, element)) {\n        \t\t\treturn;\n        \t\t}\n        \t\tevt.bind(element, options.showOn, eventHandler);\n        \t\tevt.bind(element, options.hideOn, eventHandler);\n        \t\tself.elements.push(element);\n        \t}\n        \n        \t/**\n        \t * Unbind Tooltips events from Array/NodeList of elements.\n        \t *\n        \t * @param {Array} elements\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction unbindElements(elements) {\n        \t\tif (self.elements === elements) {\n        \t\t\telements = elements.slice();\n        \t\t}\n        \t\tfor (var i = 0, l = elements.length; i < l; i++) {\n        \t\t\tunbindElement(elements[i]);\n        \t\t}\n        \t}\n        \n        \t/**\n        \t * Unbind Tooltips events from element.\n        \t *\n        \t * @param {Element} element\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction unbindElement(element) {\n        \t\tvar index = indexOf(self.elements, element);\n        \t\tif (!~index) {\n        \t\t\treturn;\n        \t\t}\n        \t\tif (element[TID]) {\n        \t\t\telement[TID].destroy();\n        \t\t\tdelete element[TID];\n        \t\t}\n        \t\tevt.unbind(element, options.showOn, eventHandler);\n        \t\tevt.unbind(element, options.hideOn, eventHandler);\n        \t\tself.elements.splice(index, 1);\n        \t}\n        \n        \t/**\n        \t * Tooltips events handler.\n        \t *\n        \t * @param {Event} event\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction eventHandler(event) {\n        \t\t/*jshint validthis:true */\n        \t\tif (options.showOn === options.hideOn) {\n        \t\t\tself.toggle(this);\n        \t\t} else {\n        \t\t\tself[event.type === options.showOn ? 'show' : 'hide'](this);\n        \t\t}\n        \t}\n        \n        \t/**\n        \t * Mutations handler.\n        \t *\n        \t * @param {Array} mutations\n        \t *\n        \t * @return {Void}\n        \t */\n        \tfunction mutationsHandler(mutations) {\n        \t\tvar added, removed, i, l;\n        \t\tfor (var m = 0, ml = mutations.length; m < ml; m++) {\n        \t\t\tadded = mutations[m].addedNodes;\n        \t\t\tremoved = mutations[m].removedNodes;\n        \t\t\tfor (i = 0, l = added.length; i < l; i++) {\n        \t\t\t\tself.add(added[i]);\n        \t\t\t}\n        \t\t\tfor (i = 0, l = removed.length; i < l; i++) {\n        \t\t\t\tself.remove(removed[i]);\n        \t\t\t}\n        \t\t\tif (mutations[m].type == 'attributes' && mutations[m].attributeName == 'data-title'){\n        \t\t\t\tif (!self.get(mutations[m])) { self.add(mutations[m].target); }\n        \t\t\t\tself.get(mutations[m].target).content(dataset(mutations[m].target).get('title'));\n        \t\t\t}\n        \t\t}\n        \t}\n        \n        \t// Construct\n        \t(function () {\n        \t\tself.container = container;\n        \t\tself.options = options = extend(objectCreate(Tooltips.defaults), options);\n        \t\tself.ID = TID = options.key + Math.random().toString(36).slice(2);\n        \t\tself.elements = [];\n        \n        \t\t// Create tips selector\n        \t\tself.selector = '[data-' + options.key + ']';\n        \n        \t\t// Load tips\n        \t\tself.reload();\n        \n        \t\t// Create mutations observer\n        \t\tif (options.observe && MObserver) {\n        \t\t\tobserver = new MObserver(mutationsHandler);\n        \t\t\tobserver.observe(self.container, {\n        \t\t\t\tchildList: true,\n        \t\t\t\tsubtree: true,\n        \t\t\t\tattributes: true\n        \t\t\t});\n        \t\t}\n        \t}());\n        }\n        \n        /**\n         * Expose Tooltip.\n         */\n        Tooltips.Tooltip = Tooltip;\n        \n        /**\n         * Default Tooltips options.\n         *\n         * @type {Object}\n         */\n        Tooltips.defaults = {\n        \ttooltip:    {},          // Options for individual Tooltip instances.\n        \tkey:       'tooltip',    // Tooltips data attribute key.\n        \tshowOn:    'mouseenter', // Show tooltip event.\n        \thideOn:    'mouseleave', // Hide tooltip event.\n        \tobserve:   0             // Enable mutation observer (used only when supported).\n        };//# sourceURL=tooltips/index.js")),t.alias("darsain-tooltip/index.js","tooltips/deps/tooltip/index.js"),t.alias("darsain-tooltip/index.js","tooltip/index.js"),t.alias("darsain-event/index.js","darsain-tooltip/deps/event/index.js"),t.alias("darsain-position/index.js","darsain-tooltip/deps/position/index.js"),t.alias("component-classes/index.js","darsain-tooltip/deps/classes/index.js"),t.alias("component-indexof/index.js","component-classes/deps/indexof/index.js"),t.alias("component-indexof/index.js","darsain-tooltip/deps/indexof/index.js"),t.alias("darsain-event/index.js","tooltips/deps/event/index.js"),t.alias("darsain-event/index.js","event/index.js"),t.alias("component-indexof/index.js","tooltips/deps/indexof/index.js"),t.alias("component-indexof/index.js","indexof/index.js"),t.alias("code42day-dataset/index.js","tooltips/deps/dataset/index.js"),t.alias("code42day-dataset/index.js","dataset/index.js"),"object"==typeof n?e.exports=t("tooltips"):"function"==typeof define&&define.amd?define(function(){return t("tooltips")}):this.Tooltips=t("tooltips")}()},{}]},{},[31]);